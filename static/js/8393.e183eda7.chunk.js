"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[8393],{68393:(e,o,s)=>{s.r(o),s.d(o,{default:()=>x});var a=s(72791),t=s(57689),l=s(10159),n=s(98255),r=s(12481),c=s(83708),i=s(89743),d=s(2677),u=s(59434),m=s(60717),p=s(89164),h=s(94294),g=s(68449),f=s(18406),y=s(80184);const x=function(e){let{onLogin:o,setIsLoggedIn:s}=e;const[x,k]=(0,a.useState)(!1),w=((0,u.v9)(m.w),(0,t.s0)()),b=async()=>{try{const a=await(0,n.rh)(l.I8,l.Ap),t=n.hJ.credentialFromResult(a),i=t.accessToken,d=t.idToken;console.log("Access token",i),console.log("Id token",d);const u=a.user;if(console.log("Post login :",u),console.log("UserId",u.uid),console.log("Result ",a),a){var e;let o=await(null===(e=l.I8.currentUser)||void 0===e?void 0:e.getIdToken());console.log("token",o),localStorage.setItem("authToken",o)}o({UserId:u.uid,email:u.email,isPremium:u.isPremium,displayName:u.displayName,WorkshopCreated:u.WorkshopCreated,WorkshopEnrolled:u.WorkshopEnrolled,CreatorMode:!1,photoURL:u.photoURL},u),s(!0),await(async e=>{try{const o=(0,r.JU)(l.db,c.Ul.USER,e.uid);if((await(0,r.QT)(o)).exists())console.log("User there");else{console.log("No such document!");const o={Name:e.displayName,Email:e.email,DoB:null,UserId:e.uid,WorkshopCreated:[],WorkshopEnrolled:[],Cart:[],CreatorMode:!1,KycIdList:{},StudioCreated:[],premiumTill:!1,TransactionIDs:[],recentlyWatched:{0:"",1:"",2:"",3:"",4:""}},s=e.email,a={user_id:e.uid},t=await(0,f.qC)(o,c.Ul.USER,s,a);t.ok?console.log("User added successfully"):console.error(t)}const s=(0,r.JU)(l.db,c.Ul.USER,e.uid),a=await(0,r.QT)(s);localStorage.setItem("userDetails",JSON.stringify({UserId:e.uid,email:e.email,isPremium:a.data().isPremium,displayName:a.data().displayName,WorkshopCreated:a.data().WorkshopCreated,WorkshopEnrolled:a.data().WorkshopEnrolled}))}catch(o){console.error("Error adding user: ",o)}})(u),await(0,g.oM)(u.uid),w("/")}catch(a){a.code,a.message;console.log("Invalid username or password"),k(!0)}};return(0,y.jsx)(p.Z,{fluid:!0,className:"custom-container-main",children:(0,y.jsx)(i.Z,{children:(0,y.jsx)(d.Z,{xs:12,md:12,children:(0,y.jsx)("div",{children:(0,y.jsx)("form",{className:"custom-login-form",onSubmit:e=>{e.preventDefault(),b()},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"15px 0"},children:(0,y.jsxs)(h.Z,{type:"submit",style:{backgroundColor:"#D9D9D9",color:"#000",borderRadius:"6px",textTransform:"none",border:"1px solid #777",padding:"8px 16px"},children:[(0,y.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Icon",style:{marginRight:"10px",height:"20px"}}),"Sign In with Google"]})})})})})})}},2677:(e,o,s)=>{s.d(o,{Z:()=>i});var a=s(41418),t=s.n(a),l=s(72791),n=s(10162),r=s(80184);const c=l.forwardRef(((e,o)=>{const[{className:s,...a},{as:l="div",bsPrefix:c,spans:i}]=function(e){let{as:o,bsPrefix:s,className:a,...l}=e;s=(0,n.vE)(s,"col");const r=(0,n.pi)(),c=(0,n.zG)(),i=[],d=[];return r.forEach((e=>{const o=l[e];let a,t,n;delete l[e],"object"===typeof o&&null!=o?({span:a,offset:t,order:n}=o):a=o;const r=e!==c?"-".concat(e):"";a&&i.push(!0===a?"".concat(s).concat(r):"".concat(s).concat(r,"-").concat(a)),null!=n&&d.push("order".concat(r,"-").concat(n)),null!=t&&d.push("offset".concat(r,"-").concat(t))})),[{...l,className:t()(a,...i,...d)},{as:o,bsPrefix:s,spans:i}]}(e);return(0,r.jsx)(l,{...a,ref:o,className:t()(s,!i.length&&c)})}));c.displayName="Col";const i=c},89743:(e,o,s)=>{s.d(o,{Z:()=>i});var a=s(41418),t=s.n(a),l=s(72791),n=s(10162),r=s(80184);const c=l.forwardRef(((e,o)=>{let{bsPrefix:s,className:a,as:l="div",...c}=e;const i=(0,n.vE)(s,"row"),d=(0,n.pi)(),u=(0,n.zG)(),m="".concat(i,"-cols"),p=[];return d.forEach((e=>{const o=c[e];let s;delete c[e],null!=o&&"object"===typeof o?({cols:s}=o):s=o;const a=e!==u?"-".concat(e):"";null!=s&&p.push("".concat(m).concat(a,"-").concat(s))})),(0,r.jsx)(l,{ref:o,...c,className:t()(a,i,...p)})}));c.displayName="Row";const i=c}}]);
//# sourceMappingURL=8393.e183eda7.chunk.js.map