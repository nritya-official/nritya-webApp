{"version":3,"file":"static/js/6009.b0488d3d.chunk.js","mappings":"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","sources":["Screens/OpenClassFullPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {Box, Grid,CircularProgress} from \"@mui/material\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { COLLECTIONS, STORAGES } from \"../constants\"; // Adjust the import paths as necessary\nimport {\n  readDocument,\n  readDocumentWithImageUrl,\n} from \"../utils/firebaseUtils\";\nimport { selectDarkModeStatus } from \"../redux/selectors/darkModeSelector\";\nimport { useSnackbar } from \"../context/SnackbarContext\";\nimport { bookEntity } from \"../utils/common\";\n\nimport MediaDisplay from \"../Components/MediaDisplay\";\nimport EntityDetailsSection from \"../Components/EntityDetailsSection\";\nimport EntityBookingCard from \"../Components/EntityBookingCard\";\n\nfunction OpenClassFullPage() {\n  const { openClassId } = useParams();\n  console.log(\"From OpenClassFullPage,\", openClassId);\n  const navigate = useNavigate();\n  const showSnackbar = useSnackbar();\n  const isDarkModeOn = useSelector(selectDarkModeStatus);\n  const [imageUrl, setImageUrl] = useState(null);\n  const [dataItem, setDataItem] = useState(null);\n  const [personsAllowed, setPersonsAllowed] = useState(1); // Number of persons\n\n  const currentUser = JSON.parse(localStorage.getItem(\"userInfo\"))?.UserId;\n  const currentUserEmail = JSON.parse(localStorage.getItem(\"userInfo\"))?.email;\n\n  // Define Internet Conversion Charges\n  const INTERNET_CONV_CHARGES = 50; // Adjust as needed\n\n  // Calculate Total Price\n  const totalPrice =\n    dataItem && personsAllowed\n      ? 0 * personsAllowed \n      : 0;\n\n  const handleBook = async () => {\n    if (!currentUser) {\n      showSnackbar(\"Please login to book\", \"warning\");\n      navigate(\"/login\"); // Redirect to login page if not logged in\n      return;\n    }\n    try {\n      const bookingData = {\n        userId: currentUser,\n        entityType: COLLECTIONS.OPEN_CLASSES,\n        openClassId: openClassId,\n        associatedStudioId: dataItem.StudioId,\n        emailLearner: currentUserEmail,\n        personsAllowed: personsAllowed,\n        pricePerPerson: dataItem.price,\n        internetConvCharges: INTERNET_CONV_CHARGES,\n        totalPrice: totalPrice,\n        // Add other necessary fields here\n      };\n\n      const result = await bookEntity(bookingData);\n      if (result && result.nSuccessCode === 200) {\n        showSnackbar(\"Workshop booked\", \"success\");\n      } else if (result && result.nSuccessCode === 205) {\n        const timestampInSeconds = result.bookedAt;\n        const timestampInMilliseconds = timestampInSeconds * 1000;\n        const date = new Date(timestampInMilliseconds);\n        const formattedDate = date.toLocaleString();\n        showSnackbar(`Workshop already booked at ${formattedDate}`, \"info\");\n      } else {\n        const errorMessage = result\n          ? `Error: ${JSON.stringify(result)}`\n          : \"An unknown error occurred.\";\n        showSnackbar(errorMessage, \"error\");\n      }\n    } catch (error) {\n      console.error(error);\n      showSnackbar(error?.message || \"Something went wrong\", \"error\");\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await readDocument(COLLECTIONS.OPEN_CLASSES, openClassId);\n        setDataItem(data);\n        if (data && data.StudioId) {\n          const studioDetails = await readDocument(\n            COLLECTIONS.STUDIO,\n            data.StudioId\n          );\n          setDataItem((prevData) => ({ ...prevData, studioDetails }));\n        }\n      } catch (error) {\n        console.error(\"Error fetching workshop data:\", error);\n        showSnackbar(\"Failed to load workshop details.\", \"error\");\n      }\n    };\n\n    const fetchImage = async () => {\n      try {\n        const url = await readDocumentWithImageUrl(\n          STORAGES.OPENCLASSICON,\n          openClassId\n        );\n        setImageUrl(\n          url ||\n            \"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg\"\n        );\n      } catch (error) {\n        console.error(\"Error fetching image URL:\", error);\n        setImageUrl(\n          \"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg\"\n        );\n      }\n    };\n\n    if (openClassId) {\n      fetchData();\n      fetchImage();\n    }\n  }, [openClassId, showSnackbar]);\n\n  if (!dataItem) {\n    return (\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"100vh\",\n        }}\n      >\n        <CircularProgress color=\"primary\" />\n      </Box>\n    );\n  }\n\n  const whatsappMessage = encodeURIComponent(\n    \"Hey, I found your Open Class on nritya.co.in. I'm interested\"\n  );\n\n  return (\n    <Box\n      sx={{\n        padding: \"0rem\",\n        minHeight: \"100vh\",\n        color: isDarkModeOn ? \"white\" : \"black\",\n      }}\n    >\n      <Grid container spacing={2}>\n        {/* Workshop Image */}\n        <Grid item xs={12} lg={8}>\n        <MediaDisplay \n            youtubeViedoLink={dataItem.youtubeViedoLink} \n            imageUrl={imageUrl} \n            altText={dataItem.openClassName} \n            />\n        </Grid>\n\n        {/* Workshop Details */}\n        <EntityBookingCard dataItem={dataItem} personsAllowed={personsAllowed} setPersonsAllowed={setPersonsAllowed}\n                totalPrice={totalPrice} handleBook={handleBook} entityType={COLLECTIONS.OPEN_CLASSES}/>\n\n        {/* Additional Workshop Details */}\n        <EntityDetailsSection dataItem={dataItem} whatsappMessage={whatsappMessage}/>\n      </Grid>\n\n    </Box>\n  );\n}\n\nexport default OpenClassFullPage;\n"],"names":["_JSON$parse","_JSON$parse2","openClassId","useParams","console","log","navigate","useNavigate","showSnackbar","useSnackbar","isDarkModeOn","useSelector","selectDarkModeStatus","imageUrl","setImageUrl","useState","dataItem","setDataItem","personsAllowed","setPersonsAllowed","currentUser","JSON","parse","localStorage","getItem","UserId","currentUserEmail","email","totalPrice","useEffect","async","data","readDocument","COLLECTIONS","OPEN_CLASSES","StudioId","studioDetails","STUDIO","prevData","error","fetchData","url","readDocumentWithImageUrl","STORAGES","OPENCLASSICON","fetchImage","_jsx","Box","sx","display","justifyContent","alignItems","height","children","CircularProgress","color","whatsappMessage","encodeURIComponent","padding","minHeight","_jsxs","Grid","container","spacing","item","xs","lg","MediaDisplay","youtubeViedoLink","altText","openClassName","EntityBookingCard","handleBook","bookingData","userId","entityType","associatedStudioId","emailLearner","pricePerPerson","price","internetConvCharges","result","bookEntity","nSuccessCode","timestampInSeconds","bookedAt","formattedDate","Date","toLocaleString","errorMessage","stringify","message","EntityDetailsSection"],"sourceRoot":""}