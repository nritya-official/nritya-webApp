"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[763],{59777:(e,a,t)=>{t.d(a,{Z:()=>B});t(11518);var l=t(72791),o=t(1413),r=t(92552),n=t(84654),s=t(28658),i=t(69597),d=t(83168),c=t(88447),u=t(16029),h=t(61889),m=t(20890),x=t(94294),p=t(13400),g=t(36314),v=t(59434),j=t(83708),b=t(68449),Z=t(60717),y=t(97892),f=t.n(y),S=t(12481),w=t(10159),C=t(75424),k=t(49071),I=t(10884),N=t(93819),D=t(80184);function U(e){var a,t,r,n,s,i;let{open:d,handleClose:g,dataItem:b,activateCourse:y,deactivateCourse:U,actionsAllowed:E}=e;const B=(0,C.D)(),L=(0,v.v9)(Z.w),[P,R]=(0,l.useState)(!1),[O,J]=(0,l.useState)(null),A=null===(a=JSON.parse(localStorage.getItem("userInfo")))||void 0===a?void 0:a.UserId;(0,l.useEffect)((()=>{(async()=>{try{const e=(0,S.JU)(w.db,"User",A),a=await(0,S.QT)(e);a.exists()&&J(a.data())}catch(e){console.log(" error")}})()}),[]);const M=b.UserId===A,F=null===O||void 0===O||null===(t=O.BookedCourses)||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,null===b||void 0===b?void 0:b.id),T=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),K="".concat(window.location.host,"/nritya-webApp#/course/").concat(b.id);return(0,D.jsx)(c.Z,{open:d,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,D.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:L?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:L?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,D.jsxs)(h.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,D.jsx)(h.ZP,{item:!0,xs:12,lg:8,children:(0,D.jsx)("img",{src:b.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,D.jsxs)(h.ZP,{item:!0,xs:12,lg:4,children:[(0,D.jsxs)(u.Z,{sx:{height:"100%",bgcolor:L?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,D.jsxs)(u.Z,{sx:{flex:1},children:[(0,D.jsx)(m.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:f()(b.date).format("LL")}),(0,D.jsx)(m.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:b.time}),(0,D.jsx)(m.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:L?"white":"black"},children:b.venue}),(0,D.jsxs)(m.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:L?"white":"black"},children:[b.duration," ",b.durationUnit]})]}),(0,D.jsxs)(u.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,D.jsxs)(m.Z,{variant:"h5",sx:{alignSelf:"center",color:L?"white":"black"},children:["\u20b9",b.price]}),!E&&!M&&A&&(0,D.jsx)(x.Z,{variant:"outlined",onClick:async()=>{try{R(!0),(0,S.ET)((0,S.hJ)(w.db,j.Ul.BOOKINGS),{StudioId:b.StudioId,CourseId:b.id,UserId:A,bookingDate:Date.now()});const e=(0,S.JU)(w.db,"User",A),a=await(0,S.QT)(e);a.exists()&&null!=a.data()&&await(0,S.r7)(e,{BookedCourses:[...a.data().BookedCourses||[],b.id]}),J((e=>(0,o.Z)((0,o.Z)({},e),{},{BookedCourses:[...(null===e||void 0===e?void 0:e.BookedCourses)||[],b.id]}))),B("Course booked","success")}catch(e){console.error(e),B((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{R(!1)}},disabled:F||P,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:F?"Booked":"Book Now"})]})]}),!E&&!M&&A&&(0,D.jsx)(m.Z,{component:"p",variant:"caption",sx:{my:"2px",color:L?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,D.jsxs)(h.ZP,{item:!0,sx:{mt:1},children:[(0,D.jsxs)(u.Z,{sx:{display:"flex",columnGap:2},children:[(0,D.jsxs)(m.Z,{variant:"h5",component:"p",sx:{color:L?"white":"black"},children:[b.name||"",b.danceStyles.map((e=>" | ".concat(e)))]}),(0,D.jsx)(N.Z,{shareUrl:K})]}),(0,D.jsxs)(m.Z,{variant:"body1",component:"p",sx:{mt:1,color:L?"white":"black"},children:[(0,D.jsxs)("span",{children:["By ",(null===(n=b.studioDetails)||void 0===n?void 0:n.studioName)||""]}),b.studioDetails&&(null===(s=b.studioDetails)||void 0===s?void 0:s.whatsappNumber)&&(0,D.jsx)(p.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(b.studioDetails.whatsappNumber,"?text=").concat(T),children:(0,D.jsx)("img",{src:k,alt:"Whatsapp call",style:{width:30,height:28}})}),b.studioDetails&&(null===(i=b.studioDetails)||void 0===i?void 0:i.mobileNumber)&&(0,D.jsx)(p.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(b.studioDetails.mobileNumber),children:(0,D.jsx)("img",{src:I,alt:"Phone call",style:{width:30,height:28}})})]}),(0,D.jsx)("div",{style:{color:L?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:b.description||"Course Description"}})]})]}),(0,D.jsxs)(u.Z,{sx:{mt:"1rem",textAlign:"right"},children:[E&&M&&(0,D.jsx)(x.Z,{onClick:()=>null!==b&&void 0!==b&&b.active?U(null===b||void 0===b?void 0:b.id):y(null===b||void 0===b?void 0:b.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==b&&void 0!==b&&b.active?"Deactivate":"Activate"}),(0,D.jsx)(x.Z,{onClick:g,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function E(e){var a;let{dataItem:t,activateCourse:c,deactivateCourse:h,actionsAllowed:m}=e;const x=(0,v.v9)(Z.w),[p,y]=(0,l.useState)(null),[f,S]=(0,l.useState)(!1),w=t.id;(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,b.Us)(j.Rb.COURSEICON,w);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[t.id]);const C={backgroundColor:x?"#444":"white",padding:"0px",color:x?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(n.Z,{variant:"solid",sx:(0,o.Z)((0,o.Z)({},C),{},{"&:hover":{transform:"scale(1.01)",cursor:"pointer"}}),onClick:()=>S(!0),children:[(0,D.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,D.jsx)("img",{src:p,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,D.jsx)(g.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:t&&t.danceStyles?t.danceStyles.slice(0,3).map(((e,a)=>(0,D.jsx)(i.Z,{color:a%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},a))):(0,D.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,D.jsxs)(s.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,D.jsxs)(u.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:x?"white":"black",extDecoder:"one"},children:[(0,D.jsx)("span",{children:t&&t.name?t.name:""}),!(null!==t&&void 0!==t&&t.active)&&(0,D.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,D.jsxs)(d.ZP,{style:{color:x?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(a=t.studioDetails)&&void 0!==a&&a.studioName?t.studioDetails.studioName:""]}),(0,D.jsx)(d.ZP,{style:{marginTop:10,color:x?"white":"black"},level:"body-xs",noWrap:!0,children:t.venue?t.venue:""}),(0,D.jsxs)(d.ZP,{style:{color:x?"white":"black"},level:"body-xs",children:[t.date||""," | ",t.time||""]})]})]}),(0,D.jsx)(U,{dataItem:(0,o.Z)((0,o.Z)({},t),{},{imageUrl:p}),open:f,handleClose:()=>S(!1),activateCourse:c,deactivateCourse:h,actionsAllowed:m})]})}const B=e=>{let{dataList:a,activateCourse:t,deactivateCourse:l,actionsAllowed:o}=e;return(0,D.jsx)("div",{className:"horizontal-scroll-wrapper",children:a.map(((e,a)=>(0,D.jsx)(E,{dataItem:e,activateCourse:t,deactivateCourse:l,actionsAllowed:o},e.id)))})}},81018:(e,a,t)=>{t.d(a,{Z:()=>b});var l=t(72791),o=t(6429),r=t.n(o),n=t(30276),s=t(10159),i=t(59434),d=t(60717),c=t(68449),u=t(57621),h=t(13400),m=t(39504),x=t(27247),p=t(75424),g=t(83708),v=t(80184);const j=e=>{let{entityId:a,storageFolder:t,title:o,maxImageCount:j=10,updateMode:b,disable:Z}=e;(0,p.D)();const[y,f]=(0,l.useState)([]),[S,w]=(0,l.useState)([]),[C,k]=(0,l.useState)([]),[I,N]=(0,l.useState)([]),D=(0,i.v9)(d.w),[U,E]=(0,l.useState)(-1),[B,L]=(0,l.useState)(-1);console.log("Kyc enitity id ",a,Z);const P=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const t=a<0?0:a,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]};(0,l.useEffect)((()=>{a&&O(a)}),[a]),(0,l.useEffect)((()=>{if(j&&y.length>j){const e=y.slice(0,j);alert("Exceeded maxImageCount, keeping first ".concat(j," files.")),f(e)}}),[y,j]);const R=(e,a)=>{const t=e.map((e=>e.id)),l=a.map((e=>e.id));return{imagesToDelete:a.filter((e=>!t.includes(e.id))),newImages:e.filter((e=>!l.includes(e.id)))}},O=async e=>{f([]),k([]),N([]);try{const a="".concat(t,"/").concat(e);console.log(a);const l=(0,n.iH)(s.tO,a),o=await(0,n.aF)(l),r=await Promise.all(o.items.map((async e=>{const a=await(0,n.Jt)(e);return{id:e.name,filename:e.name,fileURL:a}})));w(r),f(r)}catch(a){console.error("Error fetching user images:",a)}};return(0,v.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,v.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,v.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,v.jsx)("div",{className:"card mt-5",children:(0,v.jsxs)("div",{className:"card-body",style:{backgroundColor:D?"#333333":"white"},children:[(0,v.jsxs)("div",{className:"kb-data-box",children:[(0,v.jsx)("div",{className:"kb-modal-data-title",children:(0,v.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,v.jsx)("h4",{children:o}),(0,v.jsxs)("p",{children:["Max no of image(s):",j," ",t===g.Rb.STUDIOIMAGES&&(0,v.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,v.jsxs)("form",{style:{backgroundColor:D?"#333333":"white"},children:[(0,v.jsx)("div",{className:"kb-file-upload",children:(0,v.jsx)("div",{className:"file-upload-box",children:(0,v.jsx)("input",{type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const a=Array.from(e.target.files),t=[];a.forEach((e=>{const l=new FileReader;l.onloadend=()=>{t.push({id:r().generate(),filename:e.name,filetype:e.type,fileimage:l.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:P(e.size),file:e}),t.length===a.length&&(f((e=>[...e,...t])),k(t))},l.readAsDataURL(e)}))},multiple:!0})})}),(0,v.jsx)("br",{}),(0,v.jsx)("div",{className:"kb-attach-box mb-3",children:(0,v.jsx)("div",{className:"row",children:a&&y.length>0?y.map((e=>(0,v.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,v.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,v.jsx)(h.Z,{"aria-label":"delete",disabled:Z,onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this image?")){const a=y.find((a=>a.id===e));N((e=>[...e,a])),f((a=>a.filter((a=>a.id!==e))))}})(e.id),style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,v.jsx)(x.Z,{style:{color:"ff0000"}})})]}):(0,v.jsx)(m.Z,{children:(0,v.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,v.jsx)("div",{className:"col-12 text-center",children:(0,v.jsx)("p",{children:"No images selected"})})})}),(0,v.jsx)("div",{className:"kb-buttons-box",children:(0,v.jsx)("button",{type:"button",className:"btn form-submit",style:{backgroundColor:D?"#892CDC":"black",color:"white"},onClick:async()=>{if(a)try{if(1===j)await(0,c.ih)(t,a),await(0,c.eg)(t,C,a);else{const{imagesToDelete:e,newImages:l}=R(y,S);e.length>0&&await(0,c.xR)(t,e,a,E),l.length>0&&await(0,c.eg)(t,l,a,L)}}catch(e){console.error("Error uploading/deleting images:",e)}else alert("No studio selected")},disabled:Z,children:"Image Upload"})})]}),y.length>0&&(0,v.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("hr",{}),y.map((e=>(0,v.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,v.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,v.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,v.jsx)("div",{className:"card-body",children:(0,v.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),U>=0&&(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Deleting images... ",U.toFixed(2),"%"]}),(0,v.jsxs)("progress",{value:U,max:"100",style:{color:D?"#fff":"#000"},children:[U.toFixed(2),"%"]})]}),B>=0&&(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Uploading images... ",B.toFixed(2),"%"]}),(0,v.jsxs)("progress",{value:B,max:"100",style:{color:D?"#fff":"#000"},children:[B.toFixed(2),"%"]})]})]})})})})})};j.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const b=j},26073:(e,a,t)=>{t.d(a,{Z:()=>d});t(72791);var l=t(89743),o=t(2677),r=t(95313),n=t(59434),s=t(60717),i=t(80184);const d=e=>{var a;let{defaultTime:t,handleSelect:d}=e;const c=t.split("-")[0].trim(),u=null===(a=t.split("-")[1])||void 0===a?void 0:a.trim(),h=(0,n.v9)(s.w),m=e=>{const a=(()=>{const e=[];let a=[],t=[];for(let l=0;l<24;l++)for(let e=0;e<60;e+=30){const o=e.toString().padStart(2,"0");if(l<12){const e=0===l?12:l;a.push("".concat(e,":").concat(o," AM"))}else{const e=12===l?12:l%12;t.push("".concat(e,":").concat(o," PM"))}}for(let l=0;l<a.length||l<t.length;l++)l<a.length&&e.push(a[l]),l<t.length&&e.push(t[l]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),a.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"Start Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:m(c)})]})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"End Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:m(u)})]})})]})}},40763:(e,a,t)=>{t.r(a),t.d(a,{default:()=>H});var l=t(1413),o=t(72791),r=t(10159),n=t(12481),s=t(83708),i=t(59434),d=t(60717),c=t(61224),u=t(43896),h=t(83449),m=t(47283),x=t(82851),p=t(16029),g=t(59777),v=t(95313),j=t(89743),b=t(2677),Z=t(94294),y=t(57482),f=t(81018),S=t(51650),w=t(5712),C=t(76989),k=t(67107),I=t(44507),N=t(4708),D=t(63237),U=t(4560),E=t(24750),B=t(71652),L=t(97892),P=t.n(L),R=t(26073),O=t(75424),J=t(82873),A=t(18406),M=t(66770),F=t.n(M),T=(t(86009),t(763)),K=t(80184);const z=function(e){let{instructors:a,studioId:t,setCourses:c}=e;const u=(0,O.D)(),[h,m]=(0,o.useState)(""),x=(0,i.v9)(d.w),[p,g]=(0,o.useState)([]),[L,M]=(0,o.useState)([]),z=a.map((e=>"".concat(e.name," - ").concat(e.id))),G=S.W,H=localStorage.getItem("filterLocation")||"",[V,Y]=(0,o.useState)(!1),[q,W]=(0,o.useState)(""),[_,Q]=(0,o.useState)(null),[$,X]=(0,o.useState)(""),[ee,ae]=(0,o.useState)(H),[te,le]=(0,o.useState)(""),[oe,re]=(0,o.useState)(P()(new Date)),[ne,se]=(0,o.useState)(!1),[ie,de]=(0,o.useState)(1),[ce,ue]=(0,o.useState)(""),he=(0,k.Z)({palette:{mode:x?"dark":"light"}}),me=e=>{e.reset(),M([]),g([]),Q(null),W(""),X(""),le(""),re(P()(Date.now())),ae(""),ue("")};return(0,o.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const j=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_COURSES),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),b=await(0,n.PL)(j);if(b.empty){var o,i,d,c,u,h,m,x;await(0,n.ET)((0,n.hJ)(r.db,s.i0.DRAFT_COURSES),{name:(null===(o=e.name)||void 0===o?void 0:o.value)||"",duration:(null===(i=e.duration)||void 0===i?void 0:i.value)||"",price:(null===(d=e.courseFees)||void 0===d?void 0:d.value)||"",description:ce,danceStyles:L,instructors:p?null===p||void 0===p||null===(c=p.map)||void 0===c?void 0:c.call(p,(e=>{var a,t,l,o;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(t=a.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(o=l.trim)||void 0===o?void 0:o.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:_&&(null===_||void 0===_||null===(u=_.split)||void 0===u||null===(h=u.call(_,":"))||void 0===h||null===(m=h[1])||void 0===m||null===(x=m.trim)||void 0===x?void 0:x.call(m))||null,durationUnit:q,level:$,time:te,date:oe.format("YYYY-MM-DD"),city:ee})}else{var v;let o=[];b.forEach((e=>{o.push((0,l.Z)({id:e.id},e.data()))}));let r=o[0];e.name.value=r.name,e.courseFees.value=r.price,e.duration.value=r.duration,ue((null===r||void 0===r?void 0:r.description)||""),M(null!==r&&void 0!==r&&null!==(v=r.danceStyles)&&void 0!==v&&v.length?r.danceStyles:[]),g(a.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const n=t.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));n>0&&Q(t[n]),W(r.durationUnit),X((null===r||void 0===r?void 0:r.level)||""),le((null===r||void 0===r?void 0:r.time)||""),re(P()((null===r||void 0===r?void 0:r.date)||Date.now())),ae((null===r||void 0===r?void 0:r.city)||"")}Y(!0)}catch(j){console.error(j)}}()}),[]),(0,o.useEffect)((()=>{let e=null,a=null;return V&&async function(){const t=document.getElementById("addStudioForm");try{const o=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_COURSES),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),i=await(0,n.PL)(o);if(!i.empty){let o=[];i.forEach((e=>{o.push((0,l.Z)({id:e.id},e.data()))}));let d=o[0];const c=(0,n.JU)(r.db,s.i0.DRAFT_COURSES,d.id);e=setInterval((async()=>{try{var e,l,o,r,s,i,d,u;const m={name:(null===(e=t.name)||void 0===e?void 0:e.value)||"",price:(null===(l=t.courseFees)||void 0===l?void 0:l.value)||"",description:ce,danceStyles:L,instructors:p?null===p||void 0===p||null===(o=p.map)||void 0===o?void 0:o.call(p,(e=>{var a,t,l,o;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(t=a.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(o=l.trim)||void 0===o?void 0:o.call(l))||null})):null,StudioId:_&&(null===_||void 0===_||null===(r=_.split)||void 0===r||null===(s=r.call(_,":"))||void 0===s||null===(i=s[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:(null===(u=t.duration)||void 0===u?void 0:u.value)||"",durationUnit:q,level:$,time:te,date:oe.format("YYYY-MM-DD"),city:ee};if((0,T.isEqual)(a,m))console.log("Nothing for Autosave to save");else try{await(0,n.r7)(c,m),a=m,console.log("Next AutoSave in",1e4)}catch(h){console.error(h)}}catch(h){console.error(h)}}),1e4)}}catch(o){console.error(o)}}(),()=>clearInterval(e)}),[V,L,p,_,q,$,te,oe,ee,ce]),(0,o.useEffect)((()=>{if(x){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[x]),(0,K.jsxs)("div",{children:[1===ie&&(0,K.jsx)(v.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if((e=>{let a=!0;return e.name.value&&e.duration.value&&e.courseFees.value&&ce&&null!==L&&void 0!==L&&L.length&&null!==p&&void 0!==p&&p.length&&_&&q&&$&&te&&oe&&ee||(a=!1),a})(a))try{var t,o,i,d,h;const x=JSON.parse(localStorage.getItem("userInfo")).email,g={courseName:e.target.name.value,danceStyles:L,instructors:p?null===p||void 0===p||null===(t=p.map)||void 0===t?void 0:t.call(p,(e=>{var a,t,l,o;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(t=a.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(o=l.trim)||void 0===o?void 0:o.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:x,StudioId:_&&(null===_||void 0===_||null===(o=_.split)||void 0===o||null===(i=o.call(_,":"))||void 0===i||null===(d=i[1])||void 0===d||null===(h=d.trim)||void 0===h?void 0:h.call(d))||null,duration:e.target.duration.value,durationUnit:q,level:$,time:te,date:oe.format("YYYY-MM-DD"),price:e.target.courseFees.value,description:ce,city:ee,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};se(!0);const v=x,j={entity_name:g.courseName,time:g.time,date:g.date,StudioId:g.StudioId},b=await(0,A.qC)(g,s.Ul.COURSES,v,j);if(b.ok){const e=await b.json();m(e.id),c((a=>[...a,(0,l.Z)({id:e.id},g)])),me(a),(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_COURSES),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=await(0,n.PL)(e);if(!a.empty){let e=[];a.forEach((a=>{e.push((0,l.Z)({id:a.id},a.data()))}));let t=e[0];const o=(0,n.JU)(r.db,s.i0.DRAFT_COURSES,t.id);await(0,n.oe)(o)}})(),u("Course successfully added.","success"),de((e=>e+1))}}catch(x){console.error("Error adding course: ",x),u((null===x||void 0===x?void 0:x.message)||"Something went wrong","error")}finally{se(!1)}else u("Please fill all the fields.","error")},style:{backgroundColor:x?"#202020":"",color:x?"white":"black"},children:(0,K.jsx)(v.Z.Group,{controlId:"formBasicAdd",children:(0,K.jsxs)("div",{children:[(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Couese Name"}),(0,K.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"textarea",placeholder:"Enter course name",name:"name"})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},multiple:!0,id:"tags-standard",options:G,value:L,onChange:(e,a)=>{M(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},multiple:!0,id:"tags-standard",options:z,value:p,onChange:(e,a)=>{g(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]}),(0,K.jsx)(b.Z,{md:6,children:(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Duration"}),(0,K.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:["Months","Weeks","Days"],value:q,onChange:(e,a)=>{W(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Duration In Units",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})]})})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsx)(b.Z,{md:6,children:(0,K.jsx)(R.Z,{defaultTime:te||"00:00-00:00",handleSelect:(e,a)=>{const[t,l]=te.split(" - ");let o="".concat(t," - ").concat(l);null!==e&&(o="".concat(e," - ").concat(l)),null!==a&&(o="".concat(t," - ").concat(a)),le(o)}})}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,K.jsx)(B._,{dateAdapter:E.y,children:(0,K.jsx)(U.C,{components:["DatePicker"],children:(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(D.M,{sx:{width:"100%"},value:oe,onChange:e=>re(e)})]})})})]})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Level"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:$,onChange:(e,a)=>{X(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,K.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})]}),(0,K.jsx)("br",{}),(0,K.jsx)(j.Z,{children:(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"City"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:J.c,value:ee,onChange:(e,a)=>{ae(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select City",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Studio"}),(0,K.jsxs)(I.Z,{theme:he,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:t,value:_,onChange:(e,a)=>{Q(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Brief Description"}),(0,K.jsx)(F(),{theme:"snow",placeholder:"Enter Description",value:ce,onChange:ue})]})]}),(0,K.jsx)(j.Z,{children:(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,K.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,K.jsx)("hr",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsx)(b.Z,{xs:6}),(0,K.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,K.jsx)(Z.Z,{variant:"contained",style:{color:"white",backgroundColor:x?"#892cdc":"black"},type:"submit",disabled:ne,children:"Next"})})]})]})})}),ne&&(0,K.jsx)(y.Z,{}),2===ie&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(j.Z,{children:(0,K.jsx)(b.Z,{children:(0,K.jsx)(f.Z,{entityId:h,title:"Course Images",storageFolder:s.Rb.COURSEICON,maxImageCount:1})})}),(0,K.jsx)(j.Z,{style:{margin:"1rem 0"},children:(0,K.jsx)(b.Z,{style:{textAlign:"right"},children:(0,K.jsx)(Z.Z,{variant:"contained",style:{color:"white",backgroundColor:x?"#892cdc":"black"},onClick:()=>de((e=>e-1)),children:"Done"})})})]})]})};const G=function(e){let{courseId:a,instructors:t,studioId:c}=e;const u=localStorage.getItem("filterLocation")||"",h=(0,O.D)(),[m,x]=(0,o.useState)(null),[p,g]=(0,o.useState)([]),L=S.W,[M,T]=(0,o.useState)([]),z=(0,i.v9)(d.w),[G,H]=(0,o.useState)(""),[V,Y]=(0,o.useState)(""),[q,W]=(0,o.useState)(u),[_,Q]=(0,o.useState)(""),[$,X]=(0,o.useState)(P()(new Date)),[ee,ae]=(0,o.useState)(!1),[te,le]=(0,o.useState)(""),oe=t.map((e=>"".concat(e.name," - ").concat(e.id))),re=(0,k.Z)({palette:{mode:z?"dark":"light"}}),ne={backgroundColor:z?"#333333":"",color:z?"white":"black",height:"auto"},[se,ie]=(0,o.useState)(""),[de,ce]=(0,o.useState)(null),ue=e=>{e.reset(),T([]),g([]),x(null),H(""),Y(""),Q(""),X(P()(new Date)),W(""),ce(null),ie(""),le("")};return(0,o.useEffect)((()=>{if(de){const e=t.filter((e=>de.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(g(e),de&&de.danceStyles&&T(de.danceStyles),de&&de.durationUnit&&H(de.durationUnit),de&&de.level&&Y(de.level),de&&de.time&&Q(de.time),de&&de.date&&X(P()(de.date)),de&&de.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===de.StudioId));x(c[e]||null)}W((null===de||void 0===de?void 0:de.city)||""),le((null===de||void 0===de?void 0:de.description)||"")}}),[de]),(0,o.useEffect)((()=>{if(z){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[z]),(0,K.jsxs)("div",{style:{backgroundColor:z?"#202020":"",color:z?"white":"black"},children:[(0,K.jsx)("br",{}),(0,K.jsxs)(v.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if(se)if((e=>{let a=!0;return e.name.value&&e.courseFees.value&&e.duration.value&&te&&null!==M&&void 0!==M&&M.length&&null!==p&&void 0!==p&&p.length&&m&&G&&V&&_&&$&&q||(a=!1),a})(a)){try{var t,l,o,r,n;const e={courseName:a.name.value,duration:a.duration.value,price:a.courseFees.value,description:te,danceStyles:M,instructors:p?null===p||void 0===p||null===(t=p.map)||void 0===t?void 0:t.call(p,(e=>{var a,t,l,o;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(t=a.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(o=l.trim)||void 0===o?void 0:o.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:m&&(null===m||void 0===m||null===(l=m.split)||void 0===l||null===(o=l.call(m,":"))||void 0===o||null===(r=o[1])||void 0===r||null===(n=r.trim)||void 0===n?void 0:n.call(r))||null,durationUnit:G,level:V,time:_,date:$.format("YYYY-MM-DD"),city:q,youtubeViedoLink:a.youtubeViedoLink.value};ae(!0);const i=await(0,A.fP)(e,s.Ul.COURSES,se);i.ok?(ue(a),h("Open class successfully updated.","success")):h("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating course: ",i),h((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{ae(!1)}document.getElementById("updateStudioForm").reset()}else h("Please fill all the fields.","error")},children:[(0,K.jsxs)(v.Z.Group,{controlId:"formBasicUpdate",children:[(0,K.jsx)(v.Z.Label,{children:"Id"}),(0,K.jsxs)(v.Z.Control,{as:"select",name:"nameId",style:(0,l.Z)({},ne),onChange:async e=>{e.preventDefault();const a=e.target.value.split(":").pop().trim();ie(a);try{const e=await(0,n.QT)((0,n.JU)(r.db,s.Ul.COURSES,a));e.exists?ce(e.data()):ce(null)}catch(t){console.error("Error fetching course data:",t,a)}},children:[(0,K.jsx)("option",{value:"",children:"Select a course..."}),a&&a.length>0?a.map((e=>(0,K.jsx)("option",{value:e,children:e},e))):(0,K.jsx)("option",{value:"",children:"No course yet!"})]}),(0,K.jsxs)("div",{children:[(0,K.jsxs)(j.Z,{children:[(0,K.jsx)(b.Z,{md:6,children:(0,K.jsx)(f.Z,{entityId:se,title:"Course Images",storageFolder:s.Rb.COURSEICON,maxImageCount:1})}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)("br",{}),(0,K.jsx)(v.Z.Label,{children:"Course Name"}),(0,K.jsx)(v.Z.Control,{rows:1,defaultValue:de?de.courseName:"",style:(0,l.Z)({},ne),type:"textarea",placeholder:"Enter course name",name:"name"}),(0,K.jsx)("br",{}),(0,K.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),multiple:!0,id:"tags-standard",options:L,value:M,onChange:(e,a)=>{T(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:(0,l.Z)({},ne)}))})]}),(0,K.jsx)("br",{}),(0,K.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),multiple:!0,id:"tags-standard",options:oe,value:p,onChange:(e,a)=>{g(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:(0,l.Z)({},ne)}))})]})]})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsx)(b.Z,{md:6,children:(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Duration"}),(0,K.jsx)(v.Z.Control,{defaultValue:de?de.duration:"",rows:1,style:(0,l.Z)({},ne),type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),id:"tags-standard",options:["Months","Weeks","Days"],value:G,onChange:(e,a)=>{H(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Duration In Units",style:(0,l.Z)({},ne)}))})]})]})]})}),(0,K.jsx)(b.Z,{md:6,children:(0,K.jsx)(R.Z,{defaultTime:_||"00:00-00:00",handleSelect:(e,a)=>{const[t,l]=_.split(" - ");let o="".concat(t," - ").concat(l);null!==e&&(o="".concat(e," - ").concat(l)),null!==a&&(o="".concat(t," - ").concat(a)),Q(o)}})})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,K.jsx)(B._,{dateAdapter:E.y,children:(0,K.jsx)(U.C,{components:["DatePicker"],children:(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(D.M,{sx:{width:"100%"},value:$,onChange:e=>X(e)})]})})})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Level"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:V,onChange:(e,a)=>{Y(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:(0,l.Z)({},ne)}))})]})]})]}),(0,K.jsx)("br",{}),(0,K.jsx)(j.Z,{children:(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,K.jsx)(v.Z.Control,{rows:1,defaultValue:de?de.price:"",style:(0,l.Z)({},ne),type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"City"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),id:"tags-standard",options:J.c,value:q,onChange:(e,a)=>{W(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select City",style:(0,l.Z)({},ne)}))})]})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Studio"}),(0,K.jsxs)(I.Z,{theme:re,children:[(0,K.jsx)(N.ZP,{}),(0,K.jsx)(w.Z,{style:(0,l.Z)({},ne),id:"tags-standard",options:c,value:m,onChange:(e,a)=>{x(a)},renderInput:e=>(0,K.jsx)(C.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:(0,l.Z)({},ne)}))})]})]})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Brief Description"}),(0,K.jsx)(F(),{theme:"snow",placeholder:"Enter Description",value:te,onChange:le})]}),(0,K.jsxs)(b.Z,{md:6,children:[(0,K.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,K.jsx)(v.Z.Control,{rows:1,defaultValue:de?de.youtubeViedoLink:"",style:(0,l.Z)({},ne),type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,K.jsx)("hr",{}),(0,K.jsx)("hr",{}),(0,K.jsxs)(j.Z,{children:[(0,K.jsx)(b.Z,{xs:6}),(0,K.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,K.jsx)(Z.Z,{variant:"contained",style:(0,l.Z)({},ne),type:"submit",disabled:ee,children:"Update Course"})})]})]})]}),ee&&(0,K.jsx)(y.Z,{})]})]})};const H=function(){const[e,a]=(0,o.useState)([]),[t,v]=(0,o.useState)([]),[j,b]=(0,o.useState)([]),Z=(0,i.v9)(d.w),[y,f]=(0,o.useState)([]),[S,w]=(0,o.useState)(!1),[C,k]=(0,o.useState)(-1),{currentUser:I}=(0,c.a)(),[N,D]=o.useState("1");return(0,o.useEffect)((()=>{(async e=>{try{const e=(0,n.JU)(r.db,"User",I.uid),a=await(0,n.QT)(e);a.exists()&&null!=a.data()&&(w(a.data().CreatorMode),k(a.data().isPremium))}catch(a){console.log(" error")}})()}),[S]),(0,o.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const a=(0,n.hJ)(r.db,s.Ul.INSTRUCTORS),t=(0,n.IO)(a,(0,n.ar)("createdBy","==",e)),l=await(0,n.PL)(t),o=[];l.forEach((e=>{o.push({id:e.id,name:e.data().name})})),f(o)})()}),[]),(0,o.useEffect)((()=>{(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.Ul.STUDIO),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,n.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const a=e.data();return(0,l.Z)({id:e.id},a)}));a(t.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,o.useEffect)((()=>{(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.Ul.COURSES),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=(await(0,n.PL)(e)).docs.filter((e=>e.data().courseName)).map((e=>{const a=e.data();return(0,l.Z)({id:e.id},a)})).map((async e=>{const a=(0,n.JU)(r.db,s.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),t=await(0,n.QT)(a);return(0,l.Z)((0,l.Z)({},e),{},{studioDetails:t.data()})})),t=await Promise.all(a);localStorage.setItem("CourseCreated",JSON.stringify(t)),v(t),b(t.map((e=>String(e.courseName)+" :"+String(e.id))))})()}),[v]),(0,o.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("CourseCreated"))||[];v(e);const a=e.map((e=>"".concat(e.courseName," : ").concat(e.id)));b(a)}),[b]),(0,K.jsxs)("div",{children:[(0,K.jsx)("br",{}),S?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(p.Z,{sx:{width:"100%",typography:"body1"},children:(0,K.jsxs)(h.ZP,{value:N,children:[(0,K.jsx)(p.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,K.jsxs)(m.Z,{style:{color:Z?"white":"black"},onChange:(e,a)=>{D(a)},"aria-label":"lab API tabs example",children:[(0,K.jsx)(u.Z,{style:{color:Z?"white":"black"},label:"Add Course",value:"1"}),(0,K.jsx)(u.Z,{style:{color:Z?"white":"black"},label:"Update Course",value:"2"})]})}),(0,K.jsx)(x.Z,{value:"1",children:(0,K.jsx)(z,{instructors:y,studioId:e,setCourses:v})}),(0,K.jsx)(x.Z,{value:"2",children:(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(G,{instructors:y,courseId:j,studioId:e})})})]})})}):"",t.length>0&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("h3",{style:{color:Z?"white":"black"},children:"Your Courses"}),(0,K.jsx)(g.Z,{dataList:t,activateCourse:async e=>{try{const a=(0,n.JU)(r.db,s.Ul.COURSES,e);await(0,n.r7)(a,{active:!0}),v((a=>a.map((a=>a.id===e?(0,l.Z)((0,l.Z)({},a),{},{active:!0}):a))))}catch(a){console.error(a)}},deactivateCourse:async e=>{try{const a=(0,n.JU)(r.db,s.Ul.COURSES,e);await(0,n.r7)(a,{active:!1}),v((a=>a.map((a=>a.id===e?(0,l.Z)((0,l.Z)({},a),{},{active:!1}):a))))}catch(a){console.error(a)}},actionsAllowed:!0})]})]})}},11518:()=>{},10884:(e,a,t)=>{e.exports=t.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,a,t)=>{e.exports=t.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},82873:e=>{e.exports=JSON.parse('{"c":["Agra","Ahmedabad","Ajmer","Alappuzha","Allahabad","Ambattur","Ambernath","Amritsar","Anantapur","Arrah","Aurangabad","Avadi","Bahadurgarh","Bahraich","Ballia","Bengaluru","Baranagar","Barasat","Bareilly","Barasat","Bathinda","Begusarai","Belgaum","Bellary","Berhampur","Bettiah","Bharatpur","Bharuch","Bhilai","Bhilwara","Bhimavaram","Bhiwani","Bhopal","Bhubaneswar","Bhuj","Bhusawal","Bidar","Bihar Sharif","Bilaspur","Bilimora","Bongaigaon","Bongaigaon","Bulandshahr","Buxar","Chandannagar","Chandigarh","Chandausi","Chapra","Chennai","Chikmagalur","Chittorgarh","Coimbatore","Cuttack","Darbhanga","Dehradun","Deoghar","Dewas","Dhanbad","Dhule","Dimapur","Dindigul","Durg","Eluru","Erode","Etawah","Faridabad","Farrukhabad","Gandhinagar","Gangapur","Gaya","Giridih","Godhra","Gopalpur","Gorakhpur","Guntakal","Guntur","Gurugram","Guwahati","Haldia","Hapur","Haridwar","Hazaribagh","Hindupur","Hisar","Hosur","Howrah","Hubballi","Hyderabad","Ichalkaranji","Imphal","Indore","Jabalpur","Jaipur","Jalandhar","Jalna","Jalgaon","Jammu","Jamnagar","Jamshedpur","Jaunpur","Jhansi","Jodhpur","Junagadh","Kadapa","Kakinada","Kalyan","Kamarhati","Kanpur","Karimnagar","Karnal","Katihar","Khammam","Khanna","Kharagpur","Kochi","Kolhapur","Kolkata","Kollam","Korba","Kota","Kottayam","Kozhikode","Krishnanagar","Kulti","Kumbakonam","Lakhimpur","Latur","Lucknow","Ludhiana","Madhyamgram","Madurai","Maheshtala","Malegaon","Malerkotla","Mango","Mathura","Meerut","Mirzapur","Moradabad","Morvi","Mumbai","Muzaffarnagar","Muzaffarpur","Mysore","Nabadwip","Nagaur","Nagpur","Naihati","Nalgonda","Nanded","Nashik","Navi Mumbai","Nellore","New Delhi","Nizamabad","North Dumdum","Orai","Ozhukarai","Pali","Pallavaram","Panihati","Panipat","Panvel","Parbhani","Patiala","Patna","Pimpri-Chinchwad","Puducherry","Pune","Purnia","Purulia","Raebareli","Raichur","Raiganj","Rajahmundry","Rajkot","Rajpur Sonarpur","Rampur","Ranchi","Ratlam","Raurkela","Rewa","Rohtak","Rourkela","Sagar","Saharanpur","Salem","Sangli","Sangli-Miraj & Kupwad","Satara","Satna","Secunderabad","Serampore","Shahjahanpur","Shimla","Shimoga","Shivpuri","Sikar","Siliguri","Singrauli","South Dumdum","Srikakulam","Srinagar","Sultanpur","Surendranagar","Surat","Thane","Thiruvananthapuram","Thrissur","Tiruchirappalli","Tirunelveli","Tirupati","Tiruvottiyur","Tumkur","Udaipur","Udupi","Unnao","Vadodara","Vapi","Varanasi","Vasai-Virar","Vellore","Vijayawada","Visakhapatnam","Warangal","Yamunanagar"]}')},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=763.8e113abd.chunk.js.map