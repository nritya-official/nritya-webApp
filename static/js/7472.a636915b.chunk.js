"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[7472],{81018:(e,o,t)=>{t.d(o,{Z:()=>y});var l=t(72791),a=t(6429),r=t.n(a),s=t(30276),n=t(10159),i=t(59434),c=t(60717),d=t(68449),u=t(57621),h=t(13400),p=t(39504),m=t(27247),x=t(75424),g=t(83708),v=t(56510),b=t(80184);const j=(0,l.forwardRef)(((e,o)=>{let{entityId:t,storageFolder:a,title:j,maxImageCount:y=10,minImageCount:k,updateMode:f,disable:w}=e;const{setIsLoading:S}=(0,v.U)(),Z=(0,x.D)(),I=(0,l.useRef)(null),[C,N]=(0,l.useState)([]),[D,E]=(0,l.useState)([]),[O,P]=(0,l.useState)([]),L=(0,i.v9)(c.w),[U,W]=(0,l.useState)(-1),[B,T]=(0,l.useState)(-1),[A,J]=(0,l.useState)(!1);console.log("Kyc enitity id ",t,w);const R=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const t=o<0?0:o,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]};(0,l.useEffect)((()=>{t&&M(t)}),[t]),(0,l.useEffect)((()=>{if(y&&C.length>y){const e=C.slice(0,y);alert("Exceeded maxImageCount, keeping first ".concat(y," files.")),I.current.value=null,N(e)}}),[C,y]);const F=(e,o)=>{const t=e.map((e=>e.id)),l=o.map((e=>e.id));return{imagesToDelete:o.filter((e=>!t.includes(e.id))),newImages:e.filter((e=>!l.includes(e.id)))}},M=async e=>{N([]),P([]);try{const o="".concat(a,"/").concat(e);console.log(o);const t=(0,s.iH)(n.tO,o),l=await(0,s.aF)(t),r=await Promise.all(l.items.map((async e=>{const o=await(0,s.Jt)(e);return{id:e.name,filename:e.name,fileURL:o}})));E(r),N(r)}catch(o){console.error("Error fetching user images:",o)}};return(0,l.useImperativeHandle)(o,(()=>({isValid:()=>0===k||A}))),(0,b.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,b.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"card mt-5",children:(0,b.jsxs)("div",{className:"card-body",style:{backgroundColor:L?"#333333":"white"},children:[(0,b.jsxs)("div",{className:"kb-data-box",children:[(0,b.jsx)("div",{className:"kb-modal-data-title",children:(0,b.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,b.jsx)("h4",{children:j}),(0,b.jsxs)("p",{children:["Max no of image(s):",y," ",a===g.Rb.STUDIOIMAGES&&(0,b.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,b.jsxs)("div",{style:{backgroundColor:L?"#333333":"white"},children:[(0,b.jsx)("div",{className:"kb-file-upload",children:(0,b.jsx)("div",{className:"file-upload-box",children:(0,b.jsx)("input",{ref:I,type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const o=Array.from(e.target.files),t=[];o.forEach((e=>{const l=new FileReader;l.onloadend=()=>{t.push({id:r().generate(),filename:e.name,filetype:e.type,fileimage:l.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:R(e.size),file:e}),t.length===o.length&&(N((e=>[...e,...t])),P(t),I.current.value=null)},l.readAsDataURL(e)}))},multiple:!0})})}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"kb-attach-box mb-3",children:(0,b.jsx)("div",{className:"row",children:t&&C.length>0?C.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,b.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,b.jsx)(h.Z,{"aria-label":"delete",disabled:w,onClick:()=>{return o=e.id,void(window.confirm("Are you sure you want to delete this image?")&&N((e=>e.filter((e=>e.id!==o)))));var o},style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,b.jsx)(m.Z,{style:{color:"ff0000"}})})]}):(0,b.jsx)(p.Z,{children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("p",{children:"No images selected"})})})}),(0,b.jsx)("div",{className:"kb-buttons-box",children:(0,b.jsx)("button",{type:"button",className:"btn div-submit",style:{backgroundColor:L?"#892CDC":"black",color:"white"},onClick:async()=>{if(t){W(-1),T(-1);try{if(S(!0),1===y&&C.length>=k)await(0,d.ih)(a,t),await(0,d.eg)(a,O,t,T),Z("Image uploaded successfully","success"),J(!0);else{const{imagesToDelete:e,newImages:o}=F(C,D);if(k&&o.length<k)return void Z("Minimum ".concat(k," image(s) are required"),"error");e.length>0&&(await(0,d.xR)(a,e,t,W),Z("Image(s) deleted successfully","success")),o.length>0&&(await(0,d.eg)(a,o,t,T),Z("Image(s) uploaded successfully","success")),J(!0)}I.current.value=null}catch(e){J(!1),console.error("Error uploading/deleting images:",e)}finally{S(!1)}}else alert("No studio selected")},disabled:w,children:"Image Upload"})})]}),C.length>0&&(0,b.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("hr",{}),C.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,b.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),U>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:L?"#fff":"#000"},children:["Deleting images... ",U.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:U,max:"100",style:{color:L?"#fff":"#000"},children:[U.toFixed(2),"%"]})]}),B>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:L?"#fff":"#000"},children:["Uploading images... ",B.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:B,max:"100",style:{color:L?"#fff":"#000"},children:[B.toFixed(2),"%"]})]})]})})})})})}));j.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const y=j},26073:(e,o,t)=>{t.d(o,{Z:()=>c});t(72791);var l=t(89743),a=t(2677),r=t(95313),s=t(59434),n=t(60717),i=t(80184);const c=e=>{var o;let{defaultTime:t,handleSelect:c}=e;const d=t.split("-")[0].trim(),u=null===(o=t.split("-")[1])||void 0===o?void 0:o.trim(),h=(0,s.v9)(n.w),p=e=>{const o=(()=>{const e=[];let o=[],t=[];for(let l=0;l<24;l++)for(let e=0;e<60;e+=30){const a=e.toString().padStart(2,"0");if(l<12){const e=0===l?12:l;o.push("".concat(e,":").concat(a," AM"))}else{const e=12===l?12:l%12;t.push("".concat(e,":").concat(a," PM"))}}for(let l=0;l<o.length||l<t.length;l++)l<o.length&&e.push(o[l]),l<t.length&&e.push(t[l]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),o.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(a.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"Start Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>c(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(d)})]})}),(0,i.jsx)(a.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"End Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>c(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(u)})]})})]})}},76785:(e,o,t)=>{t.d(o,{Z:()=>O});t(11518);var l=t(72791),a=t(92552),r=t(84654),s=t(28658),n=t(69597),i=t(83168),c=t(88447),d=t(16029),u=t(61889),h=t(20890),p=t(94294),m=t(13400),x=t(36314),g=t(59434),v=t(83708),b=t(68449),j=t(60717),y=t(97892),k=t.n(y),f=t(12481),w=t(10159),S=t(75424),Z=t(49071),I=t(10884),C=t(93819),N=t(80184);function D(e){var o,t,a,r,s,n;let{open:i,handleClose:x,dataItem:b,activateWorkshop:y,deactivateWorkshop:D,actionsAllowed:E}=e;const O=(0,S.D)(),P=(0,g.v9)(j.w),[L,U]=(0,l.useState)(!1),[W,B]=(0,l.useState)(null),T=null===(o=JSON.parse(localStorage.getItem("userInfo")))||void 0===o?void 0:o.UserId;(0,l.useEffect)((()=>{(async()=>{try{const e=(0,f.JU)(w.db,"User",T),o=await(0,f.QT)(e);o.exists()&&B(o.data())}catch(e){console.log(" error")}})()}),[]);const A=b.UserId===T,J=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),R=null===W||void 0===W||null===(t=W.BookedWorkshops)||void 0===t||null===(a=t.includes)||void 0===a?void 0:a.call(t,null===b||void 0===b?void 0:b.id),F="".concat(window.location.host,"/nritya-webApp#/workshop/").concat(b.id);return(0,N.jsx)(c.Z,{open:i,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,N.jsxs)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:P?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:P?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,N.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,lg:8,children:(0,N.jsx)("img",{src:b.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,N.jsxs)(d.Z,{sx:{height:"100%",bgcolor:P?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,N.jsxs)(d.Z,{sx:{flex:1},children:[(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:P?"white":"black"},children:k()(b.date).format("DD/MM/YYYY")}),(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:P?"white":"black"},children:b.time}),(0,N.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:P?"white":"black"},children:b.venue})]}),(0,N.jsxs)(d.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,N.jsxs)(h.Z,{variant:"h5",sx:{alignSelf:"center",color:P?"white":"black"},children:["\u20b9",b.price]}),!E&&!A&&T&&(0,N.jsx)(p.Z,{variant:"outlined",onClick:async()=>{try{U(!0),(0,f.ET)((0,f.hJ)(w.db,v.Ul.BOOKINGS),{StudioId:b.StudioId,WorkshopId:b.id,UserId:T,bookingDate:Date.now()});const e=(0,f.JU)(w.db,"User",T),o=await(0,f.QT)(e);o.exists()&&null!=o.data()&&await(0,f.r7)(e,{BookedWorkshops:[...o.data().BookedWorkshops||[],b.id]}),B((e=>({...e,BookedWorkshops:[...(null===e||void 0===e?void 0:e.BookedWorkshops)||[],b.id]}))),O("Workshop booked","success")}catch(e){console.error(e),O((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{U(!1)}},disabled:R||L,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:P?"white":"black",color:P?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:P?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:P?"white":"black"},"&:focus":{boxShadow:"none"}},children:R?"Booked":"Book Now"})]})]}),!E&&!A&&T&&(0,N.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:P?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,N.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,N.jsxs)(d.Z,{sx:{display:"flex",columnGap:2},children:[(0,N.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:P?"white":"black"},children:[b.workshopName||"",b.danceStyles.map((e=>" | ".concat(e)))]}),(0,N.jsx)(C.Z,{shareUrl:F})]}),(0,N.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:P?"white":"black"},children:[(0,N.jsxs)("span",{children:["By ",(null===(r=b.studioDetails)||void 0===r?void 0:r.studioName)||""]}),b.studioDetails&&(null===(s=b.studioDetails)||void 0===s?void 0:s.whatsappNumber)&&(0,N.jsx)(m.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(b.studioDetails.whatsappNumber,"?text=").concat(J),children:(0,N.jsx)("img",{src:Z,alt:"Whatsapp call",style:{width:30,height:28}})}),b.studioDetails&&(null===(n=b.studioDetails)||void 0===n?void 0:n.mobileNumber)&&(0,N.jsx)(m.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(b.studioDetails.mobileNumber),children:(0,N.jsx)("img",{src:I,alt:"Phone call",style:{width:30,height:28}})})]}),(0,N.jsx)("div",{style:{color:P?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:b.description||"Workshop Description"}})]})]}),(0,N.jsxs)(d.Z,{sx:{mt:"1rem",textAlign:"right"},children:[E&&A&&(0,N.jsx)(p.Z,{onClick:()=>null!==b&&void 0!==b&&b.active?D(null===b||void 0===b?void 0:b.id):y(null===b||void 0===b?void 0:b.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==b&&void 0!==b&&b.active?"Deactivate":"Activate"}),(0,N.jsx)(p.Z,{onClick:x,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:P?"white":"black",color:P?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:P?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:P?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function E(e){var o;let{actionsAllowed:t,dataItem:c,activateWorkshop:u,deactivateWorkshop:h}=e;const p=(0,g.v9)(j.w),[m,y]=(0,l.useState)(null),[k,f]=(0,l.useState)(!1),w=c.id;(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,b.Us)(v.Rb.WORKSHOPICON,w);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[c.id]);const S={backgroundColor:p?"#444":"white",padding:"0px",color:p?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(r.Z,{variant:"solid",sx:{...S,"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"},onClick:()=>f(!0),children:[(0,N.jsxs)(a.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,N.jsx)("img",{src:m,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,N.jsx)(x.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:c&&c.danceStyles?c.danceStyles.slice(0,3).map(((e,o)=>(0,N.jsx)(n.Z,{color:o%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},o))):(0,N.jsx)(n.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,N.jsxs)(s.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,N.jsxs)(d.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:p?"white":"black",extDecoder:"one"},children:[(0,N.jsx)("span",{children:c&&c.workshopName?c.workshopName:""}),!(null!==c&&void 0!==c&&c.active)&&(0,N.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,N.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(o=c.studioDetails)&&void 0!==o&&o.studioName?c.studioDetails.studioName:""]}),(0,N.jsx)(i.ZP,{style:{marginTop:10,color:p?"white":"black"},level:"body-xs",noWrap:!0,children:c.venue?c.venue:""}),(0,N.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",children:[c.date||""," | ",c.time||""]})]})]}),(0,N.jsx)(D,{dataItem:{...c,imageUrl:m},open:k,handleClose:()=>f(!1),activateWorkshop:u,deactivateWorkshop:h,actionsAllowed:t})]})}const O=e=>{let{actionsAllowed:o,dataList:t,activateWorkshop:l,deactivateWorkshop:a}=e;return(0,N.jsx)("div",{className:"horizontal-scroll-wrapper",children:t.map(((e,t)=>(0,N.jsx)(E,{dataItem:e,activateWorkshop:l,deactivateWorkshop:a,actionsAllowed:o},e.id)))})}},77472:(e,o,t)=>{t.r(o),t.d(o,{default:()=>H});var l=t(72791),a=t(10159),r=t(12481),s=t(83708),n=t(59434),i=t(60717),c=t(61224),d=t(43896),u=t(83449),h=t(47283),p=t(82851),m=t(16029),x=t(95313),g=t(89743),v=t(2677),b=t(94294),j=t(57482),y=t(81018),k=t(51650),f=t(5712),w=t(93006),S=t(67107),Z=t(44507),I=t(4708),C=t(26128),N=t(4560),D=t(24750),E=t(71652),O=t(97892),P=t.n(O),L=t(26073),U=t(75424),W=(t(82873),t(18406)),B=t(66770),T=t.n(B),A=(t(86009),t(763)),J=t(80184);const R=function(e){let{instructors:o,studioId:t,setWorkshop:c}=e;const d=(0,U.D)(),[u,h]=(0,l.useState)(""),p=(0,n.v9)(i.w),[m,O]=(0,l.useState)([]),[B,R]=(0,l.useState)([]),F=o.map((e=>"".concat(e.name," - ").concat(e.id))),M=k.W,[H,z]=(localStorage.getItem("filterLocation"),(0,l.useState)(!1)),[Y,K]=(0,l.useState)(""),[q,_]=(0,l.useState)(null),[V,G]=(0,l.useState)(""),[Q,$]=(0,l.useState)(""),[X,ee]=(0,l.useState)(P()(new Date)),[oe,te]=(0,l.useState)(!1),[le,ae]=(0,l.useState)(""),[re,se]=(0,l.useState)(1),ne=(0,S.Z)({palette:{mode:p?"dark":"light"}}),ie=e=>{e.reset(),R([]),O([]),_(null),K(""),G(""),$(""),ee(P()(new Date)),ae("")};return(0,l.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const x=(0,r.IO)((0,r.hJ)(a.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),g=await(0,r.PL)(x);if(g.empty){var l,n,i,c,d,u,h;await(0,r.ET)((0,r.hJ)(a.db,s.i0.DRAFT_WORKSHOPS),{workshopName:(null===(l=e.workshopName)||void 0===l?void 0:l.value)||"",price:(null===(n=e.workshopFees)||void 0===n?void 0:n.value)||0,description:le,danceStyles:B,instructors:m?null===m||void 0===m||null===(i=m.map)||void 0===i?void 0:i.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:q&&(null===q||void 0===q||null===(c=q.split)||void 0===c||null===(d=c.call(q,":"))||void 0===d||null===(u=d[1])||void 0===u||null===(h=u.trim)||void 0===h?void 0:h.call(u))||null,duration:Y,level:V,time:Q,date:X.format("YYYY-MM-DD")})}else{var p;let l=[];g.forEach((e=>{l.push({id:e.id,...e.data()})}));let a=l[0];e.workshopName.value=(null===a||void 0===a?void 0:a.workshopName)||"",e.workshopFees.value=(null===a||void 0===a?void 0:a.price)||0,e.capacity.value=(null===a||void 0===a?void 0:a.capacity)||0,ae((null===a||void 0===a?void 0:a.description)||""),R(null!==a&&void 0!==a&&null!==(p=a.danceStyles)&&void 0!==p&&p.length?a.danceStyles:[]),O(o.filter((e=>null===a||void 0===a?void 0:a.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const r=t.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===a||void 0===a?void 0:a.StudioId)));r>0&&_(t[r]),K((null===a||void 0===a?void 0:a.duration)||""),G((null===a||void 0===a?void 0:a.level)||""),$((null===a||void 0===a?void 0:a.time)||""),ee(P()((null===a||void 0===a?void 0:a.date)||Date.now()))}z(!0)}catch(x){console.error(x)}}()}),[]),(0,l.useEffect)((()=>{let e=null,o=null;return H&&async function(){const t=document.getElementById("addStudioForm");try{const l=(0,r.IO)((0,r.hJ)(a.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),n=await(0,r.PL)(l);if(!n.empty){let l=[];n.forEach((e=>{l.push({id:e.id,...e.data()})}));let i=l[0];const c=(0,r.JU)(a.db,s.i0.DRAFT_WORKSHOPS,i.id);e=setInterval((async()=>{try{var e,l,a,s,n,i,d;const h={workshopName:(null===(e=t.workshopName)||void 0===e?void 0:e.value)||"",price:(null===(l=t.workshopFees)||void 0===l?void 0:l.value)||0,description:le,danceStyles:B,instructors:m?null===m||void 0===m||null===(a=m.map)||void 0===a?void 0:a.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,StudioId:q&&(null===q||void 0===q||null===(s=q.split)||void 0===s||null===(n=s.call(q,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:Y,level:V,time:Q,date:X.format("YYYY-MM-DD")};if((0,A.isEqual)(o,h))console.log("Nothing for Autosave to save");else try{await(0,r.r7)(c,h),o=h,console.log("Next AutoSave in",1e4)}catch(u){console.error(u)}}catch(u){console.error(u)}}),1e4)}}catch(l){console.error(l)}}(),()=>clearInterval(e)}),[H,B,m,le,q,Y,V,Q,X]),(0,l.useEffect)((()=>{if(p){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const o=document.getElementsByClassName("ql-editor ")[0];console.log(o),e.style.color="black"}}),[p]),(0,J.jsxs)("div",{children:[1===re&&(0,J.jsx)(x.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&null!==B&&void 0!==B&&B.length&&null!==m&&void 0!==m&&m.length&&le&&q&&Y&&V&&Q&&X||(o=!1),o})(o))try{var t,l,n,i,u;const p=JSON.parse(localStorage.getItem("userInfo")).email,x={workshopName:e.target.workshopName.value,danceStyles:B,instructors:m?null===m||void 0===m||null===(t=m.map)||void 0===t?void 0:t.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:p,StudioId:q&&(null===q||void 0===q||null===(l=q.split)||void 0===l||null===(n=l.call(q,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(u=i.trim)||void 0===u?void 0:u.call(i))||null,duration:Y,level:V,time:Q,description:le,date:X.format("YYYY-MM-DD"),price:e.target.workshopFees.value,capacity:e.target.capacity.value,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};te(!0);const g=p,v={entity_name:x.workshopName,time:x.time,date:x.date,StudioId:x.StudioId},b=await(0,W.qC)(x,s.Ul.WORKSHOPS,g,v);if(b.ok){const e=await b.json();h(e.id),c((o=>[...o,{id:e.id,...x}])),ie(o),(async()=>{const e=(0,r.IO)((0,r.hJ)(a.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=await(0,r.PL)(e);if(!o.empty){let e=[];o.forEach((o=>{e.push({id:o.id,...o.data()})}));let t=e[0];const l=(0,r.JU)(a.db,s.i0.DRAFT_WORKSHOPS,t.id);await(0,r.oe)(l)}})(),d("Workshop successfully added.","success"),se((e=>e+1))}}catch(p){console.error("Error adding workshop: ",p),d((null===p||void 0===p?void 0:p.message)||"Something went wrong","error")}finally{te(!1)}else d("Please fill all the fields.","error")},style:{backgroundColor:p?"#202020":"",color:p?"white":"black"},children:(0,J.jsx)(x.Z.Group,{controlId:"formBasicAdd",children:(0,J.jsxs)("div",{children:[(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Workshop Name"}),(0,J.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:M,value:B,onChange:(e,o)=>{R(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:F,value:m,onChange:(e,o)=>{O(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:Y,onChange:(e,o)=>{K(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(v.Z,{md:6,children:(0,J.jsx)(L.Z,{defaultTime:Q||"00:00-00:00",handleSelect:(e,o)=>{const[t,l]=Q.split(" - ");let a="".concat(t," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==o&&(a="".concat(t," - ").concat(o)),$(a)}})}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Date"}),(0,J.jsx)(E._,{dateAdapter:D.y,children:(0,J.jsx)(N.C,{components:["DatePicker"],children:(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(C.M,{sx:{width:"100%"},value:X,onChange:e=>ee(e)})]})})})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Level"}),(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:V,onChange:(e,o)=>{G(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Fees/Price"}),(0,J.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,J.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Studio"}),(0,J.jsxs)(Z.Z,{theme:ne,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:t,value:q,onChange:(e,o)=>{_(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Youtube video link"}),(0,J.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Brief Description"}),(0,J.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:le,onChange:ae})]})]}),(0,J.jsx)("hr",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(v.Z,{xs:6}),(0,J.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,J.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},type:"submit",disabled:oe,children:"Next"})})]})]})})}),oe&&(0,J.jsx)(j.Z,{}),2===re&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(g.Z,{children:(0,J.jsx)(v.Z,{children:(0,J.jsx)(y.Z,{entityId:u,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})})}),(0,J.jsx)(g.Z,{style:{margin:"1rem 0"},children:(0,J.jsx)(v.Z,{style:{textAlign:"right"},children:(0,J.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},onClick:()=>se((e=>e-1)),children:"Done"})})})]})]})};const F=function(e){let{workshopId:o,instructors:t,studioId:c}=e;localStorage.getItem("filterLocation");const d=(0,U.D)(),[u,h]=(0,l.useState)(null),[p,m]=(0,l.useState)([]),O=k.W,[B,A]=(0,l.useState)([]),R=(0,n.v9)(i.w),[F,M]=(0,l.useState)(""),[H,z]=(0,l.useState)(""),[Y,K]=(0,l.useState)(""),[q,_]=(0,l.useState)(""),[V,G]=(0,l.useState)(P()(new Date)),[Q,$]=(0,l.useState)(!1),X=t.map((e=>"".concat(e.name," - ").concat(e.id))),ee=(0,S.Z)({palette:{mode:R?"dark":"light"}}),[oe,te]=(0,l.useState)(""),[le,ae]=(0,l.useState)(null),re=e=>{e.reset(),A([]),m([]),h(null),M(""),z(""),_(""),G(P()(new Date)),ae(null),te(""),K("")};return(0,l.useEffect)((()=>{if(le){const e=t.filter((e=>le.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(m(e),le&&le.danceStyles&&A(le.danceStyles),le&&le.duration&&M(le.duration),le&&le.level&&z(le.level),le&&le.time&&_(le.time),le&&le.date&&G(P()(le.date)),le&&le.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===le.StudioId));h(c[e]||null)}K((null===le||void 0===le?void 0:le.description)||"")}}),[le]),(0,l.useEffect)((()=>{if(R){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const o=document.getElementsByClassName("ql-editor ")[0];console.log(o),e.style.color="black"}}),[R]),(0,J.jsxs)("div",{style:{backgroundColor:R?"#202020":"",color:R?"white":"black"},children:[(0,J.jsx)("br",{}),(0,J.jsxs)(x.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if(oe)if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&e.capacity.value&&Y&&null!==B&&void 0!==B&&B.length&&null!==p&&void 0!==p&&p.length&&u&&F&&H&&q&&V||(o=!1),o})(o)){try{var t,l,a,r,n;const e={workshopName:o.workshopName.value,price:o.workshopFees.value,capacity:o.capacity.value,description:Y,danceStyles:B,instructors:p?null===p||void 0===p||null===(t=p.map)||void 0===t?void 0:t.call(p,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:u&&(null===u||void 0===u||null===(l=u.split)||void 0===l||null===(a=l.call(u,":"))||void 0===a||null===(r=a[1])||void 0===r||null===(n=r.trim)||void 0===n?void 0:n.call(r))||null,duration:F,level:H,time:q,date:V.format("YYYY-MM-DD"),youtubeViedoLink:o.youtubeViedoLink.value};console.log(e),$(!0);const i=await(0,W.fP)(e,s.Ul.WORKSHOPS,oe);i.ok?(re(o),d("Workshop successfully updated.","success")):d("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating workshop: ",i),d((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{$(!1)}document.getElementById("updateStudioForm").reset()}else d("Please fill all the fields.","error")},children:[(0,J.jsxs)(x.Z.Group,{controlId:"formBasicUpdate",children:[(0,J.jsx)(x.Z.Label,{children:"Id"}),(0,J.jsxs)(x.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:R?"#333333":"",color:R?"white":"black",height:"auto"},onChange:async e=>{e.preventDefault();const o=e.target.value.split(":").pop().trim();te(o);try{const e=await(0,r.QT)((0,r.JU)(a.db,s.Ul.WORKSHOPS,o));e.exists?ae(e.data()):ae(null)}catch(t){console.error("Error fetching workshop data:",t,o)}},children:[(0,J.jsx)("option",{value:"",children:"Select a workshop..."}),o&&o.length>0?o.map((e=>(0,J.jsx)("option",{value:e,children:e},e))):(0,J.jsx)("option",{value:"",children:"No workshop yet!"})]}),(0,J.jsxs)("div",{children:[(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(v.Z,{md:6,children:(0,J.jsx)(y.Z,{entityId:oe,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)("br",{}),(0,J.jsx)(x.Z.Label,{children:"Workshop Name"}),(0,J.jsx)(x.Z.Control,{rows:1,defaultValue:le?le.workshopName:"",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"}),(0,J.jsx)("br",{}),(0,J.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},multiple:!0,id:"tags-standard",options:O,value:B,onChange:(e,o)=>{A(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"}})})]}),(0,J.jsx)("br",{}),(0,J.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},multiple:!0,id:"tags-standard",options:X,value:p,onChange:(e,o)=>{m(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"}})})]})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:F,onChange:(e,o)=>{M(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"}})})]})]}),(0,J.jsx)(v.Z,{md:6,children:(0,J.jsx)(L.Z,{defaultTime:q||"00:00-00:00",handleSelect:(e,o)=>{const[t,l]=q.split(" - ");let a="".concat(t," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==o&&(a="".concat(t," - ").concat(o)),_(a)}})})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Date"}),(0,J.jsx)(E._,{dateAdapter:D.y,children:(0,J.jsx)(N.C,{components:["DatePicker"],children:(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(C.M,{sx:{width:"100%"},value:V,onChange:e=>G(e)})]})})})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Level"}),(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:H,onChange:(e,o)=>{z(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"}})})]})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Fees/Price"}),(0,J.jsx)(x.Z.Control,{rows:1,defaultValue:le?le.price:"",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,J.jsx)(x.Z.Control,{rows:1,defaultValue:le&&void 0!==le.capacity?le.capacity:"",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Studio"}),(0,J.jsxs)(Z.Z,{theme:ee,children:[(0,J.jsx)(I.ZP,{}),(0,J.jsx)(f.Z,{style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},id:"tags-standard",options:c,value:u,onChange:(e,o)=>{h(o)},renderInput:e=>(0,J.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"}})})]})]}),(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Youtube video Link"}),(0,J.jsx)(x.Z.Control,{rows:1,defaultValue:le?le.youtubeViedoLink:"",style:{backgroundColor:R?"#333333":"",color:R?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,J.jsx)("br",{}),(0,J.jsx)(g.Z,{children:(0,J.jsxs)(v.Z,{md:6,children:[(0,J.jsx)(x.Z.Label,{children:"Brief Description"}),(0,J.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:Y,onChange:K})]})}),(0,J.jsx)("hr",{}),(0,J.jsxs)(g.Z,{children:[(0,J.jsx)(v.Z,{xs:6}),(0,J.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,J.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:R?"#892cdc":"black"},type:"submit",disabled:Q,children:"Update Workshop"})})]})]})]}),Q&&(0,J.jsx)(j.Z,{})]})]})};var M=t(76785);const H=function(){const[e,o]=(0,l.useState)([]),[t,x]=(0,l.useState)([]),[g,v]=(0,l.useState)([]),b=(0,n.v9)(i.w),[j,y]=(0,l.useState)([]),[k,f]=(0,l.useState)(!1),[w,S]=(0,l.useState)(-1),{currentUser:Z}=(0,c.a)(),[I,C]=l.useState("1");return(0,l.useEffect)((()=>{(async e=>{try{const e=(0,r.JU)(a.db,"User",Z.uid),o=await(0,r.QT)(e);o.exists()&&null!=o.data()&&(f(o.data().CreatorMode),S(o.data().isPremium))}catch(o){console.log(" error")}})()}),[k]),(0,l.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const o=(0,r.hJ)(a.db,s.Ul.INSTRUCTORS),t=(0,r.IO)(o,(0,r.ar)("createdBy","==",e)),l=await(0,r.PL)(t),n=[];l.forEach((e=>{n.push({id:e.id,name:e.data().name})})),y(n)})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,r.IO)((0,r.hJ)(a.db,s.Ul.STUDIO),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,r.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const o=e.data();return{id:e.id,...o}}));o(t.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,r.IO)((0,r.hJ)(a.db,s.Ul.WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=(await(0,r.PL)(e)).docs.filter((e=>e.data().workshopName)).map((e=>{const o=e.data();return{id:e.id,...o}})).map((async e=>{const o=(0,r.JU)(a.db,s.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),t=await(0,r.QT)(o);return{...e,studioDetails:t.data()}})),t=await Promise.all(o);localStorage.setItem("WorkshopCreated",JSON.stringify(t)),x(t),v(t.map((e=>String(e.workshopName)+" :"+String(e.id))))})()}),[x]),(0,l.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("WorkshopCreated"))||[];x(e);const o=e.map((e=>"".concat(e.workshopName," : ").concat(e.id)));v(o)}),[v]),(0,J.jsxs)("div",{children:[(0,J.jsx)("br",{}),k?(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(m.Z,{sx:{width:"100%",typography:"body1"},children:(0,J.jsxs)(u.ZP,{value:I,children:[(0,J.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,J.jsxs)(h.Z,{style:{color:b?"white":"black"},onChange:(e,o)=>{C(o)},"aria-label":"lab API tabs example",children:[(0,J.jsx)(d.Z,{style:{color:b?"white":"black"},label:"Add Workshop",value:"1"}),(0,J.jsx)(d.Z,{style:{color:b?"white":"black"},label:"Update Workshop",value:"2"})]})}),(0,J.jsx)(p.Z,{value:"1",children:(0,J.jsx)(R,{instructors:j,studioId:e,setWorkshop:x})}),(0,J.jsx)(p.Z,{value:"2",children:(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(F,{instructors:j,workshopId:g,studioId:e})})})]})})}):"",t.length>0&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("h3",{style:{color:b?"white":"black"},children:"Your Workshops"}),(0,J.jsx)(M.Z,{dataList:t,activateWorkshop:async e=>{try{const o=(0,r.JU)(a.db,s.Ul.WORKSHOPS,e);await(0,r.r7)(o,{active:!0}),x((o=>o.map((o=>o.id===e?{...o,active:!0}:o))))}catch(o){console.error(o)}},deactivateWorkshop:async e=>{try{const o=(0,r.JU)(a.db,s.Ul.WORKSHOPS,e);await(0,r.r7)(o,{active:!1}),x((o=>o.map((o=>o.id===e?{...o,active:!1}:o))))}catch(o){console.error(o)}},actionsAllowed:!0})]})]})}},18406:(e,o,t)=>{t.d(o,{C9:()=>s,P9:()=>n,fP:()=>r,ie:()=>i,qC:()=>a});var l=t(83708);async function a(e,o,t,a){const r=l.A3,s=localStorage.getItem("authToken");try{const l=await fetch(r+"crud/newEntity/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({data:e,collection_name:o,notify:t,metadata:a})});if(!l.ok)throw console.log("Error in postData:",l),new Error("HTTP error! status: ".concat(l.status));return l}catch(n){throw console.error("Error in postData:",n),n}}async function r(e,o,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const s=l.A3,n="crud/updateEntity/".concat(t),i=localStorage.getItem("authToken");try{const t=await fetch(s+n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({data:e,collection_name:o,notify:a,metadata:r})});if(!t.ok)throw console.log("Error in postData:",t),new Error("HTTP error! status: ".concat(t.status));return t}catch(c){throw console.error("Error in postData:",c),c}}const s=async e=>{const o="".concat(l.uM.CLOUD,"bookings/bookEntity/");try{const t=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,entityType:e.entityType,entityId:e.entityId,associatedStudioId:e.associatedStudioId,emailLearner:e.emailLearner,personsAllowed:e.personsAllowed,pricePerPerson:e.pricePerPerson})}),l=await t.json();return t.ok?(console.log("Booking successful:",l),l):(console.error("Booking failed:",l),l)}catch(t){return console.error("Error occurred while booking:",t),null}},n=e=>{if(console.log("MediaDisplay",e),!e)return null;const o=e.trim().match(/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([\w\-]+)/);let t=null;return o&&(t=o[1]),console.log("MediaDisplay",t),t},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[o,t,l]=e.split("-");return"".concat((e=>{const o=e%10,t=1===o&&"11"!==e?"st":2===o&&"12"!==e?"nd":3===o&&"13"!==e?"rd":"th";return"".concat(e).concat(t)})(l)," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)-1],", ").concat(o)}},11518:()=>{},10884:(e,o,t)=>{e.exports=t.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,o,t)=>{e.exports=t.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=7472.a636915b.chunk.js.map