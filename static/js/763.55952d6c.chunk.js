"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[763],{59777:(e,a,l)=>{l.d(a,{Z:()=>D});l(11518);var t=l(72791),r=l(92552),o=l(84654),i=l(28658),n=l(69597),s=l(83168),d=l(88447),c=l(697),u=l(61889),h=l(20890),m=l(94294),x=l(13400),p=l(36314),v=l(59434),g=l(83708),b=l(68449),j=l(60717),y=l(97892),S=l.n(y),w=l(12481),f=l(10159),k=l(75424),Z=l(49071),C=l(10884),I=l(80184);function N(e){var a,l,r,o,i,n;let{open:s,handleClose:p,dataItem:b,activateCourse:y,deactivateCourse:N,actionsAllowed:U}=e;const D=(0,k.D)(),E=(0,v.v9)(j.w),[L,B]=(0,t.useState)(!1),[R,O]=(0,t.useState)(null),P=null===(a=JSON.parse(localStorage.getItem("userInfo")))||void 0===a?void 0:a.UserId;(0,t.useEffect)((()=>{(async()=>{try{const e=(0,w.JU)(f.db,"User",P),a=await(0,w.QT)(e);a.exists()&&O(a.data())}catch(e){console.log(" error")}})()}),[]);const J=b.UserId===P,A=null===R||void 0===R||null===(l=R.BookedCourses)||void 0===l||null===(r=l.includes)||void 0===r?void 0:r.call(l,null===b||void 0===b?void 0:b.id),F=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested");return(0,I.jsx)(d.Z,{open:s,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,I.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:E?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:E?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,I.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,I.jsx)(u.ZP,{item:!0,xs:12,lg:8,children:(0,I.jsx)("img",{src:b.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,I.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,I.jsxs)(c.Z,{sx:{height:"100%",bgcolor:E?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,I.jsxs)(c.Z,{sx:{flex:1},children:[(0,I.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:E?"white":"black"},children:S()(b.date).format("LL")}),(0,I.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:E?"white":"black"},children:b.time}),(0,I.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:E?"white":"black"},children:b.venue}),(0,I.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:E?"white":"black"},children:[b.duration," ",b.durationUnit]})]}),(0,I.jsxs)(c.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,I.jsxs)(h.Z,{variant:"h5",sx:{alignSelf:"center",color:E?"white":"black"},children:["\u20b9",b.price]}),!U&&!J&&P&&(0,I.jsx)(m.Z,{variant:"outlined",onClick:async()=>{try{B(!0),(0,w.ET)((0,w.hJ)(f.db,g.Ul.BOOKINGS),{StudioId:b.StudioId,CourseId:b.id,UserId:P,bookingDate:Date.now()});const e=(0,w.JU)(f.db,"User",P),a=await(0,w.QT)(e);a.exists()&&null!=a.data()&&await(0,w.r7)(e,{BookedCourses:[...a.data().BookedCourses||[],b.id]}),O((e=>({...e,BookedCourses:[...(null===e||void 0===e?void 0:e.BookedCourses)||[],b.id]}))),D("Course booked","success")}catch(e){console.error(e),D((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{B(!1)}},disabled:A||L,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:E?"white":"black",color:E?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:E?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:E?"white":"black"},"&:focus":{boxShadow:"none"}},children:A?"Booked":"Book Now"})]})]}),!U&&!J&&P&&(0,I.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:E?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,I.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,I.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:E?"white":"black"},children:[b.name||"",b.danceStyles.map((e=>` | ${e}`))]}),(0,I.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:E?"white":"black"},children:[(0,I.jsxs)("span",{children:["By ",(null===(o=b.studioDetails)||void 0===o?void 0:o.studioName)||""]}),b.studioDetails&&(null===(i=b.studioDetails)||void 0===i?void 0:i.whatsappNumber)&&(0,I.jsx)(x.Z,{color:"success",size:"small",target:"_blank",href:`https://wa.me/91${b.studioDetails.whatsappNumber}?text=${F}`,children:(0,I.jsx)("img",{src:Z,alt:"Whatsapp call",style:{width:30,height:28}})}),b.studioDetails&&(null===(n=b.studioDetails)||void 0===n?void 0:n.mobileNumber)&&(0,I.jsx)(x.Z,{color:"primary",size:"small",target:"_blank",href:`tel:${b.studioDetails.mobileNumber}`,children:(0,I.jsx)("img",{src:C,alt:"Phone call",style:{width:30,height:28}})})]}),(0,I.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:2,color:E?"white":"black"},children:b.description||""})]})]}),(0,I.jsxs)(c.Z,{sx:{mt:"1rem",textAlign:"right"},children:[U&&J&&(0,I.jsx)(m.Z,{onClick:()=>null!==b&&void 0!==b&&b.active?N(null===b||void 0===b?void 0:b.id):y(null===b||void 0===b?void 0:b.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==b&&void 0!==b&&b.active?"Deactivate":"Activate"}),(0,I.jsx)(m.Z,{onClick:p,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:E?"white":"black",color:E?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:E?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:E?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function U(e){var a;let{dataItem:l,activateCourse:d,deactivateCourse:u,actionsAllowed:h}=e;const m=(0,v.v9)(j.w),[x,y]=(0,t.useState)(null),[S,w]=(0,t.useState)(!1),f=l.id;(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,b.Us)(g.Rb.COURSEICON,f);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[l.id]);const k={backgroundColor:m?"#444":"white",padding:"0px",color:m?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(o.Z,{variant:"solid",sx:{...k,"&:hover":{transform:"scale(1.01)",cursor:"pointer"}},onClick:()=>w(!0),children:[(0,I.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,I.jsx)("img",{src:x,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,I.jsx)(p.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:l&&l.danceStyles?l.danceStyles.slice(0,3).map(((e,a)=>(0,I.jsx)(n.Z,{color:a%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},a))):(0,I.jsx)(n.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,I.jsxs)(i.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,I.jsxs)(c.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:m?"white":"black",extDecoder:"one"},children:[(0,I.jsx)("span",{children:l&&l.name?l.name:""}),!(null!==l&&void 0!==l&&l.active)&&(0,I.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,I.jsxs)(s.ZP,{style:{color:m?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(a=l.studioDetails)&&void 0!==a&&a.studioName?l.studioDetails.studioName:""]}),(0,I.jsx)(s.ZP,{style:{marginTop:10,color:m?"white":"black"},level:"body-xs",noWrap:!0,children:l.venue?l.venue:""}),(0,I.jsxs)(s.ZP,{style:{color:m?"white":"black"},level:"body-xs",children:[l.date||""," | ",l.time||""]})]})]}),(0,I.jsx)(N,{dataItem:{...l,imageUrl:x},open:S,handleClose:()=>w(!1),activateCourse:d,deactivateCourse:u,actionsAllowed:h})]})}const D=e=>{let{dataList:a,activateCourse:l,deactivateCourse:t,actionsAllowed:r}=e;return(0,I.jsx)("div",{className:"horizontal-scroll-wrapper",children:a.map(((e,a)=>(0,I.jsx)(U,{dataItem:e,activateCourse:l,deactivateCourse:t,actionsAllowed:r},e.id)))})}},81018:(e,a,l)=>{l.d(a,{Z:()=>j});var t=l(72791),r=l(6429),o=l.n(r),i=l(30276),n=l(10159),s=l(59434),d=l(60717),c=l(68449),u=l(57621),h=l(13400),m=l(39504),x=l(27247),p=l(75424),v=l(83708),g=l(80184);const b=e=>{let{entityId:a,storageFolder:l,title:r,maxImageCount:b=10,updateMode:j,disable:y}=e;(0,p.D)();const[S,w]=(0,t.useState)([]),[f,k]=(0,t.useState)([]),[Z,C]=(0,t.useState)([]),[I,N]=(0,t.useState)([]),U=(0,s.v9)(d.w),[D,E]=(0,t.useState)(-1),[L,B]=(0,t.useState)(-1);console.log("Kyc enitity id ",a,y);const R=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const l=a<0?0:a,t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]};(0,t.useEffect)((()=>{a&&P(a)}),[a]),(0,t.useEffect)((()=>{if(b&&S.length>b){const e=S.slice(0,b);alert(`Exceeded maxImageCount, keeping first ${b} files.`),w(e)}}),[S,b]);const O=(e,a)=>{const l=e.map((e=>e.id)),t=a.map((e=>e.id));return{imagesToDelete:a.filter((e=>!l.includes(e.id))),newImages:e.filter((e=>!t.includes(e.id)))}},P=async e=>{w([]),C([]),N([]);try{const a=`${l}/${e}`;console.log(a);const t=(0,i.iH)(n.tO,a),r=await(0,i.aF)(t),o=await Promise.all(r.items.map((async e=>{const a=await(0,i.Jt)(e);return{id:e.name,filename:e.name,fileURL:a}})));k(o),w(o)}catch(a){console.error("Error fetching user images:",a)}};return(0,g.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,g.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,g.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,g.jsx)("div",{className:"card mt-5",children:(0,g.jsxs)("div",{className:"card-body",style:{backgroundColor:U?"#333333":"white"},children:[(0,g.jsxs)("div",{className:"kb-data-box",children:[(0,g.jsx)("div",{className:"kb-modal-data-title",children:(0,g.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,g.jsx)("h4",{children:r}),(0,g.jsxs)("p",{children:["Max no of image(s):",b," ",l===v.Rb.STUDIOIMAGES&&(0,g.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,g.jsxs)("form",{style:{backgroundColor:U?"#333333":"white"},children:[(0,g.jsx)("div",{className:"kb-file-upload",children:(0,g.jsx)("div",{className:"file-upload-box",children:(0,g.jsx)("input",{type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const a=Array.from(e.target.files),l=[];a.forEach((e=>{const t=new FileReader;t.onloadend=()=>{l.push({id:o().generate(),filename:e.name,filetype:e.type,fileimage:t.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:R(e.size),file:e}),l.length===a.length&&(w((e=>[...e,...l])),C(l))},t.readAsDataURL(e)}))},multiple:!0})})}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"kb-attach-box mb-3",children:(0,g.jsx)("div",{className:"row",children:a&&S.length>0?S.map((e=>(0,g.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,g.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,g.jsx)(h.Z,{"aria-label":"delete",disabled:y,onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this image?")){const a=S.find((a=>a.id===e));N((e=>[...e,a])),w((a=>a.filter((a=>a.id!==e))))}})(e.id),style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,g.jsx)(x.Z,{style:{color:"ff0000"}})})]}):(0,g.jsx)(m.Z,{children:(0,g.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("p",{children:"No images selected"})})})}),(0,g.jsx)("div",{className:"kb-buttons-box",children:(0,g.jsx)("button",{type:"button",className:"btn form-submit",style:{backgroundColor:U?"#892CDC":"black",color:"white"},onClick:async()=>{if(a)try{if(1===b)await(0,c.ih)(l,a),await(0,c.eg)(l,Z,a);else{const{imagesToDelete:e,newImages:t}=O(S,f);e.length>0&&await(0,c.xR)(l,e,a,E),t.length>0&&await(0,c.eg)(l,t,a,B)}}catch(e){console.error("Error uploading/deleting images:",e)}else alert("No studio selected")},disabled:y,children:"Image Upload"})})]}),S.length>0&&(0,g.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("hr",{}),S.map((e=>(0,g.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,g.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,g.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,g.jsx)("div",{className:"card-body",children:(0,g.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),D>=0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{style:{color:U?"#fff":"#000"},children:["Deleting images... ",D.toFixed(2),"%"]}),(0,g.jsxs)("progress",{value:D,max:"100",style:{color:U?"#fff":"#000"},children:[D.toFixed(2),"%"]})]}),L>=0&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{style:{color:U?"#fff":"#000"},children:["Uploading images... ",L.toFixed(2),"%"]}),(0,g.jsxs)("progress",{value:L,max:"100",style:{color:U?"#fff":"#000"},children:[L.toFixed(2),"%"]})]})]})})})})})};b.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const j=b},26073:(e,a,l)=>{l.d(a,{Z:()=>d});l(72791);var t=l(89743),r=l(2677),o=l(13855),i=l(59434),n=l(60717),s=l(80184);const d=e=>{var a;let{defaultTime:l,handleSelect:d}=e;const c=l.split("-")[0].trim(),u=null===(a=l.split("-")[1])||void 0===a?void 0:a.trim(),h=(0,i.v9)(n.w),m=e=>{const a=(()=>{const e=[];let a=[],l=[];for(let t=0;t<24;t++)for(let e=0;e<60;e+=30){const r=t.toString().padStart(2,"0"),o=e.toString().padStart(2,"0"),i=`${r}:${o}`;if(t<12)a.push(`${i} AM`);else{const e=(t-12).toString().padStart(2,"0");l.push(`${e}:${o} PM`)}}for(let t=0;t<a.length||t<l.length;t++)t<a.length&&e.push(a[t]),t<l.length&&e.push(l[t]);return e})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:e,children:e}),a.map((e=>(0,s.jsx)("option",{value:e,children:e},e)))]})};return(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(r.Z,{children:(0,s.jsxs)(o.Z.Group,{children:[(0,s.jsx)(o.Z.Label,{children:"Start Time"}),(0,s.jsx)(o.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black"},children:m(c)})]})}),(0,s.jsx)(r.Z,{children:(0,s.jsxs)(o.Z.Group,{children:[(0,s.jsx)(o.Z.Label,{children:"End Time"}),(0,s.jsx)(o.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black"},children:m(u)})]})})]})}},40763:(e,a,l)=>{l.r(a),l.d(a,{default:()=>T});var t=l(72791),r=l(10159),o=l(12481),i=l(83708),n=l(59434),s=l(60717),d=l(61224),c=l(43896),u=l(83449),h=l(47283),m=l(82851),x=l(697),p=l(59777),v=l(13855),g=l(89743),b=l(2677),j=l(94294),y=l(57482),S=l(81018),w=l(51650),f=l(49644),k=l(76989),Z=l(67107),C=l(44507),I=l(4708),N=l(63237),U=l(4560),D=l(24750),E=l(71652),L=l(97892),B=l.n(L),R=l(26073),O=l(75424),P=l(82873),J=l(18406),A=l(80184);const F=function(e){let{instructors:a,studioId:l,setCourses:d}=e;const c=(0,O.D)(),[u,h]=(0,t.useState)(""),m=(0,n.v9)(s.w),[x,p]=(0,t.useState)([]),[L,F]=(0,t.useState)([]),M=a.map((e=>`${e.name} - ${e.id}`)),T=w.W,V=localStorage.getItem("filterLocation")||"",[$,z]=(0,t.useState)(!1),[K,G]=(0,t.useState)(""),[Y,H]=(0,t.useState)(null),[W,_]=(0,t.useState)(""),[q,Q]=(0,t.useState)(V),[X,ee]=(0,t.useState)(""),[ae,le]=(0,t.useState)(B()(new Date)),[te,re]=(0,t.useState)(!1),[oe,ie]=(0,t.useState)(1),ne=(0,Z.Z)({palette:{mode:m?"dark":"light"}}),se=e=>{e.reset(),F([]),p([]),H(null),G(""),_(""),ee(""),le(B()(Date.now())),Q("")};return(0,t.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const j=(0,o.IO)((0,o.hJ)(r.db,i.i0.DRAFT_COURSES),(0,o.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),y=await(0,o.PL)(j);if(y.empty){var t,n,s,d,c,u,h,m,v,g;await(0,o.ET)((0,o.hJ)(r.db,i.i0.DRAFT_COURSES),{name:(null===(t=e.name)||void 0===t?void 0:t.value)||"",duration:(null===(n=e.duration)||void 0===n?void 0:n.value)||"",price:(null===(s=e.workshopFees)||void 0===s?void 0:s.value)||"",venue:(null===(d=e.workshopVenue)||void 0===d?void 0:d.value)||"",description:(null===(c=e.description)||void 0===c?void 0:c.value)||"",danceStyles:L,instructors:x?null===x||void 0===x||null===(u=x.map)||void 0===u?void 0:u.call(x,(e=>{var a,l,t,r;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:Y&&(null===Y||void 0===Y||null===(h=Y.split)||void 0===h||null===(m=h.call(Y,":"))||void 0===m||null===(v=m[1])||void 0===v||null===(g=v.trim)||void 0===g?void 0:g.call(v))||null,durationUnit:K,level:W,time:X,date:ae.format("YYYY-MM-DD"),city:q})}else{var b;let t=[];y.forEach((e=>{t.push({id:e.id,...e.data()})}));let r=t[0];e.name.value=r.name,e.workshopFees.value=r.price,e.workshopVenue.value=r.venue,e.description.value=r.description,e.duration.value=r.duration,F(null!==r&&void 0!==r&&null!==(b=r.danceStyles)&&void 0!==b&&b.length?r.danceStyles:[]),p(a.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`)));const o=l.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));o>0&&H(l[o]),G(r.durationUnit),_((null===r||void 0===r?void 0:r.level)||""),ee((null===r||void 0===r?void 0:r.time)||""),le(B()((null===r||void 0===r?void 0:r.date)||Date.now())),Q((null===r||void 0===r?void 0:r.city)||"")}z(!0)}catch(j){console.error(j)}}()}),[]),(0,t.useEffect)((()=>{let e=null;return $&&async function(){const a=document.getElementById("addStudioForm");try{const l=(0,o.IO)((0,o.hJ)(r.db,i.i0.DRAFT_COURSES),(0,o.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=await(0,o.PL)(l);if(!t.empty){let l=[];t.forEach((e=>{l.push({id:e.id,...e.data()})}));let n=l[0];const s=(0,o.JU)(r.db,i.i0.DRAFT_COURSES,n.id);e=setInterval((async()=>{try{var e,l,t,r,i,n,d,c,u,h;await(0,o.r7)(s,{name:(null===(e=a.name)||void 0===e?void 0:e.value)||"",price:(null===(l=a.workshopFees)||void 0===l?void 0:l.value)||"",venue:(null===(t=a.workshopVenue)||void 0===t?void 0:t.value)||"",description:(null===(r=a.description)||void 0===r?void 0:r.value)||"",danceStyles:L,instructors:x?null===x||void 0===x||null===(i=x.map)||void 0===i?void 0:i.call(x,(e=>{var a,l,t,r;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,StudioId:Y&&(null===Y||void 0===Y||null===(n=Y.split)||void 0===n||null===(d=n.call(Y,":"))||void 0===d||null===(c=d[1])||void 0===c||null===(u=c.trim)||void 0===u?void 0:u.call(c))||null,duration:(null===(h=a.duration)||void 0===h?void 0:h.value)||"",durationUnit:K,level:W,time:X,date:ae.format("YYYY-MM-DD"),city:q})}catch(m){console.error(m)}}),1e4)}}catch(l){console.error(l)}}(),()=>clearInterval(e)}),[$,L,x,Y,K,W,X,ae,q]),(0,A.jsxs)("div",{children:[1===oe&&(0,A.jsx)(v.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if((e=>{let a=!0;return e.name.value&&e.duration.value&&e.workshopFees.value&&e.workshopVenue.value&&e.description.value&&null!==L&&void 0!==L&&L.length&&null!==x&&void 0!==x&&x.length&&Y&&K&&W&&X&&ae&&q||(a=!1),a})(a))try{var l,t,n,s,u;const m=JSON.parse(localStorage.getItem("userInfo")).email,p={courseName:e.target.name.value,danceStyles:L,instructors:x?null===x||void 0===x||null===(l=x.map)||void 0===l?void 0:l.call(x,(e=>{var a,l,t,r;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:m,StudioId:Y&&(null===Y||void 0===Y||null===(t=Y.split)||void 0===t||null===(n=t.call(Y,":"))||void 0===n||null===(s=n[1])||void 0===s||null===(u=s.trim)||void 0===u?void 0:u.call(s))||null,duration:e.target.duration.value,durationUnit:K,level:W,time:X,date:ae.format("YYYY-MM-DD"),price:e.target.workshopFees.value,venue:e.target.workshopVenue.value,description:e.target.description.value,city:q,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};re(!0);const v=m,g={entity_name:p.courseName,time:p.time,date:p.date,StudioId:p.StudioId},b=await(0,J.qC)(p,i.Ul.COURSES,v,g);if(b.ok){const e=await b.json();h(e.id),d((a=>[...a,{id:e.id,...p}])),se(a),(async()=>{const e=(0,o.IO)((0,o.hJ)(r.db,i.i0.DRAFT_COURSES),(0,o.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=await(0,o.PL)(e);if(!a.empty){let e=[];a.forEach((a=>{e.push({id:a.id,...a.data()})}));let l=e[0];const t=(0,o.JU)(r.db,i.i0.DRAFT_COURSES,l.id);await(0,o.oe)(t)}})(),c("Course successfully added.","success"),ie((e=>e+1))}}catch(m){console.error("Error adding course: ",m),c((null===m||void 0===m?void 0:m.message)||"Something went wrong","error")}finally{re(!1)}else c("Please fill all the fields.","error")},style:{backgroundColor:m?"#202020":"",color:m?"white":"black"},children:(0,A.jsx)(v.Z.Group,{controlId:"formBasicAdd",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Couese Name"}),(0,A.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"textarea",placeholder:"Enter course name",name:"name"})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:T,value:L,onChange:(e,a)=>{F(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:M,value:x,onChange:(e,a)=>{p(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,A.jsx)(b.Z,{md:6,children:(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Duration"}),(0,A.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:["Months","Weeks","Days"],value:K,onChange:(e,a)=>{G(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Duration In Units",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})]})})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(b.Z,{md:6,children:(0,A.jsx)(R.Z,{defaultTime:X||"00:00-00:00",handleSelect:(e,a)=>{const[l,t]=X.split(" - ");let r=`${l} - ${t}`;null!==e&&(r=`${e} - ${t}`),null!==a&&(r=`${l} - ${a}`),ee(r)}})}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,A.jsx)(E._,{dateAdapter:D.y,children:(0,A.jsx)(U.C,{components:["DatePicker"],children:(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(N.M,{sx:{width:"100%"},value:ae,onChange:e=>le(e)})]})})})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Level"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:[i.zq.ALL,i.zq.BEGINNERS,i.zq.INTERMEDIATE,i.zq.ADVANCED],value:W,onChange:(e,a)=>{_(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,A.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Venue"}),(0,A.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"text",placeholder:"Enter Venue",name:"workshopVenue"})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"City"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:P.c,value:q,onChange:(e,a)=>{Q(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Studio"}),(0,A.jsxs)(C.Z,{theme:ne,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:l,value:Y,onChange:(e,a)=>{H(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Brief Description"}),(0,A.jsx)(v.Z.Control,{rows:3,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},as:"textarea",placeholder:"Enter Description",name:"description"})]})]}),(0,A.jsx)(g.Z,{children:(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,A.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,A.jsx)("hr",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(b.Z,{xs:6}),(0,A.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,A.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},type:"submit",disabled:te,children:"Next"})})]})]})})}),te&&(0,A.jsx)(y.Z,{}),2===oe&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(g.Z,{children:(0,A.jsx)(b.Z,{children:(0,A.jsx)(S.Z,{entityId:u,title:"Course Images",storageFolder:i.Rb.COURSEICON,maxImageCount:1})})}),(0,A.jsx)(g.Z,{style:{margin:"1rem 0"},children:(0,A.jsx)(b.Z,{style:{textAlign:"right"},children:(0,A.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},onClick:()=>ie((e=>e-1)),children:"Done"})})})]})]})};const M=function(e){let{courseId:a,instructors:l,studioId:d}=e;const c=localStorage.getItem("filterLocation")||"",u=(0,O.D)(),[h,m]=(0,t.useState)(null),[x,p]=(0,t.useState)([]),y=w.W,[L,J]=(0,t.useState)([]),F=(0,n.v9)(s.w),[M,T]=(0,t.useState)(""),[V,$]=(0,t.useState)(""),[z,K]=(0,t.useState)(c),[G,Y]=(0,t.useState)(""),[H,W]=(0,t.useState)(B()(new Date)),[_,q]=(0,t.useState)(!1),Q=l.map((e=>`${e.name} - ${e.id}`)),X=(0,Z.Z)({palette:{mode:F?"dark":"light"}}),[ee,ae]=(0,t.useState)(""),[le,te]=(0,t.useState)(null),re=e=>{e.reset(),J([]),p([]),m(null),T(""),$(""),Y(""),W(B()(new Date)),K(""),te(null),ae("")};return(0,t.useEffect)((()=>{if(le){const e=l.filter((e=>le.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`));if(p(e),le&&le.danceStyles&&J(le.danceStyles),le&&le.durationUnit&&T(le.durationUnit),le&&le.level&&$(le.level),le&&le.time&&Y(le.time),le&&le.date&&W(B()(le.date)),le&&le.StudioId){const e=d.map((e=>e.split(":")[1].trim())).findIndex((e=>e===le.StudioId));m(d[e]||null)}K((null===le||void 0===le?void 0:le.city)||"")}}),[le]),(0,A.jsxs)("div",{style:{backgroundColor:F?"#202020":"",color:F?"white":"black"},children:[(0,A.jsx)("br",{}),(0,A.jsx)(v.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if(ee)if((e=>{let a=!0;return e.name.value&&e.workshopVenue.value&&e.workshopFees.value&&e.duration.value&&e.description.value&&null!==L&&void 0!==L&&L.length&&null!==x&&void 0!==x&&x.length&&h&&M&&V&&G&&H&&z||(a=!1),a})(a)){try{var l,t,n,s,d;const e={courseName:a.name.value,duration:a.duration.value,price:a.workshopFees.value,venue:a.workshopVenue.value,description:a.description.value,danceStyles:L,instructors:x?null===x||void 0===x||null===(l=x.map)||void 0===l?void 0:l.call(x,(e=>{var a,l,t,r;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(t=h.split)||void 0===t||null===(n=t.call(h,":"))||void 0===n||null===(s=n[1])||void 0===s||null===(d=s.trim)||void 0===d?void 0:d.call(s))||null,durationUnit:M,level:V,time:G,date:H.format("YYYY-MM-DD"),city:z,youtubeViedoLink:a.youtubeViedoLink.value};q(!0);const c=(0,o.JU)(r.db,i.Ul.COURSES,ee);await(0,o.r7)(c,e),re(a),u("Open class successfully updated.","success")}catch(c){console.error("Error updating workshop: ",c),u((null===c||void 0===c?void 0:c.message)||"Something went wrong","error")}finally{q(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:(0,A.jsxs)(v.Z.Group,{controlId:"formBasicUpdate",children:[(0,A.jsx)(v.Z.Label,{children:"Id"}),(0,A.jsxs)(v.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},onChange:async e=>{e.preventDefault();const a=e.target.value.split(":").pop().trim();ae(a);try{const e=await(0,o.QT)((0,o.JU)(r.db,i.Ul.COURSES,a));e.exists?te(e.data()):te(null)}catch(l){console.error("Error fetching workshop data:",l,a)}},children:[(0,A.jsx)("option",{value:"",children:"Select a course..."}),a&&a.length>0?a.map((e=>(0,A.jsx)("option",{value:e,children:e},e))):(0,A.jsx)("option",{value:"",children:"No course yet!"})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(b.Z,{md:6,children:(0,A.jsx)(S.Z,{entityId:ee,title:"Course Images",storageFolder:i.Rb.COURSEICON,maxImageCount:1})}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)("br",{}),(0,A.jsx)(v.Z.Label,{children:"Course Name"}),(0,A.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.name:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"textarea",placeholder:"Enter course name",name:"name"}),(0,A.jsx)("br",{}),(0,A.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:y,value:L,onChange:(e,a)=>{J(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]}),(0,A.jsx)("br",{}),(0,A.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:Q,value:x,onChange:(e,a)=>{p(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(b.Z,{md:6,children:(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Duration"}),(0,A.jsx)(v.Z.Control,{defaultValue:le?le.duration:"",rows:1,style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:["Months","Weeks","Days"],value:M,onChange:(e,a)=>{T(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Duration In Units",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]})}),(0,A.jsx)(b.Z,{md:6,children:(0,A.jsx)(R.Z,{defaultTime:G||"00:00-00:00",handleSelect:(e,a)=>{const[l,t]=G.split(" - ");let r=`${l} - ${t}`;null!==e&&(r=`${e} - ${t}`),null!==a&&(r=`${l} - ${a}`),Y(r)}})})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,A.jsx)(E._,{dateAdapter:D.y,children:(0,A.jsx)(U.C,{components:["DatePicker"],children:(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(N.M,{sx:{width:"100%"},value:H,onChange:e=>W(e)})]})})})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Level"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:[i.zq.ALL,i.zq.BEGINNERS,i.zq.INTERMEDIATE,i.zq.ADVANCED],value:V,onChange:(e,a)=>{$(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,A.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.price:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Venue"}),(0,A.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.venue:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"text",placeholder:"Enter Venue",name:"workshopVenue"})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"City"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:P.c,value:z,onChange:(e,a)=>{K(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]}),(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Studio"}),(0,A.jsxs)(C.Z,{theme:X,children:[(0,A.jsx)(I.ZP,{}),(0,A.jsx)(f.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:d,value:h,onChange:(e,a)=>{m(a)},renderInput:e=>(0,A.jsx)(k.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,A.jsx)("br",{}),(0,A.jsx)(g.Z,{children:(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Brief Description"}),(0,A.jsx)(v.Z.Control,{rows:3,defaultValue:le?le.description:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},as:"textarea",placeholder:"Enter Description",name:"description"})]})}),(0,A.jsx)(g.Z,{children:(0,A.jsxs)(b.Z,{md:6,children:[(0,A.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,A.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.youtubeViedoLink:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,A.jsx)("hr",{}),(0,A.jsx)("hr",{}),(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(b.Z,{xs:6}),(0,A.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,A.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:F?"#892cdc":"black"},type:"submit",disabled:_,children:"Update Course"})})]})]})]})})]})};const T=function(){const[e,a]=(0,t.useState)([]),[l,v]=(0,t.useState)([]),[g,b]=(0,t.useState)([]),j=(0,n.v9)(s.w),[y,S]=(0,t.useState)([]),[w,f]=(0,t.useState)(!1),[k,Z]=(0,t.useState)(-1),{currentUser:C}=(0,d.a)(),[I,N]=t.useState("1");return(0,t.useEffect)((()=>{(async e=>{try{const e=(0,o.JU)(r.db,"User",C.uid),a=await(0,o.QT)(e);a.exists()&&null!=a.data()&&(f(a.data().CreatorMode),Z(a.data().isPremium))}catch(a){console.log(" error")}})()}),[w]),(0,t.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const a=(0,o.hJ)(r.db,i.Ul.INSTRUCTORS),l=(0,o.IO)(a,(0,o.ar)("createdBy","==",e)),t=await(0,o.PL)(l),n=[];t.forEach((e=>{n.push({id:e.id,name:e.data().name})})),S(n)})()}),[]),(0,t.useEffect)((()=>{(async()=>{const e=(0,o.IO)((0,o.hJ)(r.db,i.Ul.STUDIO),(0,o.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),l=(await(0,o.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const a=e.data();return{id:e.id,...a}}));a(l.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,t.useEffect)((()=>{(async()=>{const e=(0,o.IO)((0,o.hJ)(r.db,i.Ul.COURSES),(0,o.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=(await(0,o.PL)(e)).docs.filter((e=>e.data().name)).map((e=>{const a=e.data();return{id:e.id,...a}})).map((async e=>{const a=(0,o.JU)(r.db,i.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),l=await(0,o.QT)(a);return{...e,studioDetails:l.data()}})),l=await Promise.all(a);localStorage.setItem("CourseCreated",JSON.stringify(l)),v(l),b(l.map((e=>String(e.name)+" :"+String(e.id))))})()}),[v]),(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("CourseCreated"))||[];v(e);const a=e.map((e=>`${e.name} : ${e.id}`));b(a)}),[b]),(0,A.jsxs)("div",{children:[(0,A.jsx)("br",{}),w?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(x.Z,{sx:{width:"100%",typography:"body1"},children:(0,A.jsxs)(u.ZP,{value:I,children:[(0,A.jsx)(x.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,A.jsxs)(h.Z,{style:{color:j?"white":"black"},onChange:(e,a)=>{N(a)},"aria-label":"lab API tabs example",children:[(0,A.jsx)(c.Z,{style:{color:j?"white":"black"},label:"Add Course",value:"1"}),(0,A.jsx)(c.Z,{style:{color:j?"white":"black"},label:"Update Course",value:"2"})]})}),(0,A.jsx)(m.Z,{value:"1",children:(0,A.jsx)(F,{instructors:y,studioId:e,setCourses:v})}),(0,A.jsx)(m.Z,{value:"2",children:(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(M,{instructors:y,workshopId:g,studioId:e})})})]})})}):"",l.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h3",{style:{color:j?"white":"black"},children:"Your Courses"}),(0,A.jsx)(p.Z,{dataList:l,activateCourse:async e=>{try{const a=(0,o.JU)(r.db,i.Ul.COURSES,e);await(0,o.r7)(a,{active:!0}),v((a=>a.map((a=>a.id===e?{...a,active:!0}:a))))}catch(a){console.error(a)}},deactivateCourse:async e=>{try{const a=(0,o.JU)(r.db,i.Ul.COURSES,e);await(0,o.r7)(a,{active:!1}),v((a=>a.map((a=>a.id===e?{...a,active:!1}:a))))}catch(a){console.error(a)}},actionsAllowed:!0})]})]})}},11518:()=>{},82873:e=>{e.exports=JSON.parse('{"c":["Agra","Ahmedabad","Ajmer","Alappuzha","Allahabad","Ambattur","Ambernath","Amritsar","Anantapur","Arrah","Aurangabad","Avadi","Bahadurgarh","Bahraich","Ballia","Bengaluru","Baranagar","Barasat","Bareilly","Barasat","Bathinda","Begusarai","Belgaum","Bellary","Berhampur","Bettiah","Bharatpur","Bharuch","Bhilai","Bhilwara","Bhimavaram","Bhiwani","Bhopal","Bhubaneswar","Bhuj","Bhusawal","Bidar","Bihar Sharif","Bilaspur","Bilimora","Bongaigaon","Bongaigaon","Bulandshahr","Buxar","Chandannagar","Chandigarh","Chandausi","Chapra","Chennai","Chikmagalur","Chittorgarh","Coimbatore","Cuttack","Darbhanga","Dehradun","Deoghar","Dewas","Dhanbad","Dhule","Dimapur","Dindigul","Durg","Eluru","Erode","Etawah","Faridabad","Farrukhabad","Gandhinagar","Gangapur","Gaya","Giridih","Godhra","Gopalpur","Gorakhpur","Guntakal","Guntur","Gurugram","Guwahati","Haldia","Hapur","Haridwar","Hazaribagh","Hindupur","Hisar","Hosur","Howrah","Hubballi","Hyderabad","Ichalkaranji","Imphal","Indore","Jabalpur","Jaipur","Jalandhar","Jalna","Jalgaon","Jammu","Jamnagar","Jamshedpur","Jaunpur","Jhansi","Jodhpur","Junagadh","Kadapa","Kakinada","Kalyan","Kamarhati","Kanpur","Karimnagar","Karnal","Katihar","Khammam","Khanna","Kharagpur","Kochi","Kolhapur","Kolkata","Kollam","Korba","Kota","Kottayam","Kozhikode","Krishnanagar","Kulti","Kumbakonam","Lakhimpur","Latur","Lucknow","Ludhiana","Madhyamgram","Madurai","Maheshtala","Malegaon","Malerkotla","Mango","Mathura","Meerut","Mirzapur","Moradabad","Morvi","Mumbai","Muzaffarnagar","Muzaffarpur","Mysore","Nabadwip","Nagaur","Nagpur","Naihati","Nalgonda","Nanded","Nashik","Navi Mumbai","Nellore","New Delhi","Nizamabad","North Dumdum","Orai","Ozhukarai","Pali","Pallavaram","Panihati","Panipat","Panvel","Parbhani","Patiala","Patna","Pimpri-Chinchwad","Puducherry","Pune","Purnia","Purulia","Raebareli","Raichur","Raiganj","Rajahmundry","Rajkot","Rajpur Sonarpur","Rampur","Ranchi","Ratlam","Raurkela","Rewa","Rohtak","Rourkela","Sagar","Saharanpur","Salem","Sangli","Sangli-Miraj & Kupwad","Satara","Satna","Secunderabad","Serampore","Shahjahanpur","Shimla","Shimoga","Shivpuri","Sikar","Siliguri","Singrauli","South Dumdum","Srikakulam","Srinagar","Sultanpur","Surendranagar","Surat","Thane","Thiruvananthapuram","Thrissur","Tiruchirappalli","Tirunelveli","Tirupati","Tiruvottiyur","Tumkur","Udaipur","Udupi","Unnao","Vadodara","Vapi","Varanasi","Vasai-Virar","Vellore","Vijayawada","Visakhapatnam","Warangal","Yamunanagar"]}')}}]);
//# sourceMappingURL=763.55952d6c.chunk.js.map