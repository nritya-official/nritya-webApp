"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[1893],{41893:(e,o,a)=>{a.r(o),a.d(o,{default:()=>w});var t=a(72791),n=a(47022),c=a(95313),r=a(43360),s=a(59434),l=a(60717),i=a(68449),d=a(83708),u=a(67107),h=a(44507),f=a(35527),m=a(20890),g=a(63875),E=a(74512),p=a(15825),b=a(66934),C=a(56856),I=a(23285),S=a(80184);const R=(0,b.ZP)(C.Z)((e=>{let{theme:o}=e;return{["&.".concat(I.Z.alternativeLabel)]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},["&.".concat(I.Z.active)]:{["& .".concat(I.Z.line)]:{borderColor:"green"}},["&.".concat(I.Z.completed)]:{["& .".concat(I.Z.line)]:{borderColor:"green"}},["& .".concat(I.Z.line)]:{borderColor:"dark"===o.palette.mode?o.palette.grey[800]:"#eaeaf0",borderTopWidth:3,borderRadius:1}}})),x=[d.n$.SUBMITTED,d.n$.UNDER_REVIEW,d.n$.REVIEWED,d.n$.VERIFIED],y={[d.n$.SUBMITTED]:0,[d.n$.UNDER_REVIEW]:1,[d.n$.REVIEWED]:2,[d.n$.VERIFIED]:3,[d.n$.VERIFICATION_FAILED]:3},k=e=>{let{kycId:o,status:a}=e;const n=(0,s.v9)(l.w),[c,r]=(0,t.useState)({});console.log(a);const b=(0,u.Z)({palette:{mode:n?"dark":"light",primary:{main:n?"#90caf9":"#1976d2"}}});return(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,i.Ld)(d.Ul.USER_KYC,o);r(e)}catch(e){console.error("Error fetching KYC data for KYC ID ".concat(o,":"),e)}})()}),[o]),(0,S.jsx)(h.Z,{theme:b,children:(0,S.jsxs)(f.Z,{sx:{textAlign:"center",marginBottom:"1rem"},elevation:2,children:[(0,S.jsxs)(m.Z,{variant:"h5",component:"p",children:["Application Status: ",a]}),(0,S.jsx)("br",{}),(0,S.jsx)(g.Z,{activeStep:y[a],alternativeLabel:!0,connector:(0,S.jsx)(R,{}),children:x.map(((e,o)=>(0,S.jsx)(E.Z,{children:(0,S.jsx)(p.Z,{error:e===d.n$.VERIFIED&&a===d.n$.VERIFICATION_FAILED,children:e===d.n$.VERIFIED&&a===d.n$.VERIFICATION_FAILED?"Failed Verification":e})},o)))}),(0,S.jsx)("br",{})]})})};var N=a(89704),O=a.n(N);const A=(e,o)=>{let a="";switch(console.log(e,o),e){case"phone_number":/^\d{10}$/.test(o)||(a="Phone number must be exactly 10 digits.");break;case"zip_pin_code":/^\d{6}$/.test(o)||(a="ZIP/Pin code must be exactly 6 digits.");break;case"aadhar":/^\d{12}$/.test(o)||(a="Aadhar number must be exactly 12 digits.");break;case"gstin":/^[0-9]{2}[A-Za-z]{5}[0-9]{4}[A-Za-z]{1}[1-9A-Za-z]{1}[Zz]{1}[0-9A-Za-z]{1}$/.test(o)||(a="GSTIN must be a valid format (e.g., 22ABCDE0000A1Z5).")}return console.log(a),a};var U=a(57482);const j=new Map([["first_name","First Name"],["middle_last_name","Middle & Last Name"],["phone_number","Phone Number"],["street_address","Street Address"],["city","City"],["state_province","State"],["state","State"],["zip_pin_code","PIN Code/ZIP"],["aadhar","Aadhar Number"],["gstin","GST Number"],["comments","Remark(s)"]]),_=[["first_name"],["middle_last_name"],["phone_number"],["street_address"],["city"],["state_province","state"],["zip_pin_code"]];const w=function(){const[e,o]=(0,t.useState)({first_name:"",middle_last_name:"",phone_number:"",street_address:"",city:"",state_province:"",zip_pin_code:"",country:"India",aadhar:"",gstin:"",comments:"",status:d.n$.SUBMITTED,tncAgreed:!1,hash:""}),[a,u]=(0,t.useState)(null),h=(0,s.v9)(l.w),[f,g]=(0,t.useState)({}),E=JSON.parse(localStorage.getItem("userInfo")).UserId,p="".concat(E,"_Kyc"),[b,C]=(0,t.useState)(null),[I,R]=(0,t.useState)(null),[x,y]=(0,t.useState)([]),[N,w]=(0,t.useState)([]),[T,D]=(0,t.useState)(!1),[v,L]=(0,t.useState)(-1),[Z,G]=(0,t.useState)(-1),[K,P]=(0,t.useState)(!1),F=e=>{const{name:a,value:t}=e.target,n=A(a,t);g((e=>({...e,[a]:n}))),o((e=>({...e,[a]:t})))};(0,t.useEffect)((()=>{(async()=>{const e=await(0,i.Ld)(d.Ul.USER_KYC,p);e?(u(e),o({...e,status:e.status||d.n$.SUBMITTED})):u(null)})(),(async()=>{const e="".concat(d.Rb.CREATORS_KYC_DOCUMENTS,"/").concat(E);try{const[o,a]=await Promise.all([(0,i.XG)("".concat(e,"/Aadhar/")),(0,i.XG)("".concat(e,"/Gst/"))]);o&&o.length>0?C(o):(C(null),console.warn("No Aadhar documents found.")),a&&a.length>0?R(a):(R(null),console.warn("No GST documents found."))}catch(o){console.error("Error fetching KYC documents:",o)}})()}),[p]);const M=["status","hash","country","tncAgreed","comments","UserId","gstin","aadhar"];return(0,S.jsxs)("div",{style:{color:h?"white":"black"},children:[(0,S.jsxs)(n.Z,{className:"glassmorphic-container",style:{margin:"auto",border:h?"1px solid white":"1px solid black",borderRadius:"5px",padding:"20px"},children:[(0,S.jsxs)(c.Z,{onSubmit:async o=>{o.preventDefault(),P(!0);try{const a=Object.keys(e).filter((e=>!["hash","status","country","comments","UserId"].includes(e)));let t=!0,n=[],c=0;if(a.forEach((o=>{const a=A(o,e[o]);a&&(t=!1,c+=1,n.push("".concat(c,": ").concat(a)),g((e=>({...e,[o]:a}))))})),!t)return void alert("Please correct the following errors before submitting:\n\n".concat(n.join("\n")));const r=await(0,i.Ld)(d.Ul.USER_KYC,p),s=(e=>{const o=Object.keys(e).filter((e=>"hash"!==e&&"status"!==e)).sort().map((o=>"".concat(o,":").concat(e[o]))).join("|");return O().SHA256(o).toString()})(e);console.log(s,null===r||void 0===r?void 0:r.hash),r?r.hash!==s&&await(0,i.Xt)(d.Ul.USER_KYC,p,{...e,hash:s}):await(0,i.gv)(d.Ul.USER_KYC,p,{...e,UserId:E,hash:s}),x&&(console.log(x),await(0,i.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,E,"Aadhar"),L(0),await(0,i.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,x,E,"Aadhar",(e=>L(e)),(e=>{C(e),console.log(e)}))),N&&(console.log(N),await(0,i.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,E,"Gst"),G(0),await(0,i.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,N,E,"Gst",(e=>G(e)),(e=>{R(e),console.log(e)}))),await(0,i.Xt)(d.Ul.USER,E,{KycIdList:{[p]:e.status}}),o.target.reset()}catch(a){console.error("Error processing KYC: ",a)}finally{P(!1)}},children:[(0,S.jsx)("h1",{style:{color:h?"white":"black",textTransform:"capitalize"},children:"Verify yourself"}),(0,S.jsx)("div",{className:"row",children:_.map((o=>{const a=o.find((o=>!M.includes(o)&&void 0!==e[o]));return a?(0,S.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,S.jsxs)(c.Z.Group,{controlId:"formBasic".concat(a),children:[(0,S.jsx)(m.Z,{style:{color:h?"white":"black"},children:j.get(a)}),(0,S.jsx)(c.Z.Control,{type:"age"===a||"phone_number"===a?"number":"text",placeholder:"Enter ".concat(j.get(a)),name:a,value:e[a],onChange:F,required:!0,className:"glassmorphic-input",style:{backgroundColor:h?"#181818":"#e5e5e5",color:h?"white":"black"}}),f[a]&&(0,S.jsx)("span",{style:{color:"red"},children:f[a]})," "]})},a):null}))}),(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,S.jsxs)(c.Z.Group,{controlId:"formBasicAadhar",children:[(0,S.jsx)(c.Z.Label,{style:{color:h?"white":"black"},children:"Aadhar"}),(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(c.Z.Control,{type:"text",placeholder:"Enter Aadhar Number",name:"aadhar",className:"glassmorphic-input",value:e.aadhar,onChange:F,required:!0,style:{backgroundColor:h?"#181818":"#e5e5e5",color:h?"white":"black",marginRight:"10px"}}),(0,S.jsx)(r.Z,{disable:"Verified"===e.status,variant:"light",onClick:()=>document.getElementById("aadharUpload").click(),style:{padding:"0.5rem",backgroundColor:h?"#333":"#f8f9fa",color:h?"white":"black",cursor:"pointer"},children:"Upload"}),(0,S.jsx)("input",{type:"file",id:"aadharUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{y(e.target.files[0]),D(!0)})(e)})]}),b&&b.length>0&&b[0].fileURL?(0,S.jsx)(r.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(b[0].fileURL,"_blank"),children:"Download Aadhar Document"}):(0,S.jsx)("p",{style:{color:h?"white":"black"},children:(null===x||void 0===x?void 0:x.name)||"No new Aadhar file uploaded."})]}),f.aadhar&&(0,S.jsx)("span",{style:{color:"red"},children:f.aadhar}),(0,S.jsx)("div",{children:v>=0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("progress",{value:v,max:"100"}),(0,S.jsxs)("p",{children:[v,"% uploaded"]})]})})]})}),(0,S.jsx)("div",{className:"row",children:(0,S.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,S.jsxs)(c.Z.Group,{controlId:"formBasicGst",children:[(0,S.jsx)(c.Z.Label,{style:{color:h?"white":"black"},children:"GST"}),(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(c.Z.Control,{type:"text",placeholder:"Enter GST Number",name:"gstin",value:e.gstin,onChange:F,className:"glassmorphic-input",required:!0,style:{backgroundColor:h?"#181818":"#e5e5e5",color:h?"white":"black",marginRight:"10px"}}),(0,S.jsx)(r.Z,{disable:"Verified"===e.status,variant:"light",onClick:()=>document.getElementById("gstUpload").click(),style:{padding:"0.5rem",backgroundColor:h?"#333":"#f8f9fa",color:h?"white":"black",cursor:"pointer"},children:"Upload"}),(0,S.jsx)("input",{type:"file",id:"gstUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{w(e.target.files[0]),D(!0)})(e)})]}),I&&I.length>0&&I[0].fileURL?(0,S.jsx)(r.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(I[0].fileURL,"_blank"),children:"Download GST Document"}):(0,S.jsxs)("p",{style:{color:h?"white":"black"},children:[" ",(null===N||void 0===N?void 0:N.name)||"No new GST file uploaded."]})]}),f.gstin&&(0,S.jsx)("span",{style:{color:"red"},children:f.gstin}),(0,S.jsx)("div",{children:Z>=0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("progress",{value:Z,max:"100"}),(0,S.jsxs)("p",{children:[Z,"% uploaded"]})]})})]})}),(0,S.jsxs)("div",{class:"form-check",children:[(0,S.jsx)("input",{type:"checkbox",class:"form-check-input",id:"tnc-switch",checked:e.tncAgreed,onChange:e=>{o((o=>({...o,tncAgreed:e.target.checked})))}}),(0,S.jsx)("label",{class:"form-check-label",for:"exampleCheck1",children:(0,S.jsxs)("span",{style:{color:h?"white":"black"},children:["I agree to the ",(0,S.jsx)("a",{href:"#/npoliciesStudio",style:{color:h?"lightblue":"blue"},children:"Terms and Conditions. Click to read."})]})})]}),(0,S.jsx)("br",{}),e.comments&&(0,S.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,S.jsx)("br",{}),(0,S.jsxs)(c.Z.Group,{controlId:"formBasicComments",children:[(0,S.jsx)(c.Z.Label,{children:j.get("comments")}),(0,S.jsx)(c.Z.Control,{as:"textarea",name:"comments",value:e.comments,readOnly:!0,style:{backgroundColor:h?"#181818":"#e5e5e5",color:h?"white":"black"}})]})]}),(0,S.jsx)(r.Z,{variant:"info",type:"submit",disabled:"Verified"===e.status||!e.tncAgreed,children:"Submit"})]}),K&&(0,S.jsx)(U.Z,{}),(0,S.jsx)("br",{}),(0,S.jsx)(S.Fragment,{children:e.hash&&(0,S.jsx)(k,{kycId:p,status:e.status})})]}),(0,S.jsx)("br",{})]})}},83708:(e,o,a)=>{a.d(o,{A3:()=>g,DM:()=>d,QP:()=>E,RY:()=>u,Rb:()=>m,Ul:()=>f,i0:()=>r,lt:()=>h,n$:()=>c,rM:()=>l,uM:()=>i,zq:()=>s});var t=a(56355),n=a(80184);const c={SUBMITTED:"Submitted",UNDER_REVIEW:"Under Review",REVIEWED:"Reviewed",VERIFIED:"Verified",VERIFICATION_FAILED:"Verification Failed"},r={DRAFT_STUDIOS:"DraftStudios",DRAFT_WORKSHOPS:"DraftWorkshops",DRAFT_OPEN_CLASSES:"DraftOpenClasses",DRAFT_COURSES:"DraftCourses"},s={ALL:"All",BEGINNERS:"Beginner",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},l={INTERNET_CONV_CHARGES_WORKSHOPS_COURSES_INR:30,WORKSHOPS_BOOKING_LIMIT:10,OPEN_CLASSES_BOOKING_LIMIT:2,COURSES_BOOKING_LIMIT:10},i={PROD:"https://nrityaserver-2b241e0a97e5.herokuapp.com/",LOCAL:"http://127.0.0.1:8000/"},d={GREEN:{backgroundColor:"#28a745",color:"#fff"},BLUE:{backgroundColor:"#007bff",color:"#fff"},YELLOW:{backgroundColor:"#ffc107",color:"#000"},RED:{backgroundColor:"#dc3545",color:"#fff"},PURPLE:{backgroundColor:"#6f42c1",color:"#fff"},ORANGE:{backgroundColor:"#fd7e14",color:"#fff"},TEAL:{backgroundColor:"#20c997",color:"#fff"},PINK:{backgroundColor:"#e83e8c",color:"#fff"},GRAY:{backgroundColor:"#6c757d",color:"#fff"},LIGHTBLUE:{backgroundColor:"#17a2b8",color:"#fff"},DARKBLUE:{backgroundColor:"#343a40",color:"#fff"},CYAN:{backgroundColor:"#00bcd4",color:"#fff"},INDIGO:{backgroundColor:"#6610f2",color:"#fff"},LIME:{backgroundColor:"#cddc39",color:"#000"},AMBER:{backgroundColor:"#ffca28",color:"#000"},BROWN:{backgroundColor:"#795548",color:"#fff"},LIGHTGREEN:{backgroundColor:"#8bc34a",color:"#000"},DEEPPURPLE:{backgroundColor:"#673ab7",color:"#fff"},DEEPORANGE:{backgroundColor:"#ff5722",color:"#fff"},BLACK:{backgroundColor:"#000000",color:"#fff"},WHITE:{backgroundColor:"#ffffff",color:"#000"},SILVER:{backgroundColor:"#c0c0c0",color:"#000"},GOLD:{backgroundColor:"#ffd700",color:"#000"},NAVY:{backgroundColor:"#001f3f",color:"#fff"},OLIVE:{backgroundColor:"#3d9970",color:"#fff"}},u={[s.ALL]:d.GREEN,[s.BEGINNERS]:d.BLUE,[s.INTERMEDIATE]:d.YELLOW,[s.ADVANCED]:d.RED},h=[d.PURPLE,d.ORANGE,d.TEAL,d.LIME],f={USER:"User",USER_KYC:"UserKyc",ADMIN:"Admin",REVIEWS:"Reviews",TRANSACTIONS:"Transactions",STUDIO:"Studio",INSTRUCTORS:"Instructors",FREE_TRIAL_BOOKINGS:"FreeTrialBookings",WORKSHOPS:"Workshops",OPEN_CLASSES:"OpenClasses",COURSES:"Courses",BOOKINGS:"Bookings"},m={STUDIOIMAGES:"StudioImages",STUDIOICON:"StudioIcon",STUDIOANNOUNCEMENTS:"StudioAnnouncements",USERIMAGE:"UserImage",INSTRUCTORIMAGES:"InstructorImages",WORKSHOPICON:"WorkshopIcon",WORKSHOPIMAGES:"WorkshopImages",OPENCLASSICON:"OpenClassIcon",COURSEICON:"CourseIcon",CREATORS_KYC_DOCUMENTS:"CreatorKycDocuments"},g="https://nrityaserver-2b241e0a97e5.herokuapp.com/",E={AC:(0,n.jsx)(t.l51,{}),"Free Wifi":(0,n.jsx)(t._0,{}),"RO Water":(0,n.jsx)(t.EXY,{}),Toilet:(0,n.jsx)(t.Iev,{}),"Power Backup":(0,n.jsx)(t.eKD,{}),"Fire Extinguisher":(0,n.jsx)(t.Ybg,{}),"First Aid Kit":(0,n.jsx)(t.FZx,{}),"CCTV Camera":(0,n.jsx)(t.KoQ,{}),"Card Payment":(0,n.jsx)(t.ypE,{}),"Parking Space":(0,n.jsx)(t.mxg,{})}},68449:(e,o,a)=>{a.d(o,{FV:()=>C,Km:()=>m,Ld:()=>d,Us:()=>i,XG:()=>I,Xt:()=>f,eg:()=>b,gv:()=>u,ih:()=>g,oM:()=>l,qS:()=>E,to:()=>h,xR:()=>p});var t=a(12481),n=a(10159),c=a(30276),r=a(83708),s=a(644);const l=async e=>{console.log("creatorMode uid",e);try{const o=(0,t.JU)(n.db,r.Ul.USER,e),a=await(0,t.QT)(o);if(a.exists())if(null!=a.data()){const e=a.data().CreatorMode;console.log("setCreatorMode: Is User a creator?",e),s.Z.setItem("CreatorMode",e)}else console.log("userSnap.data() null");else console.log("User not found")}catch(o){console.log(" error",o)}},i=async(e,o)=>{console.log("Debug ","".concat(e,"/").concat(o));const a="".concat(e,"/").concat(o),t=(0,c.iH)(n.tO,a);try{const e=await(0,c.aF)(t);if(e.items.length>0){const o=e.items[0],a=await(0,c.Jt)(o);return console.log("Debug URL:",a),a}return console.log("Debug No files found in the folder."),null}catch(r){return console.error("Error getting image URL:",r),null}},d=async(e,o)=>{const a=(0,t.JU)(n.db,e,o),c=await(0,t.QT)(a);return c.exists()?c.data():null},u=async(e,o,a)=>{const c=(0,t.JU)(n.db,e,o);return await(0,t.pl)(c,a,{merge:!0}),a},h=async(e,o,a)=>{const c=(0,t.JU)(n.db,e,o);return await(0,t.r7)(c,{isPhoneNumberVerified:!0,phoneNumber:a}),!0},f=async(e,o,a)=>{const c=(0,t.JU)(n.db,e,o);return await(0,t.r7)(c,a),{id:o,...a}},m=async(e,o,a,c)=>{console.log("Hiii ",e,o,a,c);const r=(0,t.IO)((0,t.hJ)(n.db,e),(0,t.ar)(o,a,c));return(await(0,t.Yp)(r)).data().count},g=async(e,o)=>{const a="".concat(e,"/").concat(o),t=(0,c.iH)(n.tO,a),r=await(0,c.aF)(t);await Promise.all(r.items.map((async e=>{await(0,c.oq)(e)})))},E=async(e,o,a)=>{const t="".concat(e,"/").concat(o,"/").concat(a),r=(0,c.iH)(n.tO,t),s=await(0,c.aF)(r);await Promise.all(s.items.map((async e=>{await(0,c.oq)(e)})))},p=async function(e,o,a,t){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const s=o.length;let l=0;await Promise.all(o.map((async o=>{let i="".concat(e,"/").concat(a,"/").concat(o.filename);r&&(i="".concat(e,"/").concat(a,"/").concat(r,"/").concat(o.filename));const d=(0,c.iH)(n.tO,i);await(0,c.oq)(d),l+=1,t(l/s*100)})))},b=async function(e,o,a,t){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;console.log(e,a);const s=o.length;let l=0;await Promise.all(o.map((async o=>{let i="".concat(e,"/").concat(a);r&&(i="".concat(e,"/").concat(a,"/").concat(r));const d=(0,c.iH)(n.tO,"".concat(i,"/").concat(o.file.name));await(0,c.KV)(d,o.file),l+=1,t(l/s*100)})))},C=async function(e,o,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l="".concat(e,"/").concat(a);t&&(l="".concat(e,"/").concat(a,"/").concat(t)),console.log(o,o.name);const i=(0,c.iH)(n.tO,"".concat(l,"/").concat(o.name)),d=(0,c.B0)(i,o);d.on("state_changed",(e=>{const o=e.totalBytes,a=e.bytesTransferred,t=o>0?(a/o*100).toFixed(2):-1;switch(r(t),console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{e.code}),(()=>{(0,c.Jt)(d.snapshot.ref).then((e=>{console.log("File available at",e),s(e)}))}))},I=async e=>{const o="".concat(e),a=(0,c.iH)(n.tO,o);try{const e=await(0,c.aF)(a);return await Promise.all(e.items.map((async e=>{const o=await(0,c.Jt)(e);return{id:e.name,filename:e.name,fileURL:o}})))}catch(t){throw console.error("Error retrieving images:",t),t}}}}]);
//# sourceMappingURL=1893.93f276b6.chunk.js.map