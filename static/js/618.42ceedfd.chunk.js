(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[618,645],{87472:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(72791),r=a(84654),n=a(73542),i=a(30195),o=a(94294),l=a(79253),c=a(21204),d=a(80184);const h=e=>{let{dataList:t,imgOnly:a=!1}=e;console.log("Debug from CardSlider",a),console.log(t);const h=Array.isArray(t)?t:Object.values(t);console.log(h);const[m,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),p=()=>{u(!1),g(null)},b={transform:"scale(1.01)"};return(0,d.jsxs)("div",{className:"horizontal-scroll-wrapper",children:[h.map(((e,t)=>a?(0,d.jsx)("a",{onClick:()=>{return t=e,console.log(t),g(t),void u(!0);var t},children:(0,d.jsx)(r.Z,{style:{marginRight:"0.5rem"},component:"li",sx:{height:300,width:534,"&:hover":{...b}},children:(0,d.jsx)(l.Z,{children:(0,d.jsx)("img",{src:e,loading:"lazy",alt:"Studio image"})})},t)},t):(0,d.jsx)("a",{href:`#/studio/${e.id}`,children:(0,d.jsx)(c.Z,{data:e,img_src:e.iconUrl},e.id)},t))),(0,d.jsx)(n.Z,{open:m,onClose:p,children:x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z,{sx:{padding:0},children:(0,d.jsx)("img",{src:x,alt:"Image",style:{maxWidth:"100%",height:"auto"}})}),(0,d.jsx)(o.Z,{sx:{"&:hover":{backgroundColor:"#735EAB",color:"white"}},onClick:p,children:"Close"})]})})]})}},81018:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var s=a(72791),r=a(6429),n=a.n(r),i=a(30276),o=a(10159),l=a(59434),c=a(60717),d=a(68449),h=a(57621),m=a(13400),u=a(39504),x=a(27247),g=a(75424),p=a(83708),b=a(80184);const f=e=>{let{entityId:t,storageFolder:a,title:r,maxImageCount:f=10,updateMode:y,disable:j}=e;const v=(0,g.D)(),[Z,w]=(0,s.useState)([]),[C,S]=(0,s.useState)([]),[k,N]=(0,s.useState)([]),[I,E]=(0,s.useState)([]),P=(0,l.v9)(c.w);console.log("Kyc enitity id ",t,j);const D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const a=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]};(0,s.useEffect)((()=>{t&&R(t)}),[t]),(0,s.useEffect)((()=>{if(f&&Z.length>f){const e=Z.slice(0,f);alert(`Exceeded maxImageCount, keeping first ${f} files.`),w(e)}}),[Z,f]);const U=(e,t)=>{const a=e.map((e=>e.id)),s=t.map((e=>e.id));return{imagesToDelete:t.filter((e=>!a.includes(e.id))),newImages:e.filter((e=>!s.includes(e.id)))}},R=async e=>{w([]),N([]),E([]);try{const t=`${a}/${e}`;console.log(t);const s=(0,i.iH)(o.tO,t),r=await(0,i.aF)(s),n=await Promise.all(r.items.map((async e=>{const t=await(0,i.Jt)(e);return{id:e.name,filename:e.name,fileURL:t}})));S(n),w(n)}catch(t){console.error("Error fetching user images:",t)}};return(0,b.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,b.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"card mt-5",children:(0,b.jsx)("div",{className:"card-body",style:{backgroundColor:P?"#333333":"white"},children:(0,b.jsxs)("div",{className:"kb-data-box",children:[(0,b.jsx)("div",{className:"kb-modal-data-title",children:(0,b.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,b.jsx)("h4",{children:r}),(0,b.jsxs)("p",{children:["Max no of image(s):",f," ",a===p.Rb.STUDIOIMAGES&&(0,b.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,b.jsxs)("form",{style:{backgroundColor:P?"#333333":"white"},children:[(0,b.jsx)("div",{className:"kb-file-upload",children:(0,b.jsx)("div",{className:"file-upload-box",children:(0,b.jsx)("input",{type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const t=Array.from(e.target.files),a=[];t.forEach((e=>{const s=new FileReader;s.onloadend=()=>{a.push({id:n().generate(),filename:e.name,filetype:e.type,fileimage:s.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:D(e.size),file:e}),a.length===t.length&&(w((e=>[...e,...a])),N(a))},s.readAsDataURL(e)}))},multiple:!0})})}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"kb-attach-box mb-3",children:(0,b.jsx)("div",{className:"row",children:t&&Z.length>0?Z.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,b.jsx)(h.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,b.jsx)(m.Z,{"aria-label":"delete",disabled:j,onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this image?")){const t=Z.find((t=>t.id===e));E((e=>[...e,t])),w((t=>t.filter((t=>t.id!==e))))}})(e.id),style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,b.jsx)(x.Z,{style:{color:"ff0000"}})})]}):(0,b.jsx)(u.Z,{children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("p",{children:"No images selected"})})})}),(0,b.jsx)("div",{className:"kb-buttons-box",children:(0,b.jsx)("button",{type:"button",className:"btn form-submit",style:{backgroundColor:P?"#892CDC":"black",color:"white"},onClick:async()=>{if(t)try{if(1===f)await(0,d.ih)(a,t),await(0,d.eg)(a,k,t);else{const{imagesToDelete:e,newImages:s}=U(Z,C);e.length>0&&await(0,d.xR)(a,e,t),s.length>0&&await(0,d.eg)(a,s,t)}v("Images Uploaded/Deleted","success")}catch(e){console.error("Error uploading/deleting images:",e)}else alert("No studio selected")},disabled:j,children:"Image Upload"})})]}),Z.length>0&&(0,b.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("hr",{}),Z.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,b.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]})})})})})})};f.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const y=f},37645:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var s=a(72791),r=a(47022),n=a(13855),i=a(43360),o=a(59434),l=a(60717),c=a(68449),d=a(83708),h=a(67107),m=a(44507),u=a(35527),x=a(20890),g=a(63875),p=a(74512),b=a(15825),f=a(66934),y=a(56856),j=a(23285),v=a(80184);const Z=(0,f.ZP)(y.Z)((e=>{let{theme:t}=e;return{[`&.${j.Z.alternativeLabel}`]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},[`&.${j.Z.active}`]:{[`& .${j.Z.line}`]:{borderColor:"green"}},[`&.${j.Z.completed}`]:{[`& .${j.Z.line}`]:{borderColor:"green"}},[`& .${j.Z.line}`]:{borderColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderTopWidth:3,borderRadius:1}}})),w=[d.n$.SUBMITTED,d.n$.UNDER_REVIEW,d.n$.REVIEWED,d.n$.VERIFIED],C={[d.n$.SUBMITTED]:0,[d.n$.UNDER_REVIEW]:1,[d.n$.REVIEWED]:2,[d.n$.VERIFIED]:3,[d.n$.VERIFICATION_FAILED]:3},S=e=>{let{kycId:t,status:a}=e;const r=(0,o.v9)(l.w),[n,i]=(0,s.useState)({});console.log(a);const f=(0,h.Z)({palette:{mode:r?"dark":"light",primary:{main:r?"#90caf9":"#1976d2"}}});return(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,c.Ld)(d.Ul.USER_KYC,t);i(e)}catch(e){console.error(`Error fetching KYC data for KYC ID ${t}:`,e)}})()}),[t]),(0,v.jsx)(m.Z,{theme:f,children:(0,v.jsxs)(u.Z,{sx:{textAlign:"center",marginBottom:"1rem"},elevation:2,children:[(0,v.jsxs)(x.Z,{variant:"h5",component:"p",children:["Application Status: ",a]}),(0,v.jsx)("br",{}),(0,v.jsx)(g.Z,{activeStep:C[a],alternativeLabel:!0,connector:(0,v.jsx)(Z,{}),children:w.map(((e,t)=>(0,v.jsx)(p.Z,{children:(0,v.jsx)(b.Z,{error:e===d.n$.VERIFIED&&a===d.n$.VERIFICATION_FAILED,children:e===d.n$.VERIFIED&&a===d.n$.VERIFICATION_FAILED?"Failed Verification":e})},t)))}),(0,v.jsx)("br",{})]})})};var k=a(89704),N=a.n(k);var I=a(81018);const E=new Map([["first_name","First Name"],["middle_last_name","Middle & Last Name"],["phone_number","Phone Number"],["street_address","Street Address"],["city","City"],["state_province","State"],["state","State"],["zip_pin_code","PIN Code/ZIP"],["aadhar","Aadhar Number"],["gstin","GST Number"],["comments","Remark(s)"]]);const P=function(){const[e,t]=(0,s.useState)({first_name:"",middle_last_name:"",phone_number:"",street_address:"",city:"",state_province:"",zip_pin_code:"",country:"India",aadhar:"",gstin:"",comments:"",status:d.n$.SUBMITTED,tncAgreed:!1,hash:""}),[a,h]=(0,s.useState)(null),m=(0,o.v9)(l.w),[u,x]=(0,s.useState)({}),g=JSON.parse(localStorage.getItem("userInfo")).UserId,p=`${g}_Kyc`,b=e=>{const{name:a,value:s}=e.target;t((e=>({...e,[a]:s})))};return(0,s.useEffect)((()=>{(async()=>{const e=await(0,c.Ld)(d.Ul.USER_KYC,p);e?(h(e),t({...e,status:e.status||d.n$.SUBMITTED})):h(null)})()}),[p]),(0,v.jsxs)("div",{style:{color:m?"white":"black"},children:[(0,v.jsxs)(r.Z,{style:{margin:"auto",border:m?"1px solid white":"1px solid black",borderRadius:"5px",padding:"20px"},children:[(0,v.jsxs)(n.Z,{onSubmit:async t=>{t.preventDefault();try{const a=Object.keys(e).filter((e=>!["hash","status","country","comments","UserId"].includes(e)));let s=!0,r=[],n=0;if(a.forEach((t=>{const a=((e,t)=>{let a="";switch(console.log(e,t),e){case"phone_number":/^\d{10}$/.test(t)||(a="Phone number must be exactly 10 digits.");break;case"zip_pin_code":/^\d{6}$/.test(t)||(a="ZIP/Pin code must be exactly 6 digits.");break;case"aadhar":/^\d{12}$/.test(t)||(a="Aadhar number must be exactly 12 digits.");break;case"gstin":/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/.test(t)||(a="GSTIN must be a valid format (e.g., 22AAAAA0000A1Z5).")}return console.log(a),a})(t,e[t]);a&&(s=!1,n+=1,r.push(`${n}: ${a}`),x((e=>({...e,[t]:a}))))})),!s)return void alert(`Please correct the following errors before submitting:\n\n${r.join("\n")}`);const i=await(0,c.Ld)(d.Ul.USER_KYC,p),o=(e=>{const t=Object.keys(e).filter((e=>"hash"!==e&&"status"!==e)).sort().map((t=>`${t}:${e[t]}`)).join("|");return N().SHA256(t).toString()})(e);i?i.hash!==o?(await(0,c.Xt)(d.Ul.USER_KYC,p,{...e,hash:o}),alert("KYC updated successfully")):alert("No changes detected"):(await(0,c.gv)(d.Ul.USER_KYC,p,{...e,UserId:g,hash:o}),alert("KYC added successfully")),await(0,c.Xt)(d.Ul.USER,g,{KycIdList:{[p]:e.status}}),t.target.reset()}catch(a){console.error("Error processing KYC: ",a)}},children:[(0,v.jsx)("h1",{style:{color:m?"white":"black",textTransform:"capitalize"},children:"Verify yourself"}),(0,v.jsx)("div",{className:"row",children:Object.keys(e).map((t=>"status"!==t&&"hash"!==t&&"country"!==t&&"tncAgreed"!==t&&"comments"!==t&&"UserId"!==t&&(0,v.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,v.jsxs)(n.Z.Group,{controlId:`formBasic${t}`,children:[(0,v.jsx)(n.Z.Label,{children:E.get(String(t))}),(0,v.jsx)(n.Z.Control,{type:"age"===t||"phone_number"===t?"number":"text",placeholder:`Enter ${E.get(String(t))}`,name:t,value:e[t],onChange:b,required:!0,style:{backgroundColor:m?"#181818":"#e5e5e5",color:m?"white":"black"}})]})},t)))}),(0,v.jsx)(I.Z,{disable:"Verified"===e.status,entityId:g,title:"Upload Documents",storageFolder:d.Rb.CREATORS_KYC_DOCUMENTS}),(0,v.jsxs)("div",{class:"form-check",children:[(0,v.jsx)("input",{type:"checkbox",class:"form-check-input",id:"tnc-switch",checked:e.tncAgreed,onChange:e=>{t((t=>({...t,tncAgreed:e.target.checked})))}}),(0,v.jsx)("label",{class:"form-check-label",for:"exampleCheck1",children:(0,v.jsxs)("span",{children:["I agree to the ",(0,v.jsx)("a",{href:"#/npolicies/1",style:{color:m?"lightblue":"blue"},children:"Terms and Conditions. Click to read."})]})})]}),(0,v.jsx)("br",{}),e.comments&&(0,v.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,v.jsx)("br",{}),(0,v.jsxs)(n.Z.Group,{controlId:"formBasicComments",children:[(0,v.jsx)(n.Z.Label,{children:E.get("comments")}),(0,v.jsx)(n.Z.Control,{as:"textarea",name:"comments",value:e.comments,readOnly:!0,style:{backgroundColor:m?"#181818":"#e5e5e5",color:m?"white":"black"}})]})]}),(0,v.jsx)(i.Z,{variant:"success",type:"submit",disabled:"Verified"===e.status||!e.tncAgreed,children:"Submit"})]}),(0,v.jsx)("br",{}),(0,v.jsx)(v.Fragment,{children:e.hash&&(0,v.jsx)(S,{kycId:p,status:e.status})})]}),(0,v.jsx)("br",{})]})}},21204:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});a(72791);var s=a(92552),r=a(84654),n=a(28658),i=a(69597),o=a(18625),l=a(83168),c=a(36314),d=a(59434),h=a(60717),m=a(83708),u=a(97310),x=a(17237),g=a(80184);function p(e){let{img_src:t,data:a}=e;const p=(0,d.v9)(h.w),b=a.id?a.id:a.studioId,f={backgroundColor:p?"#444":"white",padding:"0px",color:p?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,g.jsxs)(r.Z,{variant:"solid",sx:{...f,"&:hover":{transform:"scale(1.01)"}},children:[(0,g.jsxs)(s.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,g.jsx)("img",{src:a&&a.iconUrl?a.iconUrl:"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg",loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",height:"auto",overflow:"hidden"}}),(0,g.jsx)(c.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:a&&a.danceStyles&&"string"===typeof a.danceStyles?a.danceStyles.split(",").slice(0,3).map(((e,t)=>(0,g.jsx)(i.Z,{color:t%2===0?"danger":"success",sx:{marginBottom:"10px",fontSize:"0.8rem",bgcolor:m.lt[t].backgroundColor,color:m.lt[t].color},children:e.trim()},t))):(0,g.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,g.jsxs)(n.Z,{style:{padding:"10px"},children:[(0,g.jsx)(o.Z,{href:`#/studio/${b}`,fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:p?"white":"black",extDecoder:"one"},children:a&&a.studioName?a.studioName:"    "}),(0,g.jsx)(l.ZP,{style:{color:p?"white":"black"},level:"body-xs",children:a.street?a.street:".  "}),(0,g.jsx)(u.ZP,{hidden:!0,"aria-label":"Like minimal photography",size:"md",variant:"solid",color:"danger",sx:{position:"absolute",zIndex:2,borderRadius:"50%",right:"1rem",bottom:"2rem",transform:"translateY(50%)"},children:(0,g.jsx)(x.Z,{})}),(0,g.jsxs)(l.ZP,{style:{color:p?"white":"black"},children:["\u2b50 ",a&&a.avgRating?a.avgRating.toFixed(1):" Not rated yet"]})]})]})}},59894:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var s=a(72791),r=a(89743),n=a(2677),i=a(95070),o=a(19275),l=a(83708),c=a(59434),d=a(60717),h=a(61224),m=a(68449),u=a(37645),x=a(57621),g=a(9585),p=a(93044),b=a(20890),f=a(20068),y=a(39504),j=a(18384),v=a(88447),Z=a(697),w=a(76989),C=a(94294),S=a(49644),k=a(68096),N=a(94925),I=a(68837),E=a(5022),P=a(93543),D=a(94070),U=a(51650),R=a(74569),A=a.n(R),B=a(32808),T=a.n(B),$=a(80184);const _="https://nrityaserver-2b241e0a97e5.herokuapp.com",O=e=>{let{open:t,onClose:a,userProfileInfo:r,setUserProfileInfo:n}=e;const{currentUser:i}=(0,h.a)(),o=U.W,[c,d]=(0,s.useState)([]),[u,x]=(0,s.useState)(),[g,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(""),[j,R]=(0,s.useState)((null===r||void 0===r?void 0:r.isPhoneNumberVerified)||!1),[B,O]=(0,s.useState)(!1),[F,L]=(0,s.useState)(!1),[V,W]=(0,s.useState)(""),[M,z]=(0,s.useState)("info");(0,s.useEffect)((()=>{r&&r.DanceStyles&&""!==r.DanceStyles&&d(r.DanceStyles),r&&r.PhoneNumber&&""!==r.setUserPhoneNumber&&x(r.PhoneNumber)}),[r]);const K=e=>{n({...r,[e.target.name]:e.target.value})},G=()=>{L(!1)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(v.Z,{open:t,onClose:a,style:{overflow:"scroll"},children:(0,$.jsxs)(Z.Z,{sx:{p:4,backgroundColor:"white",margin:"auto",mt:5,maxWidth:400,borderRadius:2},children:[(0,$.jsx)(b.Z,{variant:"h6",gutterBottom:!0,children:"Edit Profile"}),(0,$.jsx)(w.Z,{fullWidth:!0,label:"Name",name:"Name",value:r.Name,onChange:K,margin:"normal"}),(0,$.jsx)(w.Z,{fullWidth:!0,label:"Age",name:"Age",type:"number",value:r.Age,onChange:K,margin:"normal"}),(0,$.jsx)(w.Z,{fullWidth:!0,label:"Phone Number",name:"PhoneNumber",type:"number",value:r.PhoneNumber,onChange:K,margin:"normal",InputProps:{readOnly:j||r.isPhoneNumberVerified}}),j||r.isPhoneNumberVerified?(0,$.jsx)(b.Z,{color:"green",children:"Phone Number Verified"}):(0,$.jsx)(C.Z,{variant:"outlined",onClick:async()=>{try{if(200!==(await A().post(`${_}/djSms/request_otp/`,T().stringify({phone_number:r.PhoneNumber}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).status)throw new Error("Failed to send OTP.");O(!0),p(!0),W("OTP sent to your phone number."),z("info"),L(!0)}catch(e){console.error("Error sending OTP:",e),W("Error sending OTP, please try again."),z("error"),L(!0)}},children:B?"Resend OTP":"Verify Phone Number"}),(0,$.jsx)(S.Z,{multiple:!0,id:"tags-standard",options:o,value:c,onChange:(e,t)=>{d(t)},renderInput:e=>(0,$.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:"white",color:"black"}})}),(0,$.jsxs)(k.Z,{fullWidth:!0,margin:"normal",children:[(0,$.jsx)(N.Z,{children:"Gender"}),(0,$.jsxs)(I.Z,{name:"Gender",value:r.Gender,onChange:K,children:[(0,$.jsx)(E.Z,{value:"Male",children:"Male"}),(0,$.jsx)(E.Z,{value:"Female",children:"Female"}),(0,$.jsx)(E.Z,{value:"Other",children:"Other"})]})]}),(0,$.jsx)(w.Z,{fullWidth:!0,label:"Bio",name:"Bio",value:r.Bio,onChange:K,multiline:!0,rows:4,margin:"normal"}),(0,$.jsxs)(Z.Z,{mt:2,display:"flex",justifyContent:"space-between",children:[(0,$.jsx)(C.Z,{variant:"outlined",onClick:a,children:"Cancel"}),(0,$.jsx)(C.Z,{variant:"contained",onClick:async()=>{r.DanceStyles=c;await(0,m.gv)(l.Ul.USER,i.uid,r)&&(W("Profile Updated"),z("success"),L(!0))},children:"Save"})]})]})}),(0,$.jsx)(v.Z,{open:g,onClose:()=>p(!1),children:(0,$.jsxs)(Z.Z,{sx:{p:4,backgroundColor:"white",margin:"auto",mt:5,maxWidth:300,borderRadius:2},children:[(0,$.jsx)(b.Z,{variant:"h6",gutterBottom:!0,children:"Enter OTP"}),(0,$.jsx)(w.Z,{fullWidth:!0,label:"4-Digit OTP",value:f,onChange:e=>y(e.target.value),margin:"normal"}),(0,$.jsxs)(Z.Z,{mt:2,display:"flex",justifyContent:"space-between",children:[(0,$.jsx)(C.Z,{variant:"outlined",onClick:()=>p(!1),children:"Cancel"}),(0,$.jsx)(C.Z,{variant:"contained",onClick:async()=>{try{const e=await A().post(`${_}/djSms/confirm_otp/`,T().stringify({phone_number:r.PhoneNumber,otp:f}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log(e),e&&e.data&&"success"===e.data.status?(R(!0),n({...r,isPhoneNumberVerified:!0}),p(!1),(async()=>{(0,m.to)(l.Ul.USER,i.uid,r.PhoneNumber)})(),W("Phone number verified successfully."),z("success"),L(!0)):(W(e.message||"Invalid OTP."),z("error"),L(!0))}catch(e){console.error("Error verifying OTP:",e),W("Error verifying OTP, please try again."),z("error"),L(!0)}},children:"Submit OTP"})]})]})}),(0,$.jsx)(P.Z,{open:F,autoHideDuration:600,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:G,children:(0,$.jsx)(D.Z,{onClose:G,severity:M,sx:{width:"100%"},children:V})})]})};var F=a(9806),L=a(12481),V=a(11632),W=a(87472),M=a(10159);const z=function(){const[e,t]=(0,s.useState)(!1),[a,v]=(0,s.useState)({Name:"",Age:"",DanceStyles:"",Gender:"",Bio:""}),Z=(0,c.v9)(d.w),{currentUser:w}=(0,h.a)();console.log("currentUser",w);const C=[["Transactions","All","#/transactions"],["My Bookings","All","#/myBookings"],["Instructors","Creator","#/modifyInstructors"],["Studios","Creator","#/modifyStudios"],["DashBoard","Creator","#/creatorDashboard"]],[S,k]=(0,s.useState)(!1),[N,I]=(0,s.useState)([]);C.sort(((e,t)=>e[0].localeCompare(t[0]))),(0,s.useEffect)((()=>{w&&w.uid&&(async e=>{try{const t=(0,L.JU)(M.db,l.Ul.USER,e),a=await(0,L.QT)(t),s=a.exists()?a.data().recentlyWatched:{},r=Object.values(s).map((async e=>{if(!e)return console.warn("Invalid studioId:",e),null;console.log("studioId",e);const t=(0,L.JU)(M.db,l.Ul.STUDIO,e),a=await(0,L.QT)(t);return a.exists()?{id:e,...a.data()}:(console.warn(`Studio document not found for ID: ${e}`),null)})),n=(await Promise.all(r)).filter((e=>null!==e));I(n)}catch(t){console.error("Error fetching recently watched studios:",t)}})(w.uid);(async()=>{try{const e=await(0,m.Ld)(l.Ul.USER,w.uid);e?(v({Name:e.Name||"",Age:e.Age||"",DanceStyles:e.DanceStyles||"",Gender:e.Gender||"",Bio:e.Bio||"",PhoneNumber:e.PhoneNumber||"",isPhoneNumberVerified:e.isPhoneNumberVerified||!1}),t(e.CreatorMode)):console.log("User not found but workshop created... error")}catch(e){console.log(" error")}})()}),[e]);const E={background:Z?"black":"white",color:Z?"white":"black",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"10px",cursor:"pointer"};return(0,$.jsxs)("div",{children:[(0,$.jsx)("h1",{style:{color:Z?"white":"black",textTransform:"capitalize"},children:"Profile"}),(0,$.jsxs)(x.Z,{sx:{maxWidth:400,background:Z?"black":"white",color:Z?"white":"black"},children:[(0,$.jsx)(g.Z,{avatar:(0,$.jsx)(p.Z,{alt:"Picture",src:w.photoURL,sx:{width:40,height:40}}),title:(0,$.jsxs)(b.Z,{variant:"h6",component:"div",sx:{display:"flex",color:Z?"white":"black",alignItems:"center"},children:[w.displayName,e&&(0,$.jsx)(f.Z,{title:"You are a verified user.",arrow:!0,children:(0,$.jsx)(j.Z,{sx:{color:"green",marginLeft:.5,fontSize:20}})})]}),subheader:(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(b.Z,{variant:"body2",component:"div",sx:{color:Z?"white":"black"},children:[w.email,a.Age].filter(Boolean).join(" || ")}),a.DanceStyles&&(0,$.jsx)(b.Z,{variant:"body2",component:"div",sx:{mt:1,color:Z?"white":"black"},children:a.DanceStyles}),a.Bio&&(0,$.jsx)(b.Z,{variant:"body2",component:"div",sx:{mt:1,color:Z?"white":"black"},children:a.Bio})]}),subheaderTypographyProps:{sx:{color:Z?"gray":"darkgray"}}}),(0,$.jsx)(o.Z,{sx:{ml:2},variant:"outlined",onClick:()=>{k(!0)},children:"Edit Profile"}),(0,$.jsx)(O,{open:S,onClose:()=>{k(!1)},userProfileInfo:a,setUserProfileInfo:v}),(0,$.jsx)(y.Z,{children:(0,$.jsx)(b.Z,{variant:"body2",color:"text.secondary",style:{color:Z?"white":"black"},children:e?"List your studios now!!":"Welcome to the Nritya! \n Verify your profile to list your studio."})})]}),(0,$.jsx)("br",{}),(0,$.jsx)(r.Z,{children:C.map((t=>{let[a,s,r]=t;return"Creator"!==s||e?(0,$.jsx)(n.Z,{xs:12,sm:6,md:6,lg:3,xl:3,className:"mb-4",children:(0,$.jsx)("a",{href:r,children:(0,$.jsx)(i.Z,{style:E,children:(0,$.jsx)(i.Z.Body,{children:(0,$.jsx)(i.Z.Title,{children:a})})})})},a):null}))}),(0,$.jsx)(u.default,{}),(0,$.jsxs)(r.Z,{children:[N.length>0&&(0,$.jsxs)("h4",{style:{color:Z?"white":"black"},children:[" ",(0,$.jsx)(F.G,{icon:V.SZw,size:"1x"})," Recently Viewed"]}),N.length>0?(0,$.jsx)(W.default,{dataList:N,imgOnly:!1}):""]})]})}},24654:()=>{},51650:e=>{"use strict";e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=618.42ceedfd.chunk.js.map