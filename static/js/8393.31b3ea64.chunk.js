"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[8393],{68393:(o,e,r)=>{r.r(e),r.d(e,{default:()=>C});var a=r(72791),s=r(57689),t=r(10159),n=r(98255),l=r(12481),c=r(83708),i=r(89743),d=r(2677),u=r(59434),f=r(60717),g=r(89164),E=r(94294),m=r(68449),I=r(80184);const C=function(o){let{onLogin:e,setIsLoggedIn:r}=o;const[C,p]=(0,a.useState)(!1),R=((0,u.v9)(f.w),(0,s.s0)()),h=async()=>{try{const a=await(0,n.rh)(t.I8,t.Ap),s=n.hJ.credentialFromResult(a),i=s.accessToken,d=s.idToken;console.log("Access token",i),console.log("Id token",d);const u=a.user;if(console.log("Post login :",u),console.log("UserId",u.uid),console.log("Result ",a),a){var o;let e=await(null===(o=t.I8.currentUser)||void 0===o?void 0:o.getIdToken());console.log("token",e),localStorage.setItem("authToken",e)}e({UserId:u.uid,email:u.email,isPremium:u.isPremium,displayName:u.displayName,WorkshopCreated:u.WorkshopCreated,WorkshopEnrolled:u.WorkshopEnrolled,CreatorMode:!1,photoURL:u.photoURL},u),r(!0),await(async o=>{try{const e=(0,l.JU)(t.db,c.Ul.USER,o.uid);(await(0,l.QT)(e)).exists()?console.log("User there"):(console.log("No such document!"),await(0,l.pl)((0,l.JU)(t.db,c.Ul.USER,o.uid),{Name:o.displayName,Email:o.email,DoB:null,UserId:o.uid,WorkshopCreated:[],WorkshopEnrolled:[],Cart:[],CreatorMode:!1,KycIdList:{},StudioCreated:[],premiumTill:!1,TransactionIDs:[],recentlyWatched:{0:"",1:"",2:"",3:"",4:""}}),console.log("User added successfully"));const r=(0,l.JU)(t.db,c.Ul.USER,o.uid),a=await(0,l.QT)(r);localStorage.setItem("userDetails",JSON.stringify({UserId:o.uid,email:o.email,isPremium:a.data().isPremium,displayName:a.data().displayName,WorkshopCreated:a.data().WorkshopCreated,WorkshopEnrolled:a.data().WorkshopEnrolled}))}catch(e){console.error("Error adding user: ",e)}})(u),await(0,m.oM)(u.uid),R("/")}catch(a){a.code,a.message;console.log("Invalid username or password"),p(!0)}};return(0,I.jsx)(g.Z,{fluid:!0,className:"custom-container-main",children:(0,I.jsx)(i.Z,{children:(0,I.jsx)(d.Z,{xs:12,md:12,children:(0,I.jsx)("div",{children:(0,I.jsx)("form",{className:"custom-login-form",onSubmit:o=>{o.preventDefault(),h()},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"15px 0"},children:(0,I.jsxs)(E.Z,{type:"submit",style:{backgroundColor:"#D9D9D9",color:"#000",borderRadius:"6px",textTransform:"none",border:"1px solid #777",padding:"8px 16px"},children:[(0,I.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Icon",style:{marginRight:"10px",height:"20px"}}),"Sign In with Google"]})})})})})})}},83708:(o,e,r)=>{r.d(e,{A3:()=>E,DM:()=>i,QP:()=>m,RY:()=>d,Rb:()=>g,Ul:()=>f,i0:()=>n,lt:()=>u,n$:()=>t,uM:()=>c,zq:()=>l});var a=r(59135),s=r(80184);const t={SUBMITTED:"Submitted",UNDER_REVIEW:"Under Review",REVIEWED:"Reviewed",VERIFIED:"Verified",VERIFICATION_FAILED:"Verification Failed"},n={DRAFT_STUDIOS:"DraftStudios",DRAFT_WORKSHOPS:"DraftWorkshops",DRAFT_OPEN_CLASSES:"DraftOpenClasses",DRAFT_COURSES:"DraftCourses"},l={ALL:"All",BEGINNERS:"Beginner",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced"},c={PROD:"https://nrityaserver-2b241e0a97e5.herokuapp.com/",LOCAL:"http://127.0.0.1:8000/"},i={GREEN:{backgroundColor:"#28a745",color:"#fff"},BLUE:{backgroundColor:"#007bff",color:"#fff"},YELLOW:{backgroundColor:"#ffc107",color:"#000"},RED:{backgroundColor:"#dc3545",color:"#fff"},PURPLE:{backgroundColor:"#6f42c1",color:"#fff"},ORANGE:{backgroundColor:"#fd7e14",color:"#fff"},TEAL:{backgroundColor:"#20c997",color:"#fff"},PINK:{backgroundColor:"#e83e8c",color:"#fff"},GRAY:{backgroundColor:"#6c757d",color:"#fff"},LIGHTBLUE:{backgroundColor:"#17a2b8",color:"#fff"},DARKBLUE:{backgroundColor:"#343a40",color:"#fff"},CYAN:{backgroundColor:"#00bcd4",color:"#fff"},INDIGO:{backgroundColor:"#6610f2",color:"#fff"},LIME:{backgroundColor:"#cddc39",color:"#000"},AMBER:{backgroundColor:"#ffca28",color:"#000"},BROWN:{backgroundColor:"#795548",color:"#fff"},LIGHTGREEN:{backgroundColor:"#8bc34a",color:"#000"},DEEPPURPLE:{backgroundColor:"#673ab7",color:"#fff"},DEEPORANGE:{backgroundColor:"#ff5722",color:"#fff"},BLACK:{backgroundColor:"#000000",color:"#fff"},WHITE:{backgroundColor:"#ffffff",color:"#000"},SILVER:{backgroundColor:"#c0c0c0",color:"#000"},GOLD:{backgroundColor:"#ffd700",color:"#000"},NAVY:{backgroundColor:"#001f3f",color:"#fff"},OLIVE:{backgroundColor:"#3d9970",color:"#fff"}},d={[l.ALL]:i.GREEN,[l.BEGINNERS]:i.BLUE,[l.INTERMEDIATE]:i.YELLOW,[l.ADVANCED]:i.RED},u=[i.PURPLE,i.ORANGE,i.TEAL,i.LIME],f={USER:"User",USER_KYC:"UserKyc",ADMIN:"Admin",REVIEWS:"Reviews",TRANSACTIONS:"Transactions",STUDIO:"Studio",INSTRUCTORS:"Instructors",FREE_TRIAL_BOOKINGS:"FreeTrialBookings",WORKSHOPS:"Workshops",OPEN_CLASSES:"OpenClasses",COURSES:"Courses",BOOKINGS:"Bookings"},g={STUDIOIMAGES:"StudioImages",STUDIOICON:"StudioIcon",STUDIOANNOUNCEMENTS:"StudioAnnouncements",USERIMAGE:"UserImage",INSTRUCTORIMAGES:"InstructorImages",WORKSHOPICON:"WorkshopIcon",WORKSHOPIMAGES:"WorkshopImages",OPENCLASSICON:"OpenClassIcon",COURSEICON:"CourseIcon",CREATORS_KYC_DOCUMENTS:"CreatorKycDocuments"},E="https://nrityaserver-2b241e0a97e5.herokuapp.com/",m={AC:(0,s.jsx)(a.l51,{}),"Free Wifi":(0,s.jsx)(a._0,{}),"RO Water":(0,s.jsx)(a.EXY,{}),Toilet:(0,s.jsx)(a.Iev,{}),"Power Backup":(0,s.jsx)(a.eKD,{}),"Fire Extinguisher":(0,s.jsx)(a.Ybg,{}),"First Aid Kit":(0,s.jsx)(a.FZx,{}),"CCTV Camera":(0,s.jsx)(a.KoQ,{}),"Card Payment":(0,s.jsx)(a.ypE,{}),"Parking Space":(0,s.jsx)(a.mxg,{})}},68449:(o,e,r)=>{r.d(e,{FV:()=>R,Km:()=>E,Ld:()=>d,Us:()=>i,XG:()=>h,Xt:()=>g,eg:()=>p,gv:()=>u,ih:()=>m,oM:()=>c,qS:()=>I,to:()=>f,xR:()=>C});var a=r(12481),s=r(10159),t=r(30276),n=r(83708),l=r(644);const c=async o=>{console.log("creatorMode uid",o);try{const e=(0,a.JU)(s.db,n.Ul.USER,o),r=await(0,a.QT)(e);if(r.exists())if(null!=r.data()){const o=r.data().CreatorMode;console.log("setCreatorMode: Is User a creator?",o),l.Z.setItem("CreatorMode",o)}else console.log("userSnap.data() null");else console.log("User not found")}catch(e){console.log(" error",e)}},i=async(o,e)=>{console.log("Debug ",`${o}/${e}`);const r=`${o}/${e}`,a=(0,t.iH)(s.tO,r);try{const o=await(0,t.aF)(a);if(o.items.length>0){const e=o.items[0],r=await(0,t.Jt)(e);return console.log("Debug URL:",r),r}return console.log("Debug No files found in the folder."),null}catch(n){return console.error("Error getting image URL:",n),null}},d=async(o,e)=>{const r=(0,a.JU)(s.db,o,e),t=await(0,a.QT)(r);return t.exists()?t.data():null},u=async(o,e,r)=>{const t=(0,a.JU)(s.db,o,e);return await(0,a.pl)(t,r,{merge:!0}),r},f=async(o,e,r)=>{const t=(0,a.JU)(s.db,o,e);return await(0,a.r7)(t,{isPhoneNumberVerified:!0,phoneNumber:r}),!0},g=async(o,e,r)=>{const t=(0,a.JU)(s.db,o,e);return await(0,a.r7)(t,r),{id:e,...r}},E=async(o,e,r,t)=>{console.log("Hiii ",o,e,r,t);const n=(0,a.IO)((0,a.hJ)(s.db,o),(0,a.ar)(e,r,t));return(await(0,a.Yp)(n)).data().count},m=async(o,e)=>{const r=`${o}/${e}`,a=(0,t.iH)(s.tO,r),n=await(0,t.aF)(a);await Promise.all(n.items.map((async o=>{await(0,t.oq)(o)})))},I=async(o,e,r)=>{const a=`${o}/${e}/${r}`,n=(0,t.iH)(s.tO,a),l=await(0,t.aF)(n);await Promise.all(l.items.map((async o=>{await(0,t.oq)(o)})))},C=async function(o,e,r,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const l=e.length;let c=0;await Promise.all(e.map((async e=>{let i=`${o}/${r}/${e.filename}`;n&&(i=`${o}/${r}/${n}/${e.filename}`);const d=(0,t.iH)(s.tO,i);await(0,t.oq)(d),c+=1,a(c/l*100)})))},p=async function(o,e,r,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;console.log(o,r);const l=e.length;let c=0;await Promise.all(e.map((async e=>{let i=`${o}/${r}`;n&&(i=`${o}/${r}/${n}`);const d=(0,t.iH)(s.tO,`${i}/${e.file.name}`);await(0,t.KV)(d,e.file),c+=1,a(c/l*100)})))},R=async function(o,e,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=`${o}/${r}`;a&&(c=`${o}/${r}/${a}`),console.log(e,e.name);const i=(0,t.iH)(s.tO,`${c}/${e.name}`),d=(0,t.B0)(i,e);d.on("state_changed",(o=>{const e=o.totalBytes,r=o.bytesTransferred,a=e>0?(r/e*100).toFixed(2):-1;switch(n(a),console.log("Upload is "+a+"% done"),o.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(o=>{o.code}),(()=>{(0,t.Jt)(d.snapshot.ref).then((o=>{console.log("File available at",o),l(o)}))}))},h=async o=>{const e=`${o}`,r=(0,t.iH)(s.tO,e);try{const o=await(0,t.aF)(r);return await Promise.all(o.items.map((async o=>{const e=await(0,t.Jt)(o);return{id:o.name,filename:o.name,fileURL:e}})))}catch(a){throw console.error("Error retrieving images:",a),a}}}}]);
//# sourceMappingURL=8393.31b3ea64.chunk.js.map