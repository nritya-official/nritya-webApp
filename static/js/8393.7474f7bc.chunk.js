"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[8393],{68393:(o,e,t)=>{t.r(e),t.d(e,{default:()=>w});var a=t(72791),n=t(57689),c=t(10159),s=t(98255),r=t(12481),l=t(83708),i=t(89743),d=t(2677),u=t(59434),m=t(60717),g=t(89164),h=t(94294),p=t(68449),f=t(18406),y=t(80184);const w=function(o){let{onLogin:e,setIsLoggedIn:t}=o;const[w,b]=(0,a.useState)(!1),U=((0,u.v9)(m.w),(0,n.s0)()),x=async()=>{try{const a=await(0,s.rh)(c.I8,c.Ap),n=s.hJ.credentialFromResult(a),i=n.accessToken,d=n.idToken;console.log("Access token",i),console.log("Id token",d);const u=a.user;if(console.log("Post login :",u),console.log("UserId",u.uid),console.log("Result ",a),a){var o;let e=await(null===(o=c.I8.currentUser)||void 0===o?void 0:o.getIdToken());console.log("token",e),localStorage.setItem("authToken",e)}e({UserId:u.uid,email:u.email,isPremium:u.isPremium,displayName:u.displayName,WorkshopCreated:u.WorkshopCreated,WorkshopEnrolled:u.WorkshopEnrolled,CreatorMode:!1,photoURL:u.photoURL},u),t(!0),await(async o=>{try{const e=(0,r.JU)(c.db,l.Ul.USER,o.uid);if((await(0,r.QT)(e)).exists())console.log("User there");else{console.log("No such document!");const e={Name:o.displayName,Email:o.email,DoB:null,UserId:o.uid,WorkshopCreated:[],WorkshopEnrolled:[],Cart:[],CreatorMode:!1,KycIdList:{},StudioCreated:[],premiumTill:!1,TransactionIDs:[],recentlyWatched:{0:"",1:"",2:"",3:"",4:""}},t=o.email,a={user_id:o.uid},n=await(0,f.qC)(e,l.Ul.USER,t,a);n.ok?console.log("User added successfully"):console.error(n)}const t=(0,r.JU)(c.db,l.Ul.USER,o.uid),a=await(0,r.QT)(t);localStorage.setItem("userDetails",JSON.stringify({UserId:o.uid,email:o.email,isPremium:a.data().isPremium,displayName:a.data().displayName,WorkshopCreated:a.data().WorkshopCreated,WorkshopEnrolled:a.data().WorkshopEnrolled}))}catch(e){console.error("Error adding user: ",e)}})(u),await(0,p.oM)(u.uid),U("/")}catch(a){a.code,a.message;console.log("Invalid username or password"),b(!0)}};return(0,y.jsx)(g.Z,{fluid:!0,className:"custom-container-main",children:(0,y.jsx)(i.Z,{children:(0,y.jsx)(d.Z,{xs:12,md:12,children:(0,y.jsx)("div",{children:(0,y.jsx)("form",{className:"custom-login-form",onSubmit:o=>{o.preventDefault(),x()},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"15px 0"},children:(0,y.jsxs)(h.Z,{type:"submit",style:{backgroundColor:"#D9D9D9",color:"#000",borderRadius:"6px",textTransform:"none",border:"1px solid #777",padding:"8px 16px"},children:[(0,y.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Icon",style:{marginRight:"10px",height:"20px"}}),"Sign In with Google"]})})})})})})}},68449:(o,e,t)=>{t.d(e,{FV:()=>x,Km:()=>f,Ld:()=>m,Us:()=>u,XG:()=>k,Xt:()=>p,eg:()=>U,gG:()=>d,gY:()=>i,gv:()=>g,ih:()=>y,oM:()=>l,qS:()=>w,to:()=>h,xR:()=>b});var a=t(12481),n=t(10159),c=t(30276),s=t(83708),r=t(644);const l=async o=>{const e=s.A3,t="".concat(e,"crud/getUserMode/").concat(o);try{const o=await fetch(t),e=await o.json();if(e.success){let o=!1;!0===e.data&&(o=!0),r.Z.setItem("CreatorMode",o)}else console.log("Error: ",e.message||"Unknown error")}catch(a){console.log("Error fetching user mode: ",a),r.Z.setItem("CreatorMode",!1)}},i=async(o,e,t)=>{const a=s.A3;try{const n="".concat(a,"crud/").concat(o,"/").concat(e,"/");console.log(n);const c=await fetch(n),s=await c.json();s.success?t(s.data):console.error("Error fetching ".concat(e,":"),s.error)}catch(n){console.error("Error fetching ".concat(e,":"),n)}},d=async o=>(await l(o),await(async()=>{try{const o=r.Z.getItem("CreatorMode");return console.log("getCreatorMode ",o),o||!1}catch(o){return console.log(" error"),!1}})()),u=async(o,e)=>{console.log("Debug ","".concat(o,"/").concat(e));const t="".concat(o,"/").concat(e),a=(0,c.iH)(n.tO,t);try{const o=await(0,c.aF)(a);if(o.items.length>0){const e=o.items[0],t=await(0,c.Jt)(e);return console.log("Debug URL:",t),t}return console.log("Debug No files found in the folder."),null}catch(s){return console.error("Error getting image URL:",s),null}},m=async(o,e)=>{const t=(0,a.JU)(n.db,o,e),c=await(0,a.QT)(t);return c.exists()?c.data():null},g=async(o,e,t)=>{const c=(0,a.JU)(n.db,o,e);return await(0,a.pl)(c,t,{merge:!0}),t},h=async(o,e,t)=>{const c=(0,a.JU)(n.db,o,e);return await(0,a.r7)(c,{isPhoneNumberVerified:!0,phoneNumber:t}),!0},p=async(o,e,t)=>{const c=(0,a.JU)(n.db,o,e);return await(0,a.r7)(c,t),{id:e,...t}},f=async(o,e,t,c)=>{console.log("Hiii ",o,e,t,c);const s=(0,a.IO)((0,a.hJ)(n.db,o),(0,a.ar)(e,t,c));return(await(0,a.Yp)(s)).data().count},y=async(o,e)=>{const t="".concat(o,"/").concat(e),a=(0,c.iH)(n.tO,t),s=await(0,c.aF)(a);await Promise.all(s.items.map((async o=>{await(0,c.oq)(o)})))},w=async(o,e,t)=>{const a="".concat(o,"/").concat(e,"/").concat(t),s=(0,c.iH)(n.tO,a),r=await(0,c.aF)(s);await Promise.all(r.items.map((async o=>{await(0,c.oq)(o)})))},b=async function(o,e,t,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const r=e.length;let l=0;await Promise.all(e.map((async e=>{let i="".concat(o,"/").concat(t,"/").concat(e.filename);s&&(i="".concat(o,"/").concat(t,"/").concat(s,"/").concat(e.filename));const d=(0,c.iH)(n.tO,i);await(0,c.oq)(d),l+=1,a(l/r*100)})))},U=async function(o,e,t,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;console.log(o,t);const r=e.length;let l=0;await Promise.all(e.map((async e=>{let i="".concat(o,"/").concat(t);s&&(i="".concat(o,"/").concat(t,"/").concat(s));const d=(0,c.iH)(n.tO,"".concat(i,"/").concat(e.file.name));await(0,c.KV)(d,e.file),l+=1,a(l/r*100)})))},x=async function(o,e,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,l="".concat(o,"/").concat(t);a&&(l="".concat(o,"/").concat(t,"/").concat(a)),console.log(e,e.name);const i=(0,c.iH)(n.tO,"".concat(l,"/").concat(e.name)),d=(0,c.B0)(i,e);d.on("state_changed",(o=>{const e=o.totalBytes,t=o.bytesTransferred,a=e>0?(t/e*100).toFixed(2):-1;switch(s(a),console.log("Upload is "+a+"% done"),o.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(o=>{o.code}),(()=>{(0,c.Jt)(d.snapshot.ref).then((o=>{console.log("File available at",o),r(o)}))}))},k=async o=>{const e="".concat(o),t=(0,c.iH)(n.tO,e);try{const o=await(0,c.aF)(t);return await Promise.all(o.items.map((async o=>{const e=await(0,c.Jt)(o);return{id:o.name,filename:o.name,fileURL:e}})))}catch(a){throw console.error("Error retrieving images:",a),a}}},2677:(o,e,t)=>{t.d(e,{Z:()=>i});var a=t(41418),n=t.n(a),c=t(72791),s=t(10162),r=t(80184);const l=c.forwardRef(((o,e)=>{const[{className:t,...a},{as:c="div",bsPrefix:l,spans:i}]=function(o){let{as:e,bsPrefix:t,className:a,...c}=o;t=(0,s.vE)(t,"col");const r=(0,s.pi)(),l=(0,s.zG)(),i=[],d=[];return r.forEach((o=>{const e=c[o];let a,n,s;delete c[o],"object"===typeof e&&null!=e?({span:a,offset:n,order:s}=e):a=e;const r=o!==l?"-".concat(o):"";a&&i.push(!0===a?"".concat(t).concat(r):"".concat(t).concat(r,"-").concat(a)),null!=s&&d.push("order".concat(r,"-").concat(s)),null!=n&&d.push("offset".concat(r,"-").concat(n))})),[{...c,className:n()(a,...i,...d)},{as:e,bsPrefix:t,spans:i}]}(o);return(0,r.jsx)(c,{...a,ref:e,className:n()(t,!i.length&&l)})}));l.displayName="Col";const i=l},89743:(o,e,t)=>{t.d(e,{Z:()=>i});var a=t(41418),n=t.n(a),c=t(72791),s=t(10162),r=t(80184);const l=c.forwardRef(((o,e)=>{let{bsPrefix:t,className:a,as:c="div",...l}=o;const i=(0,s.vE)(t,"row"),d=(0,s.pi)(),u=(0,s.zG)(),m="".concat(i,"-cols"),g=[];return d.forEach((o=>{const e=l[o];let t;delete l[o],null!=e&&"object"===typeof e?({cols:t}=e):t=e;const a=o!==u?"-".concat(o):"";null!=t&&g.push("".concat(m).concat(a,"-").concat(t))})),(0,r.jsx)(c,{ref:e,...l,className:n()(a,i,...g)})}));l.displayName="Row";const i=l}}]);
//# sourceMappingURL=8393.7474f7bc.chunk.js.map