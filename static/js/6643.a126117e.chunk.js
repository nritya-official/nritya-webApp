"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[6643],{81018:(e,t,l)=>{l.d(t,{Z:()=>y});var a=l(72791),o=l(6429),s=l.n(o),n=l(30276),r=l(10159),i=l(59434),c=l(60717),d=l(68449),u=l(57621),h=l(13400),p=l(39504),m=l(27247),x=l(75424),g=l(83708),v=l(56510),b=l(80184);const j=(0,a.forwardRef)(((e,t)=>{let{entityId:l,storageFolder:o,title:j,maxImageCount:y=10,minImageCount:f,updateMode:S,disable:C}=e;const{setIsLoading:w}=(0,v.U)(),Z=(0,x.D)(),k=(0,a.useRef)(null),[I,N]=(0,a.useState)([]),[E,O]=(0,a.useState)([]),[D,L]=(0,a.useState)([]),P=(0,i.v9)(c.w),[U,A]=(0,a.useState)(-1),[B,T]=(0,a.useState)(-1),[J,M]=(0,a.useState)(!1);console.log("Kyc enitity id ",l,C);const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const l=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]};(0,a.useEffect)((()=>{l&&_(l)}),[l]),(0,a.useEffect)((()=>{if(y&&I.length>y){const e=I.slice(0,y);alert("Exceeded maxImageCount, keeping first ".concat(y," files.")),k.current.value=null,N(e)}}),[I,y]);const R=(e,t)=>{const l=e.map((e=>e.id)),a=t.map((e=>e.id));return{imagesToDelete:t.filter((e=>!l.includes(e.id))),newImages:e.filter((e=>!a.includes(e.id)))}},_=async e=>{N([]),L([]);try{const t="".concat(o,"/").concat(e);console.log(t);const l=(0,n.iH)(r.tO,t),a=await(0,n.aF)(l),s=await Promise.all(a.items.map((async e=>{const t=await(0,n.Jt)(e);return{id:e.name,filename:e.name,fileURL:t}})));O(s),N(s)}catch(t){console.error("Error fetching user images:",t)}};return(0,a.useImperativeHandle)(t,(()=>({isValid:()=>0===f||J}))),(0,b.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,b.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"card mt-5",children:(0,b.jsxs)("div",{className:"card-body",style:{backgroundColor:P?"#333333":"white"},children:[(0,b.jsxs)("div",{className:"kb-data-box",children:[(0,b.jsx)("div",{className:"kb-modal-data-title",children:(0,b.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,b.jsx)("h4",{children:j}),(0,b.jsxs)("p",{children:["Max no of image(s):",y," ",o===g.Rb.STUDIOIMAGES&&(0,b.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,b.jsxs)("div",{style:{backgroundColor:P?"#333333":"white"},children:[(0,b.jsx)("div",{className:"kb-file-upload",children:(0,b.jsx)("div",{className:"file-upload-box",children:(0,b.jsx)("input",{ref:k,type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const t=Array.from(e.target.files),l=[];t.forEach((e=>{const a=new FileReader;a.onloadend=()=>{l.push({id:s().generate(),filename:e.name,filetype:e.type,fileimage:a.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:F(e.size),file:e}),l.length===t.length&&(N((e=>[...e,...l])),L(l),k.current.value=null)},a.readAsDataURL(e)}))},multiple:!0})})}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"kb-attach-box mb-3",children:(0,b.jsx)("div",{className:"row",children:l&&I.length>0?I.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,b.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,b.jsx)(h.Z,{"aria-label":"delete",disabled:C,onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this image?")&&N((e=>e.filter((e=>e.id!==t)))));var t},style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,b.jsx)(m.Z,{style:{color:"ff0000"}})})]}):(0,b.jsx)(p.Z,{children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("p",{children:"No images selected"})})})}),(0,b.jsx)("div",{className:"kb-buttons-box",children:(0,b.jsx)("button",{type:"button",className:"btn div-submit",style:{backgroundColor:P?"#892CDC":"black",color:"white"},onClick:async()=>{if(l){A(-1),T(-1);try{if(w(!0),1===y&&I.length>=f)await(0,d.ih)(o,l),await(0,d.eg)(o,D,l,T),Z("Image uploaded successfully","success"),M(!0);else{const{imagesToDelete:e,newImages:t}=R(I,E);if(f&&t.length<f)return void Z("Minimum ".concat(f," image(s) are required"),"error");e.length>0&&(await(0,d.xR)(o,e,l,A),Z("Image(s) deleted successfully","success")),t.length>0&&(await(0,d.eg)(o,t,l,T),Z("Image(s) uploaded successfully","success")),M(!0)}k.current.value=null}catch(e){M(!1),console.error("Error uploading/deleting images:",e)}finally{w(!1)}}else alert("No studio selected")},disabled:C,children:"Image Upload"})})]}),I.length>0&&(0,b.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("hr",{}),I.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,b.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),U>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:P?"#fff":"#000"},children:["Deleting images... ",U.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:U,max:"100",style:{color:P?"#fff":"#000"},children:[U.toFixed(2),"%"]})]}),B>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:P?"#fff":"#000"},children:["Uploading images... ",B.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:B,max:"100",style:{color:P?"#fff":"#000"},children:[B.toFixed(2),"%"]})]})]})})})})})}));j.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const y=j},707:(e,t,l)=>{l.d(t,{Z:()=>D});l(11518);var a=l(72791),o=l(92552),s=l(84654),n=l(28658),r=l(69597),i=l(83168),c=l(88447),d=l(16029),u=l(61889),h=l(20890),p=l(94294),m=l(13400),x=l(36314),g=l(59434),v=l(83708),b=l(68449),j=l(60717),y=l(97892),f=l.n(y),S=l(10159),C=l(12481),w=l(75424),Z=l(49071),k=l(10884),I=l(93819),N=l(80184);function E(e){var t,l,o,s,n,r;let{open:i,handleClose:x,dataItem:b,activateOpenClass:y,deactivateOpenClass:E,actionsAllowed:O}=e;const D=(0,w.D)(),L=(0,g.v9)(j.w),[P,U]=(0,a.useState)(!1),[A,B]=(0,a.useState)(null),T=null===(t=JSON.parse(localStorage.getItem("userInfo")))||void 0===t?void 0:t.UserId,J=b.UserId===T;(0,a.useEffect)((()=>{(async()=>{try{const e=(0,C.JU)(S.db,"User",T),t=await(0,C.QT)(e);t.exists()&&B(t.data())}catch(e){console.log(" error")}})()}),[]);const M=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),F=null===A||void 0===A||null===(l=A.BookedOpenClasses)||void 0===l||null===(o=l.includes)||void 0===o?void 0:o.call(l,null===b||void 0===b?void 0:b.id),R="".concat(window.location.host,"/nritya-webApp#/openClass/").concat(b.id);return(0,N.jsx)(c.Z,{open:i,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,N.jsxs)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:L?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:L?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,N.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:3,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,lg:8,sx:{minHeight:"300px"},children:(0,N.jsx)("img",{src:b.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,N.jsxs)(d.Z,{sx:{height:"100%",bgcolor:L?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,N.jsxs)(d.Z,{sx:{flex:1},children:[(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:f()(b.date).format("LL")}),(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:b.time}),(0,N.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:L?"white":"black"},children:b.venue})]}),(0,N.jsx)(d.Z,{sx:{mt:"2rem",textAlign:"right"},children:!O&&!J&&T&&(0,N.jsx)(p.Z,{variant:"outlined",onClick:async()=>{try{U(!0),(0,C.ET)((0,C.hJ)(S.db,v.Ul.BOOKINGS),{StudioId:b.StudioId,OpenClassId:b.id,UserId:T,bookingDate:Date.now()});const e=(0,C.JU)(S.db,"User",T),t=await(0,C.QT)(e);t.exists()&&null!=t.data()&&await(0,C.r7)(e,{BookedOpenClasses:[...t.data().BookedOpenClasses||[],b.id]}),B((e=>({...e,BookedOpenClasses:[...(null===e||void 0===e?void 0:e.BookedOpenClasses)||[],b.id]}))),D("Open class booked","success")}catch(e){console.error(e),D((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{U(!1)}},disabled:F||P,sx:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:F?"Booked":"Book Now"})})]}),!O&&!J&&T&&(0,N.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:L?"white":"black",textAlign:"center"},children:"Book your spot"})]}),(0,N.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,N.jsxs)(d.Z,{sx:{display:"flex",columnGap:2},children:[(0,N.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:L?"white":"black"},children:[b.openClassName||"",b.danceStyles.map((e=>" | ".concat(e)))]}),(0,N.jsx)(I.Z,{shareUrl:R})]}),(0,N.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:L?"white":"black"},children:[(0,N.jsxs)("span",{children:["By ",(null===(s=b.studioDetails)||void 0===s?void 0:s.studioName)||""]}),b.studioDetails&&(null===(n=b.studioDetails)||void 0===n?void 0:n.whatsappNumber)&&(0,N.jsx)(m.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(b.studioDetails.whatsappNumber,"?text=").concat(M),children:(0,N.jsx)("img",{src:Z,alt:"Whatsapp call",style:{width:30,height:28}})}),b.studioDetails&&(null===(r=b.studioDetails)||void 0===r?void 0:r.mobileNumber)&&(0,N.jsx)(m.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(b.studioDetails.mobileNumber),children:(0,N.jsx)("img",{src:k,alt:"Phone call",style:{width:30,height:28}})})]}),(0,N.jsx)("div",{style:{color:L?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:b.description||"Open Class Description"}})]})]}),(0,N.jsxs)(d.Z,{sx:{mt:"1rem",textAlign:"right"},children:[O&&J&&(0,N.jsx)(p.Z,{onClick:()=>null!==b&&void 0!==b&&b.active?E(null===b||void 0===b?void 0:b.id):y(null===b||void 0===b?void 0:b.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==b&&void 0!==b&&b.active?"Deactivate":"Activate"}),(0,N.jsx)(p.Z,{onClick:x,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function O(e){var t;let{dataItem:l,activateOpenClass:c,deactivateOpenClass:u,actionsAllowed:h}=e;const p=(0,g.v9)(j.w),[m,y]=(0,a.useState)(null),[f,S]=(0,a.useState)(!1),C=l.id;(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,b.Us)(v.Rb.OPENCLASSICON,C);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[l.id]);const w={backgroundColor:p?"#444":"white",padding:"0px",color:p?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(s.Z,{variant:"solid",sx:{...w,"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"},onClick:()=>S(!0),children:[(0,N.jsxs)(o.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,N.jsx)("img",{src:m,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,N.jsx)(x.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:l&&l.danceStyles?l.danceStyles.slice(0,3).map(((e,t)=>(0,N.jsx)(r.Z,{color:t%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},t))):(0,N.jsx)(r.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,N.jsxs)(n.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,N.jsxs)(d.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:p?"white":"black",extDecoder:"one"},children:[(0,N.jsx)("span",{children:l&&l.openClassName?l.openClassName:""}),!(null!==l&&void 0!==l&&l.active)&&(0,N.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,N.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(t=l.studioDetails)&&void 0!==t&&t.studioName?l.studioDetails.studioName:""]}),(0,N.jsx)(i.ZP,{style:{marginTop:10,color:p?"white":"black"},level:"body-xs",noWrap:!0,children:l.venue?l.venue:""}),(0,N.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",children:[l.date||""," | ",l.time||""]})]})]}),(0,N.jsx)(E,{dataItem:{...l,imageUrl:m},open:f,handleClose:()=>S(!1),activateOpenClass:c,deactivateOpenClass:u,actionsAllowed:h})]})}const D=e=>{let{dataList:t,deleteOpenClass:l,actionsAllowed:a,activateOpenClass:o,deactivateOpenClass:s}=e;return(0,N.jsx)("div",{className:"horizontal-scroll-wrapper",children:t.map(((e,t)=>(0,N.jsx)(O,{dataItem:e,activateOpenClass:o,deactivateOpenClass:s,actionsAllowed:a},e.id)))})}},26073:(e,t,l)=>{l.d(t,{Z:()=>c});l(72791);var a=l(89743),o=l(2677),s=l(95313),n=l(59434),r=l(60717),i=l(80184);const c=e=>{var t;let{defaultTime:l,handleSelect:c}=e;const d=l.split("-")[0].trim(),u=null===(t=l.split("-")[1])||void 0===t?void 0:t.trim(),h=(0,n.v9)(r.w),p=e=>{const t=(()=>{const e=[];let t=[],l=[];for(let a=0;a<24;a++)for(let e=0;e<60;e+=30){const o=e.toString().padStart(2,"0");if(a<12){const e=0===a?12:a;t.push("".concat(e,":").concat(o," AM"))}else{const e=12===a?12:a%12;l.push("".concat(e,":").concat(o," PM"))}}for(let a=0;a<t.length||a<l.length;a++)a<t.length&&e.push(t[a]),a<l.length&&e.push(l[a]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),t.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)(s.Z.Group,{children:[(0,i.jsx)(s.Z.Label,{children:"Start Time"}),(0,i.jsx)(s.Z.Control,{as:"select",onChange:e=>c(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(d)})]})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(s.Z.Group,{children:[(0,i.jsx)(s.Z.Label,{children:"End Time"}),(0,i.jsx)(s.Z.Control,{as:"select",onChange:e=>c(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(u)})]})})]})}},26643:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});var a=l(72791),o=l(10159),s=l(12481),n=l(83708),r=l(59434),i=l(60717),c=l(61224),d=l(43896),u=l(83449),h=l(47283),p=l(82851),m=l(16029),x=l(95313),g=l(89743),v=l(2677),b=l(94294),j=l(57482),y=l(81018),f=l(51650),S=l(5712),C=l(93006),w=l(67107),Z=l(44507),k=l(4708),I=l(26128),N=l(4560),E=l(24750),O=l(71652),D=l(97892),L=l.n(D),P=l(26073),U=l(75424),A=(l(82873),l(18406)),B=l(66770),T=l.n(B),J=(l(86009),l(763)),M=l(80184);const F=function(e){let{instructors:t,studioId:l,setOpenClass:c}=e;const d=(0,U.D)(),[u,h]=(0,a.useState)(""),p=(0,r.v9)(i.w),[m,D]=(0,a.useState)([]),[B,F]=(0,a.useState)([]),R=t.map((e=>"".concat(e.name," - ").concat(e.id))),_=f.W,[z,q]=(localStorage.getItem("filterLocation"),(0,a.useState)(!1)),[Y,H]=(0,a.useState)(""),[V,W]=(0,a.useState)(null),[G,K]=(0,a.useState)(""),[Q,$]=(0,a.useState)(""),[X,ee]=(0,a.useState)(L()(new Date)),[te,le]=(0,a.useState)(!1),[ae,oe]=(0,a.useState)(1),[se,ne]=(0,a.useState)(""),re=(0,w.Z)({palette:{mode:p?"dark":"light"}}),ie=e=>{e.reset(),F([]),D([]),W(null),H(""),K(""),$(""),ee(L()(new Date)),ne("")};return(0,a.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const x=(0,s.IO)((0,s.hJ)(o.db,n.i0.DRAFT_OPEN_CLASSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),g=await(0,s.PL)(x);if(g.empty){var a,r,i,c,d,u,h;await(0,s.ET)((0,s.hJ)(o.db,n.i0.DRAFT_OPEN_CLASSES),{openClassName:(null===(a=e.openClassName)||void 0===a?void 0:a.value)||"",capacity:(null===(r=e.capacity)||void 0===r?void 0:r.value)||0,description:se,danceStyles:B,instructors:m?null===m||void 0===m||null===(i=m.map)||void 0===i?void 0:i.call(m,(e=>{var t,l,a,o;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(a=l[1])||void 0===a||null===(o=a.trim)||void 0===o?void 0:o.call(a))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:V&&(null===V||void 0===V||null===(c=V.split)||void 0===c||null===(d=c.call(V,":"))||void 0===d||null===(u=d[1])||void 0===u||null===(h=u.trim)||void 0===h?void 0:h.call(u))||null,duration:Y,level:G,time:Q,date:X.format("YYYY-MM-DD")})}else{var p;let a=[];g.forEach((e=>{a.push({id:e.id,...e.data()})}));let o=a[0];e.openClassName.value=(null===o||void 0===o?void 0:o.openClassName)||"",e.capacity.value=(null===o||void 0===o?void 0:o.capacity)||0,ne((null===o||void 0===o?void 0:o.description)||""),F(null!==o&&void 0!==o&&null!==(p=o.danceStyles)&&void 0!==p&&p.length?o.danceStyles:[]),D(t.filter((e=>null===o||void 0===o?void 0:o.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const s=l.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===o||void 0===o?void 0:o.StudioId)));s>0&&W(l[s]),H((null===o||void 0===o?void 0:o.duration)||""),K((null===o||void 0===o?void 0:o.level)||""),$((null===o||void 0===o?void 0:o.time)||""),ee(L()((null===o||void 0===o?void 0:o.date)||Date.now()))}q(!0)}catch(x){console.error(x)}}()}),[]),(0,a.useEffect)((()=>{let e=null,t=null;return z&&async function(){const l=document.getElementById("addStudioForm");try{const a=(0,s.IO)((0,s.hJ)(o.db,n.i0.DRAFT_OPEN_CLASSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),r=await(0,s.PL)(a);if(!r.empty){let a=[];r.forEach((e=>{a.push({id:e.id,...e.data()})}));let i=a[0];const c=(0,s.JU)(o.db,n.i0.DRAFT_OPEN_CLASSES,i.id);e=setInterval((async()=>{try{var e,a,o,n,r,i,d;const h={openClassName:(null===(e=l.openClassName)||void 0===e?void 0:e.value)||"",capacity:(null===(a=l.capacity)||void 0===a?void 0:a.value)||0,description:se,danceStyles:B,instructors:m?null===m||void 0===m||null===(o=m.map)||void 0===o?void 0:o.call(m,(e=>{var t,l,a,o;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(a=l[1])||void 0===a||null===(o=a.trim)||void 0===o?void 0:o.call(a))||null})):null,StudioId:V&&(null===V||void 0===V||null===(n=V.split)||void 0===n||null===(r=n.call(V,":"))||void 0===r||null===(i=r[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:Y,level:G,time:Q,date:X.format("YYYY-MM-DD")};if((0,J.isEqual)(t,h))console.log("Nothing for Autosave to save");else try{await(0,s.r7)(c,h),t=h,console.log("Next AutoSave in",1e4)}catch(u){console.error(u)}}catch(u){console.error(u)}}),1e4)}}catch(a){console.error(a)}}(),()=>clearInterval(e)}),[z,B,m,V,Y,G,Q,X,se]),(0,a.useEffect)((()=>{if(p){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[p]),(0,M.jsxs)("div",{children:[1===ae&&(0,M.jsx)(x.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if((e=>{let t=!0;return e.openClassName.value&&e.capacity.value&&se&&null!==B&&void 0!==B&&B.length&&null!==m&&void 0!==m&&m.length&&V&&Y&&G&&Q&&X||(t=!1),t})(t))try{var l,a,r,i,u;const p=JSON.parse(localStorage.getItem("userInfo")).email,x={openClassName:e.target.openClassName.value,danceStyles:B,instructors:m?null===m||void 0===m||null===(l=m.map)||void 0===l?void 0:l.call(m,(e=>{var t,l,a,o;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(a=l[1])||void 0===a||null===(o=a.trim)||void 0===o?void 0:o.call(a))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:p,StudioId:V&&(null===V||void 0===V||null===(a=V.split)||void 0===a||null===(r=a.call(V,":"))||void 0===r||null===(i=r[1])||void 0===i||null===(u=i.trim)||void 0===u?void 0:u.call(i))||null,duration:Y,level:G,time:Q,date:X.format("YYYY-MM-DD"),capacity:e.target.capacity.value,description:se,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};le(!0);const g=p,v={entity_name:x.openClassName,time:x.time,date:x.date,StudioId:x.StudioId},b=await(0,A.qC)(x,n.Ul.OPEN_CLASSES,g,v);if(b.ok){const e=await b.json();h(e.id),c((t=>[...t,{id:e.id,...x}])),ie(t),(async()=>{const e=(0,s.IO)((0,s.hJ)(o.db,n.i0.DRAFT_OPEN_CLASSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=await(0,s.PL)(e);if(!t.empty){let e=[];t.forEach((t=>{e.push({id:t.id,...t.data()})}));let l=e[0];const a=(0,s.JU)(o.db,n.i0.DRAFT_OPEN_CLASSES,l.id);await(0,s.oe)(a)}})(),d("Open class successfully added.","success"),oe((e=>e+1))}}catch(p){console.error("Error adding open class: ",p),d((null===p||void 0===p?void 0:p.message)||"Something went wrong","error")}finally{le(!1)}else d("Please fill all the fields.","error")},style:{backgroundColor:p?"#202020":"",color:p?"white":"black"},children:(0,M.jsx)(x.Z.Group,{controlId:"formBasicAdd",children:(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Open Class Name"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"textarea",placeholder:"Enter open class name",name:"openClassName"})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:_,value:B,onChange:(e,t)=>{F(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:R,value:m,onChange:(e,t)=>{D(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:Y,onChange:(e,t)=>{H(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(v.Z,{md:6,children:(0,M.jsx)(P.Z,{defaultTime:Q||"12:00 PM - 01:00 PM",handleSelect:(e,t)=>{const[l,a]=Q.split(" - ");let o="".concat(l," - ").concat(a);null!==e&&(o="".concat(e," - ").concat(a)),null!==t&&(o="".concat(l," - ").concat(t)),$(o)}})}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Date"}),(0,M.jsx)(O._,{dateAdapter:E.y,children:(0,M.jsx)(N.C,{components:["DatePicker"],children:(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(I.M,{sx:{width:"100%"},value:X,onChange:e=>ee(e)})]})})})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Level"}),(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:G,onChange:(e,t)=>{K(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Studio"}),(0,M.jsxs)(Z.Z,{theme:re,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:l,value:V,onChange:(e,t)=>{W(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Youtube video link"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,M.jsx)("br",{}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Brief Description"}),(0,M.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:se,onChange:ne})]})}),(0,M.jsx)("hr",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(v.Z,{xs:6}),(0,M.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},type:"submit",disabled:te,children:"Next"})})]})]})})}),te&&(0,M.jsx)(j.Z,{}),2===ae&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.Z,{children:(0,M.jsx)(v.Z,{children:(0,M.jsx)(y.Z,{entityId:u,title:"Open Class Images",storageFolder:n.Rb.OPENCLASSICON,maxImageCount:1})})}),(0,M.jsx)(g.Z,{style:{margin:"1rem 0"},children:(0,M.jsx)(v.Z,{style:{textAlign:"right"},children:(0,M.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},onClick:()=>oe((e=>e-1)),children:"Done"})})})]})]})};const R=function(e){let{openClassId:t,instructors:l,studioId:c}=e;localStorage.getItem("filterLocation");const d=(0,U.D)(),[u,h]=(0,a.useState)(null),[p,m]=(0,a.useState)([]),D=f.W,[B,J]=(0,a.useState)([]),F=(0,r.v9)(i.w),[R,_]=(0,a.useState)(""),[z,q]=(0,a.useState)(""),[Y,H]=(0,a.useState)(""),[V,W]=(0,a.useState)(L()(new Date)),[G,K]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(""),X=l.map((e=>"".concat(e.name," - ").concat(e.id))),ee=(0,w.Z)({palette:{mode:F?"dark":"light"}}),[te,le]=(0,a.useState)(""),[ae,oe]=(0,a.useState)(null),se=e=>{e.reset(),J([]),m([]),h(null),_(""),q(""),H(""),W(L()(new Date)),oe(null),le(""),$("")};return(0,a.useEffect)((()=>{if(ae){const e=l.filter((e=>ae.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(m(e),ae&&ae.danceStyles&&J(ae.danceStyles),ae&&ae.duration&&_(ae.duration),ae&&ae.level&&q(ae.level),ae&&ae.time&&H(ae.time),ae&&ae.date&&W(L()(ae.date)),ae&&ae.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===ae.StudioId));h(c[e]||null)}$((null===ae||void 0===ae?void 0:ae.description)||"")}}),[ae]),(0,a.useEffect)((()=>{if(F){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[F]),(0,M.jsxs)("div",{style:{backgroundColor:F?"#202020":"",color:F?"white":"black"},children:[(0,M.jsx)("br",{}),(0,M.jsxs)(x.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if(te)if((e=>{let t=!0;return e.openClassName.value&&e.capacity.value&&Q&&null!==B&&void 0!==B&&B.length&&null!==p&&void 0!==p&&p.length&&u&&R&&z&&Y&&V||(t=!1),t})(t)){try{var l,a,o,s,r;const e={openClassName:t.openClassName.value,capacity:t.capacity.value,description:Q,danceStyles:B,instructors:p?null===p||void 0===p||null===(l=p.map)||void 0===l?void 0:l.call(p,(e=>{var t,l,a,o;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(a=l[1])||void 0===a||null===(o=a.trim)||void 0===o?void 0:o.call(a))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:u&&(null===u||void 0===u||null===(a=u.split)||void 0===a||null===(o=a.call(u,":"))||void 0===o||null===(s=o[1])||void 0===s||null===(r=s.trim)||void 0===r?void 0:r.call(s))||null,duration:R,level:z,time:Y,date:V.format("YYYY-MM-DD"),youtubeViedoLink:t.youtubeViedoLink.value};K(!0);const i=await(0,A.fP)(e,n.Ul.OPEN_CLASSES,te);i.ok?(se(t),d("Open class successfully updated.","success")):d("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating Open Class: ",i),d((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{K(!1)}document.getElementById("updateStudioForm").reset()}else d("Please fill all the fields.","error")},children:[(0,M.jsxs)(x.Z.Group,{controlId:"formBasicUpdate",children:[(0,M.jsx)(x.Z.Label,{children:"Id"}),(0,M.jsxs)(x.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:F?"#333333":"",color:F?"white":"black",height:"auto"},onChange:async e=>{e.preventDefault();const t=e.target.value.split(":").pop().trim();le(t);try{const e=await(0,s.QT)((0,s.JU)(o.db,n.Ul.OPEN_CLASSES,t));e.exists?oe(e.data()):oe(null)}catch(l){console.error("Error fetching Open Class data:",l,t)}},children:[(0,M.jsx)("option",{value:"",children:"Select a open class..."}),t&&t.length>0?t.map((e=>(0,M.jsx)("option",{value:e,children:e},e))):(0,M.jsx)("option",{value:"",children:"No open class yet!"})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(v.Z,{md:6,children:(0,M.jsx)(y.Z,{entityId:te,title:"Open class Images",storageFolder:n.Rb.OPENCLASSICON,maxImageCount:1})}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Open Class Name"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:ae?ae.openClassName:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"textarea",placeholder:"Enter open class name",name:"openClassName"}),(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:D,value:B,onChange:(e,t)=>{J(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]}),(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:X,value:p,onChange:(e,t)=>{m(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:R,onChange:(e,t)=>{_(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]}),(0,M.jsx)(v.Z,{md:6,children:(0,M.jsx)(P.Z,{defaultTime:Y||"00:00-00:00",handleSelect:(e,t)=>{const[l,a]=Y.split(" - ");let o="".concat(l," - ").concat(a);null!==e&&(o="".concat(e," - ").concat(a)),null!==t&&(o="".concat(l," - ").concat(t)),H(o)}})})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Date"}),(0,M.jsx)(O._,{dateAdapter:E.y,children:(0,M.jsx)(N.C,{components:["DatePicker"],children:(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(I.M,{sx:{width:"100%"},value:V,onChange:e=>W(e)})]})})})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Level"}),(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:z,onChange:(e,t)=>{q(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:ae&&void 0!==ae.capacity?ae.capacity:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Studio"}),(0,M.jsxs)(Z.Z,{theme:ee,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(S.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:c,value:u,onChange:(e,t)=>{h(t)},renderInput:e=>(0,M.jsx)(C.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Youtube video link"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:ae?ae.youtubeViedoLink:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]}),(0,M.jsxs)(v.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Brief Description"}),(0,M.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:Q,onChange:$})]})]}),(0,M.jsx)("hr",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(v.Z,{xs:6}),(0,M.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:F?"#892cdc":"black"},type:"submit",disabled:G,children:"Update Open Class"})})]})]})]}),G&&(0,M.jsx)(j.Z,{})]})]})};var _=l(707);const z=function(){const[e,t]=(0,a.useState)([]),[l,x]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),b=(0,r.v9)(i.w),[j,y]=(0,a.useState)([]),[f,S]=(0,a.useState)(!1),[C,w]=(0,a.useState)(-1),{currentUser:Z}=(0,c.a)(),[k,I]=a.useState("1");return(0,a.useEffect)((()=>{(async e=>{try{const e=(0,s.JU)(o.db,"User",Z.uid),t=await(0,s.QT)(e);t.exists()&&null!=t.data()&&(S(t.data().CreatorMode),w(t.data().isPremium))}catch(t){console.log(" error")}})()}),[f]),(0,a.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const t=(0,s.hJ)(o.db,n.Ul.INSTRUCTORS),l=(0,s.IO)(t,(0,s.ar)("createdBy","==",e)),a=await(0,s.PL)(l),r=[];a.forEach((e=>{r.push({id:e.id,name:e.data().name})})),y(r)})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(o.db,n.Ul.STUDIO),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),l=(await(0,s.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const t=e.data();return{id:e.id,...t}}));t(l.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(o.db,n.Ul.OPEN_CLASSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,s.PL)(e)).docs.filter((e=>e.data().openClassName)).map((e=>{const t=e.data();return{id:e.id,...t}})).map((async e=>{const t=(0,s.JU)(o.db,n.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),l=await(0,s.QT)(t);return{...e,studioDetails:l.data()}})),l=await Promise.all(t);localStorage.setItem("OpenCLassCreated",JSON.stringify(l)),x(l),v(l.map((e=>String(e.openClassName)+" :"+String(e.id))))})()}),[x]),(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("OpenClassCreated"))||[];x(e);const t=e.map((e=>"".concat(e.openClassName," : ").concat(e.id)));v(t)}),[v]),(0,M.jsxs)("div",{children:[(0,M.jsx)("br",{}),f?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(m.Z,{sx:{width:"100%",typography:"body1"},children:(0,M.jsxs)(u.ZP,{value:k,children:[(0,M.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,M.jsxs)(h.Z,{style:{color:b?"white":"black"},onChange:(e,t)=>{I(t)},"aria-label":"lab API tabs example",children:[(0,M.jsx)(d.Z,{style:{color:b?"white":"black"},label:"Add Open Class",value:"1"}),(0,M.jsx)(d.Z,{style:{color:b?"white":"black"},label:"Update Open Class",value:"2"})]})}),(0,M.jsx)(p.Z,{value:"1",children:(0,M.jsx)(F,{instructors:j,studioId:e,setOpenClass:x})}),(0,M.jsx)(p.Z,{value:"2",children:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(R,{instructors:j,openClassId:g,studioId:e})})})]})})}):"",l.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("h3",{style:{color:b?"white":"black"},children:"Your Open Classes:"}),(0,M.jsx)(_.Z,{dataList:l,activateOpenClass:async e=>{try{const t=(0,s.JU)(o.db,n.Ul.OPEN_CLASSES,e);await(0,s.r7)(t,{active:!0}),x((t=>t.map((t=>t.id===e?{...t,active:!0}:t))))}catch(t){console.error(t)}},deactivateOpenClass:async e=>{try{const t=(0,s.JU)(o.db,n.Ul.OPEN_CLASSES,e);await(0,s.r7)(t,{active:!1}),x((t=>t.map((t=>t.id===e?{...t,active:!1}:t))))}catch(t){console.error(t)}},actionsAllowed:!0})]})]})}},18406:(e,t,l)=>{l.d(t,{C9:()=>n,P9:()=>r,fP:()=>s,ie:()=>i,qC:()=>o});var a=l(83708);async function o(e,t,l,o){const s=a.A3,n=localStorage.getItem("authToken");try{const a=await fetch(s+"crud/newEntity/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({data:e,collection_name:t,notify:l,metadata:o})});if(!a.ok)throw console.log("Error in postData:",a),new Error("HTTP error! status: ".concat(a.status));return a}catch(r){throw console.error("Error in postData:",r),r}}async function s(e,t,l){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=a.A3,r="crud/updateEntity/".concat(l),i=localStorage.getItem("authToken");try{const l=await fetch(n+r,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({data:e,collection_name:t,notify:o,metadata:s})});if(!l.ok)throw console.log("Error in postData:",l),new Error("HTTP error! status: ".concat(l.status));return l}catch(c){throw console.error("Error in postData:",c),c}}const n=async e=>{const t="".concat(a.uM.CLOUD,"bookings/bookEntity/");try{const l=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,entityType:e.entityType,entityId:e.entityId,associatedStudioId:e.associatedStudioId,emailLearner:e.emailLearner,personsAllowed:e.personsAllowed,pricePerPerson:e.pricePerPerson})}),a=await l.json();return l.ok?(console.log("Booking successful:",a),a):(console.error("Booking failed:",a),a)}catch(l){return console.error("Error occurred while booking:",l),null}},r=e=>{if(console.log("MediaDisplay",e),!e)return null;const t=e.trim().match(/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([\w\-]+)/);let l=null;return t&&(l=t[1]),console.log("MediaDisplay",l),l},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,l,a]=e.split("-");return"".concat((e=>{const t=e%10,l=1===t&&"11"!==e?"st":2===t&&"12"!==e?"nd":3===t&&"13"!==e?"rd":"th";return"".concat(e).concat(l)})(a)," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(l)-1],", ").concat(t)}},11518:()=>{},10884:(e,t,l)=>{e.exports=l.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,t,l)=>{e.exports=l.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=6643.a126117e.chunk.js.map