"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[5297],{25297:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var l=r(72791),o=r(28949),a=r(89743),n=r(2677),s=r(95313),c=r(92592),i=r(43360),d=r(59434),h=r(60717),u=r(56355),x=r(12481),m=r(30276),p=r(83708),b=r(10159),g=r(18406),j=r(51650),y=r(5712),f=r(93006),k=r(67107),Z=r(44507),w=r(80184);const C=function(){const e=(0,d.v9)(h.w),[t,r]=(0,l.useState)(null),[o,x]=(0,l.useState)(null),[C,v]=(0,l.useState)([]),I=j.W,S=(0,k.Z)({palette:{mode:e?"dark":"light"}});return(0,w.jsxs)("div",{style:{backgroundColor:e?"#202020":"white",color:e?"white":"black"},children:[(0,w.jsx)(a.Z,{children:(0,w.jsx)(n.Z,{md:4,children:(0,w.jsx)("h1",{style:{backgroundColor:e?"#202020":"white",color:e?"white":"black",textTransform:"capitalize",textAlign:"center"},children:"Add Dance Teacher"})})}),(0,w.jsxs)(s.Z,{className:"mt-4",onSubmit:async e=>{var r;e.preventDefault(),console.log("Hi");let l=null;JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(l=JSON.parse(localStorage.getItem("userInfo")).UserId),l||(console.log("Created by not found"),alert("User not found"));const a=null===(r=JSON.parse(localStorage.getItem("userInfo")))||void 0===r?void 0:r.email;console.log(l);try{const r={name:e.target.name.value,danceStyles:(null===C||void 0===C?void 0:C.join(","))||"",experience:e.target.experience.value,age:e.target.age.value,email:e.target.email.value,description:e.target.description.value,facebook:e.target.facebook.value,instagram:e.target.instagram.value,twitter:e.target.twitter.value,youtube:e.target.youtube.value,createdBy:l,ownedBy:null},n=a,s={entity_name:e.target.name.value},c=await(0,g.qC)(r,p.Ul.INSTRUCTORS,n,s);if(c.ok){const e=await c.json();if(console.log("Instructor added:",e,null===e||void 0===e?void 0:e.id),t&&o&&e.id){const t=await(async(e,t)=>{console.log("Inside handleProfilePictureChange");try{const r=p.Rb.INSTRUCTORIMAGES,l="".concat(r,"/").concat(t),o=(0,m.iH)(b.tO,l);console.log("handleProfilePictureChange ",r,l),(await(0,m.aF)(o)).items.forEach((async e=>{await(0,m.oq)(e)}));const a=(0,m.iH)(b.tO,"".concat(l,"/").concat(e.name));return await(0,m.KV)(a,e),await(0,m.Jt)(a)}catch(r){throw console.error("Error handling profile picture:",r),r}})(o,e.id);console.log("Profile picture uploaded:",t)}}else console.error("Error adding instructor:",c.statusText);console.log("Instructor added successfully"),alert("Instructor added successfully")}catch(n){alert("Error",n)}},children:[(0,w.jsxs)(a.Z,{className:"gy-3",children:[(0,w.jsx)(n.Z,{md:4,className:"text-center",children:(0,w.jsxs)(s.Z.Group,{controlId:"formFile",children:[(0,w.jsx)(s.Z.Label,{children:(0,w.jsx)("div",{style:{width:"18rem",height:"18rem",borderRadius:"1rem",overflow:"hidden",margin:"auto",backgroundColor:e?"#d3d3d3":"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:t?(0,w.jsx)(c.Z,{src:t,alt:"Selected",style:{width:"100%",height:"100%",display:t?"block":"none"}}):(0,w.jsx)("span",{style:{color:"white",fontSize:"1rem"},children:"No Image"})})}),(0,w.jsx)("div",{className:"mt-3",children:(0,w.jsxs)("label",{htmlFor:"fileInput",className:"btn btn-primary",style:{cursor:"pointer",borderRadius:"14px",textTransform:"capitalize"},children:["Image +",(0,w.jsx)("input",{type:"file",id:"fileInput",name:"picture",accept:"image/*",style:{display:"none"},onChange:e=>{const t=e.target.files[0];t&&(r(URL.createObjectURL(t)),x(t))}})]})})]})}),(0,w.jsxs)(n.Z,{md:8,children:[(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Name"}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter name",name:"name",style:{backgroundColor:e?"#333":"",color:e?"white":"black"}})]}),(0,w.jsxs)(a.Z,{className:"mt-3",children:[(0,w.jsx)(n.Z,{md:6,children:(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Age"}),(0,w.jsx)(s.Z.Control,{type:"number",placeholder:"Enter age",name:"age",style:{backgroundColor:e?"#333":"",color:e?"white":"black"}})]})}),(0,w.jsx)(n.Z,{md:6,children:(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Experience (Years)"}),(0,w.jsx)(s.Z.Control,{type:"number",placeholder:"Enter experience",name:"experience",style:{backgroundColor:e?"#333":"",color:e?"white":"black"}})]})})]}),(0,w.jsxs)(s.Z.Group,{className:"mt-3",children:[(0,w.jsx)(s.Z.Label,{children:"Dance Styles"}),(0,w.jsx)(Z.Z,{theme:S,children:(0,w.jsx)(y.Z,{style:{backgroundColor:e?"#333333":"",color:e?"white":"black"},multiple:!0,options:I,value:C,onChange:(e,t)=>{v(t)},renderInput:t=>(0,w.jsx)(f.Z,{...t,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"}})})})]}),(0,w.jsxs)(s.Z.Group,{className:"mt-3",children:[(0,w.jsx)(s.Z.Label,{children:"Email"}),(0,w.jsx)(s.Z.Control,{type:"email",placeholder:"Enter email ID of instructor",name:"email",style:{backgroundColor:e?"#333":"",color:e?"white":"black"}})]})]})]}),(0,w.jsxs)(a.Z,{children:[(0,w.jsx)(s.Z.Label,{children:"Description"}),(0,w.jsx)(s.Z.Control,{as:"textarea",rows:3,placeholder:"Enter description",name:"description",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"},required:!0})]}),(0,w.jsx)(s.Z.Label,{children:"Social Links"}),(0,w.jsxs)(a.Z,{children:[(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.Am9,{size:30,style:{color:e?"white":"black"}}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Facebook profile URL",name:"facebook",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.Zf_,{size:30,style:{color:e?"white":"black"}}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Instagram profile URL",name:"instagram",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.fWC,{size:30,style:{color:e?"white":"black"}}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Twitter profile URL",name:"twitter",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.V2E,{size:30,style:{color:e?"white":"black"}}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Youtube channel URL",name:"youtube",style:{backgroundColor:e?"#333333":"",color:e?"white":"black"}})]})]}),(0,w.jsx)(i.Z,{variant:"primary",type:"submit",style:{backgroundColor:e?"#892CDC":"black",color:"white"},children:"Submit"})]})]})};const v=function(e){let{instructors:t,setInstructors:r}=e;const o=(0,d.v9)(h.w),[C,v]=(0,l.useState)(null),[I,S]=(0,l.useState)(null),[E,R]=(0,l.useState)(null),[U,N]=(0,l.useState)([]),L=j.W,T=(0,k.Z)({palette:{mode:o?"dark":"light"}});(0,l.useEffect)((()=>{if(C){const t=C.id;if(t){const r="".concat(p.Rb.INSTRUCTORIMAGES,"/").concat(t),l=(0,m.iH)(b.tO,r);try{(0,m.aF)(l).then((e=>{if(e.items.length>0){const t=e.items[0];(0,m.Jt)(t).then((e=>{S(e),R(e)})).catch((e=>{console.error("Error fetching studio icon:",e)}))}else S(null),R(null)})).catch((e=>{console.error("Error listing files in the folder:",e)}))}catch(e){console.error("Error fetching studio icon:",e)}}}}),[C]);const O=async(e,t)=>{try{const r=p.Rb.INSTRUCTORIMAGES,l="".concat(r,"/").concat(t),o=(0,m.iH)(b.tO,l);(await(0,m.aF)(o)).items.forEach((async e=>{await(0,m.oq)(e)}));const a=(0,m.iH)(b.tO,"".concat(l,"/").concat(e.name));await(0,m.KV)(a,e);return await(0,m.Jt)(a)}catch(r){throw console.error("Error handling profile picture:",r),r}};return(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{style:{color:o?"white":"black",textTransform:"capitalize"},children:"Update Dance Teacher"}),(0,w.jsxs)(s.Z,{className:"mt-4",onSubmit:async e=>{if(e.preventDefault(),C)try{var t;const r={name:e.target.name.value,danceStyles:(null===U||void 0===U||null===(t=U.join)||void 0===t?void 0:t.call(U,","))||"",experience:e.target.experience.value,age:e.target.age.value,email:e.target.email.value,description:e.target.description.value,facebook:e.target.facebook.value,instagram:e.target.instagram.value,twitter:e.target.twitter.value,youtube:e.target.youtube.value},l=await(0,g.fP)(r,p.Ul.INSTRUCTORS,C.id);if(l.ok){if(v((e=>({...e,...r}))),I&&E){await O(E,C.id)}alert("Instructor updated successfully")}else console.error("Error adding instructor:",l.statusText)}catch(r){console.error("Error updating instructor",r),alert("Error updating instructor")}else alert("Please select an instructor to update.")},children:[(0,w.jsxs)(s.Z.Control,{as:"select",onChange:async e=>{var t,r;e.preventDefault();const l=e.target.value,o=await(0,x.QT)((0,x.JU)(b.db,p.Ul.INSTRUCTORS,l)),a=o.data();v({id:o.id,...a}),N((null===a||void 0===a||null===(t=a.danceStyles)||void 0===t||null===(r=t.split)||void 0===r?void 0:r.call(t,","))||[])},style:{backgroundColor:o?"#333333":"",color:o?"white":"black",height:"auto",marginBottom:"1rem"},children:[(0,w.jsx)("option",{style:{backgroundColor:o?"#333333":"",color:o?"white":"black"},children:"Select an instructor"}),t.map((e=>(0,w.jsx)("option",{value:e.id,children:"".concat(e.name," - ").concat(e.id)},e.id)))]}),(0,w.jsxs)(a.Z,{className:"gy-3",children:[(0,w.jsx)(n.Z,{md:4,className:"text-center",children:(0,w.jsxs)(s.Z.Group,{controlId:"formFile",className:"mb-3",children:[(0,w.jsx)(s.Z.Label,{children:(0,w.jsx)(a.Z,{children:(0,w.jsx)("div",{style:{width:"18rem",height:"18rem",borderRadius:"1rem",overflow:"hidden",margin:"auto",backgroundColor:o?"#d3d3d3":"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:I&&(0,w.jsx)(c.Z,{src:I,alt:"Selected",style:{width:"100%",height:"100%",display:I?"block":"none"}})})})}),(0,w.jsx)("div",{className:"mt-3",children:(0,w.jsxs)("label",{htmlFor:"fileInput",className:"btn btn-primary",style:{cursor:"pointer",borderRadius:"14px",textTransform:"capitalize"},children:["Image +",(0,w.jsx)("input",{type:"file",id:"fileInput",name:"picture",accept:"image/*",style:{display:"none"},onChange:e=>{const t=e.target.files[0];t&&(S(URL.createObjectURL(t)),R(t))}})]})})]})}),(0,w.jsxs)(n.Z,{md:8,children:[(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Name"}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter name",name:"name",defaultValue:C?C.name:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]}),(0,w.jsxs)(a.Z,{className:"mt-3",children:[(0,w.jsx)(n.Z,{md:6,children:(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Age"}),(0,w.jsx)(s.Z.Control,{type:"number",placeholder:"Enter age",name:"age",defaultValue:C?C.age:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]})}),(0,w.jsx)(n.Z,{md:6,children:(0,w.jsxs)(s.Z.Group,{children:[(0,w.jsx)(s.Z.Label,{children:"Experience"}),(0,w.jsx)(s.Z.Control,{type:"number",placeholder:"Enter experience (in years)",name:"experience",defaultValue:C?C.experience:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]})})]}),(0,w.jsxs)(s.Z.Group,{className:"mt-3",children:[(0,w.jsx)(s.Z.Label,{children:"Dance Styles"}),(0,w.jsx)(Z.Z,{theme:T,children:(0,w.jsx)(y.Z,{style:{backgroundColor:o?"#333333":"",color:o?"white":"black"},multiple:!0,options:L,value:U,onChange:(e,t)=>{N(t)},renderInput:e=>(0,w.jsx)(f.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})})})]}),(0,w.jsxs)(s.Z.Group,{className:"mt-3",children:[(0,w.jsx)(s.Z.Label,{children:"Email"}),(0,w.jsx)(s.Z.Control,{type:"email",placeholder:"Enter email Id of instructor",name:"email",defaultValue:C?C.email:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]})]})]}),(0,w.jsx)(s.Z.Label,{children:"Description"}),(0,w.jsx)(s.Z.Control,{as:"textarea",rows:3,placeholder:"Enter description",name:"description",defaultValue:C?C.description:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}}),(0,w.jsx)(s.Z.Label,{children:"Social Links"}),(0,w.jsxs)(a.Z,{children:[(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.Am9,{size:30}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Facebook profile URL",name:"facebook",defaultValue:C?C.facebook:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.Zf_,{size:30}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Instagram profile URL",name:"instagram",defaultValue:C?C.instagram:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.fWC,{size:30}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Twitter profile URL",name:"twitter",defaultValue:C?C.twitter:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]}),(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(u.V2E,{size:30}),(0,w.jsx)(s.Z.Control,{type:"text",placeholder:"Enter Youtube channel URL",name:"youtube",defaultValue:C?C.youtube:"",style:{backgroundColor:o?"#333333":"",color:o?"white":"black"}})]})]}),(0,w.jsx)(i.Z,{variant:"primary",type:"submit",style:{backgroundColor:o?"#892CDC":"black",color:"white"},children:"Update Instructor"})]})]})};var I=r(95070),S=r(45736);const E=function(e){let{instructor:t,id:r}=e;const o=t.danceStyles?t.danceStyles.split(","):[],s=(0,d.v9)(h.w),[c,i]=(0,l.useState)(null),x={width:"18rem",margin:"5px",backgroundColor:s?"#333333":"black",color:s?"white":"black"},g={width:"60px",height:"60px",borderRadius:"50%",marginRight:"10px",backgroundColor:s?"#555":"#d3d3d3",display:"flex",justifyContent:"center",alignItems:"center"};return(0,l.useEffect)((()=>{(async()=>{if(t&&t.id){const r="".concat(p.Rb.INSTRUCTORIMAGES,"/").concat(t.id),l=(0,m.iH)(b.tO,r);try{(0,m.aF)(l).then((e=>{if(e.items.length>0){const t=e.items[0];(0,m.Jt)(t).then((e=>{i(e)})).catch((e=>{console.error("Error fetching studio icon:",e)}))}})).catch((e=>{console.error("Error listing files in the folder:",e)}))}catch(e){console.error("Error fetching image URL:",e)}}})()}),[]),(0,w.jsx)(I.Z,{style:x,children:(0,w.jsxs)(I.Z.Body,{children:[(0,w.jsxs)(a.Z,{children:[(0,w.jsx)(n.Z,{md:4,children:c?(0,w.jsx)(I.Z.Img,{variant:"top",src:c,alt:"Instructor",style:{width:"5rem",height:"5rem",borderRadius:"50%",marginRight:"1px"}}):(0,w.jsx)("div",{style:g,children:(0,w.jsx)("span",{style:{color:s?"white":"black"}})})}),(0,w.jsxs)(n.Z,{md:6,children:[(0,w.jsx)("h",{style:{color:"white"},children:"Instructor"}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{style:{color:"white"},children:t.name})]})]}),(0,w.jsx)("br",{}),(0,w.jsxs)(a.Z,{children:[(0,w.jsx)(I.Z.Subtitle,{className:"mb-2 text-muted",style:{fontSize:"8px"},children:" ".concat(t.id)}),(0,w.jsx)("div",{children:t.description&&(0,w.jsxs)("p",{style:{fontSize:"14px",color:"white"},children:[" ",t.description," year(s)"]})}),(0,w.jsx)("div",{children:t.experience&&(0,w.jsxs)("p",{style:{fontSize:"12px",color:"white"},children:["Exp: ",t.experience," year(s)"]})}),(0,w.jsx)("div",{children:o.map(((e,t)=>(0,w.jsx)(S.Z,{pill:!0,bg:s?"light":"dark",style:{marginRight:"5px"},children:e.trim()},t)))}),(0,w.jsxs)("div",{children:[t.facebook&&(0,w.jsx)("a",{href:t.facebook,target:"_blank",rel:"noopener noreferrer",style:{color:s?"white":"black"},children:(0,w.jsx)(u.Am9,{style:{marginRight:"1rem"}})}),t.instagram&&(0,w.jsx)("a",{href:t.instagram,target:"_blank",rel:"noopener noreferrer",style:{color:s?"white":"black"},children:(0,w.jsx)(u.Zf_,{style:{marginRight:"1rem"}})}),t.twitter&&(0,w.jsx)("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",style:{color:s?"white":"black"},children:(0,w.jsx)(u.fWC,{style:{marginRight:"1rem"}})}),t.youtube&&(0,w.jsx)("a",{href:t.youtube,target:"_blank",rel:"noopener noreferrer",style:{color:s?"white":"black"},children:(0,w.jsx)(u.V2E,{style:{marginRight:"1rem"}})})]})]})]})})};var R=r(61224),U=r(43896),N=r(83449),L=r(47283),T=r(82851),O=r(16029);const A=function(){const e=(0,d.v9)(h.w),[t,r]=(0,l.useState)([]),{currentUser:a}=(0,R.a)(),[n,s]=l.useState("1");return(0,l.useEffect)((()=>{(async()=>{let e=a&&a.uid?a.uid:null;if(!e)return console.log("User not found"),void alert("User not found");const t=(0,x.hJ)(b.db,p.Ul.INSTRUCTORS),l=(0,x.IO)(t,(0,x.ar)("createdBy","==",e)),o=await(0,x.PL)(l),n=[];o.forEach((e=>{n.push({id:e.id,...e.data()})})),r(n)})()}),[]),(0,w.jsxs)("div",{style:{backgroundColor:e?"#202020":"",color:e?"white":"black"},children:[(0,w.jsx)(O.Z,{sx:{width:"100%",typography:"body1"},children:(0,w.jsxs)(N.ZP,{value:n,children:[(0,w.jsx)(O.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,w.jsxs)(L.Z,{style:{color:e?"white":"black"},onChange:(e,t)=>{s(t)},"aria-label":"lab API tabs example",children:[(0,w.jsx)(U.Z,{style:{color:e?"white":"black"},label:"Add Instructor",value:"1"}),(0,w.jsx)(U.Z,{style:{color:e?"white":"black"},label:"Update Instructor",value:"2"})]})}),(0,w.jsx)(T.Z,{value:"1",children:(0,w.jsx)(C,{})}),(0,w.jsx)(T.Z,{value:"2",children:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(v,{instructors:t,setInstructors:r})})})]})}),(0,w.jsxs)(o.Z,{hidden:!0,defaultActiveKey:"0",style:{backgroundColor:e?"#181818":"",color:e?"white":"black"},children:[(0,w.jsxs)(o.Z.Item,{eventKey:"0",style:{backgroundColor:e?"#181818":"",color:e?"white":"black"},children:[(0,w.jsx)(o.Z.Header,{style:{backgroundColor:e?"#181818":"",color:e?"white":"black"},children:"Add Instructor"}),(0,w.jsx)(o.Z.Body,{children:(0,w.jsx)(C,{})})]}),(0,w.jsxs)(o.Z.Item,{eventKey:"1",style:{backgroundColor:e?"#181818":"",color:e?"white":"black"},children:[(0,w.jsx)(o.Z.Header,{style:{backgroundColor:e?"#181818":"",color:e?"white":"black"},children:"Update Instructor"}),(0,w.jsx)(o.Z.Body,{children:(0,w.jsx)(v,{instructors:t,setInstructors:r})})]})]}),(0,w.jsx)("br",{}),t.length>0&&(0,w.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:t.map((e=>(0,w.jsx)(E,{instructor:e},e.id)))})]})}}}]);
//# sourceMappingURL=5297.cc9a7293.chunk.js.map