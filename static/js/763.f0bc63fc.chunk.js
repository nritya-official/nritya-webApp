"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[763],{59777:(e,t,o)=>{o.d(t,{Z:()=>E});o(11518);var l=o(72791),a=o(92552),s=o(84654),n=o(28658),r=o(69597),i=o(83168),d=o(88447),c=o(16029),u=o(61889),h=o(20890),m=o(94294),x=o(13400),p=o(36314),v=o(59434),g=o(83708),j=o(68449),b=o(60717),y=o(97892),f=o.n(y),S=o(12481),Z=o(10159),w=o(75424),C=o(49071),I=o(10884),k=o(93819),N=o(80184);function D(e){var t,o,a,s,n,r;let{open:i,handleClose:p,dataItem:j,activateCourse:y,deactivateCourse:D,actionsAllowed:U}=e;const E=(0,w.D)(),L=(0,v.v9)(b.w),[O,P]=(0,l.useState)(!1),[B,T]=(0,l.useState)(null),A=null===(t=JSON.parse(localStorage.getItem("userInfo")))||void 0===t?void 0:t.UserId;(0,l.useEffect)((()=>{(async()=>{try{const e=(0,S.JU)(Z.db,"User",A),t=await(0,S.QT)(e);t.exists()&&T(t.data())}catch(e){console.log(" error")}})()}),[]);const J=j.UserId===A,R=null===B||void 0===B||null===(o=B.BookedCourses)||void 0===o||null===(a=o.includes)||void 0===a?void 0:a.call(o,null===j||void 0===j?void 0:j.id),F=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),M="".concat(window.location.host,"/nritya-webApp#/course/").concat(j.id);return(0,N.jsx)(d.Z,{open:i,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,N.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:L?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:L?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,N.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,lg:8,children:(0,N.jsx)("img",{src:j.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,N.jsxs)(c.Z,{sx:{height:"100%",bgcolor:L?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,N.jsxs)(c.Z,{sx:{flex:1},children:[(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:f()(j.date).format("LL")}),(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:L?"white":"black"},children:j.time}),(0,N.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:L?"white":"black"},children:j.venue}),(0,N.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:L?"white":"black"},children:[j.duration," ",j.durationUnit]})]}),(0,N.jsxs)(c.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,N.jsxs)(h.Z,{variant:"h5",sx:{alignSelf:"center",color:L?"white":"black"},children:["\u20b9",j.price]}),!U&&!J&&A&&(0,N.jsx)(m.Z,{variant:"outlined",onClick:async()=>{try{P(!0),(0,S.ET)((0,S.hJ)(Z.db,g.Ul.BOOKINGS),{StudioId:j.StudioId,CourseId:j.id,UserId:A,bookingDate:Date.now()});const e=(0,S.JU)(Z.db,"User",A),t=await(0,S.QT)(e);t.exists()&&null!=t.data()&&await(0,S.r7)(e,{BookedCourses:[...t.data().BookedCourses||[],j.id]}),T((e=>({...e,BookedCourses:[...(null===e||void 0===e?void 0:e.BookedCourses)||[],j.id]}))),E("Course booked","success")}catch(e){console.error(e),E((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{P(!1)}},disabled:R||O,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:R?"Booked":"Book Now"})]})]}),!U&&!J&&A&&(0,N.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:L?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,N.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,N.jsxs)(c.Z,{sx:{display:"flex",columnGap:2},children:[(0,N.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:L?"white":"black"},children:[j.name||"",j.danceStyles.map((e=>" | ".concat(e)))]}),(0,N.jsx)(k.Z,{shareUrl:M})]}),(0,N.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:L?"white":"black"},children:[(0,N.jsxs)("span",{children:["By ",(null===(s=j.studioDetails)||void 0===s?void 0:s.studioName)||""]}),j.studioDetails&&(null===(n=j.studioDetails)||void 0===n?void 0:n.whatsappNumber)&&(0,N.jsx)(x.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(j.studioDetails.whatsappNumber,"?text=").concat(F),children:(0,N.jsx)("img",{src:C,alt:"Whatsapp call",style:{width:30,height:28}})}),j.studioDetails&&(null===(r=j.studioDetails)||void 0===r?void 0:r.mobileNumber)&&(0,N.jsx)(x.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(j.studioDetails.mobileNumber),children:(0,N.jsx)("img",{src:I,alt:"Phone call",style:{width:30,height:28}})})]}),(0,N.jsx)("div",{style:{color:L?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:j.description||"Course Description"}})]})]}),(0,N.jsxs)(c.Z,{sx:{mt:"1rem",textAlign:"right"},children:[U&&J&&(0,N.jsx)(m.Z,{onClick:()=>null!==j&&void 0!==j&&j.active?D(null===j||void 0===j?void 0:j.id):y(null===j||void 0===j?void 0:j.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==j&&void 0!==j&&j.active?"Deactivate":"Activate"}),(0,N.jsx)(m.Z,{onClick:p,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:L?"white":"black",color:L?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:L?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:L?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function U(e){var t;let{dataItem:o,activateCourse:d,deactivateCourse:u,actionsAllowed:h}=e;const m=(0,v.v9)(b.w),[x,y]=(0,l.useState)(null),[f,S]=(0,l.useState)(!1),Z=o.id;(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,j.Us)(g.Rb.COURSEICON,Z);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[o.id]);const w={backgroundColor:m?"#444":"white",padding:"0px",color:m?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(s.Z,{variant:"solid",sx:{...w,"&:hover":{transform:"scale(1.01)",cursor:"pointer"}},onClick:()=>S(!0),children:[(0,N.jsxs)(a.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,N.jsx)("img",{src:x,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,N.jsx)(p.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:o&&o.danceStyles?o.danceStyles.slice(0,3).map(((e,t)=>(0,N.jsx)(r.Z,{color:t%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},t))):(0,N.jsx)(r.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,N.jsxs)(n.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,N.jsxs)(c.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:m?"white":"black",extDecoder:"one"},children:[(0,N.jsx)("span",{children:o&&o.name?o.name:""}),!(null!==o&&void 0!==o&&o.active)&&(0,N.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,N.jsxs)(i.ZP,{style:{color:m?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(t=o.studioDetails)&&void 0!==t&&t.studioName?o.studioDetails.studioName:""]}),(0,N.jsx)(i.ZP,{style:{marginTop:10,color:m?"white":"black"},level:"body-xs",noWrap:!0,children:o.venue?o.venue:""}),(0,N.jsxs)(i.ZP,{style:{color:m?"white":"black"},level:"body-xs",children:[o.date||""," | ",o.time||""]})]})]}),(0,N.jsx)(D,{dataItem:{...o,imageUrl:x},open:f,handleClose:()=>S(!1),activateCourse:d,deactivateCourse:u,actionsAllowed:h})]})}const E=e=>{let{dataList:t,activateCourse:o,deactivateCourse:l,actionsAllowed:a}=e;return(0,N.jsx)("div",{className:"horizontal-scroll-wrapper",children:t.map(((e,t)=>(0,N.jsx)(U,{dataItem:e,activateCourse:o,deactivateCourse:l,actionsAllowed:a},e.id)))})}},81018:(e,t,o)=>{o.d(t,{Z:()=>y});var l=o(72791),a=o(6429),s=o.n(a),n=o(30276),r=o(10159),i=o(59434),d=o(60717),c=o(68449),u=o(57621),h=o(13400),m=o(39504),x=o(27247),p=o(75424),v=o(83708),g=o(56510),j=o(80184);const b=(0,l.forwardRef)(((e,t)=>{let{entityId:o,storageFolder:a,title:b,maxImageCount:y=10,minImageCount:f,updateMode:S,disable:Z}=e;const{setIsLoading:w}=(0,g.U)(),C=(0,p.D)(),I=(0,l.useRef)(null),[k,N]=(0,l.useState)([]),[D,U]=(0,l.useState)([]),[E,L]=(0,l.useState)([]),O=(0,i.v9)(d.w),[P,B]=(0,l.useState)(-1),[T,A]=(0,l.useState)(-1),[J,R]=(0,l.useState)(!1);console.log("Kyc enitity id ",o,Z);const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const o=t<0?0:t,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]};(0,l.useEffect)((()=>{o&&z(o)}),[o]),(0,l.useEffect)((()=>{if(y&&k.length>y){const e=k.slice(0,y);alert("Exceeded maxImageCount, keeping first ".concat(y," files.")),I.current.value=null,N(e)}}),[k,y]);const M=(e,t)=>{const o=e.map((e=>e.id)),l=t.map((e=>e.id));return{imagesToDelete:t.filter((e=>!o.includes(e.id))),newImages:e.filter((e=>!l.includes(e.id)))}},z=async e=>{N([]),L([]);try{const t="".concat(a,"/").concat(e);console.log(t);const o=(0,n.iH)(r.tO,t),l=await(0,n.aF)(o),s=await Promise.all(l.items.map((async e=>{const t=await(0,n.Jt)(e);return{id:e.name,filename:e.name,fileURL:t}})));U(s),N(s)}catch(t){console.error("Error fetching user images:",t)}};return(0,l.useImperativeHandle)(t,(()=>({isValid:()=>0===f||J}))),(0,j.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,j.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,j.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,j.jsx)("div",{className:"card mt-5",children:(0,j.jsxs)("div",{className:"card-body",style:{backgroundColor:O?"#333333":"white"},children:[(0,j.jsxs)("div",{className:"kb-data-box",children:[(0,j.jsx)("div",{className:"kb-modal-data-title",children:(0,j.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,j.jsx)("h4",{children:b}),(0,j.jsxs)("p",{children:["Max no of image(s):",y," ",a===v.Rb.STUDIOIMAGES&&(0,j.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,j.jsxs)("div",{style:{backgroundColor:O?"#333333":"white"},children:[(0,j.jsx)("div",{className:"kb-file-upload",children:(0,j.jsx)("div",{className:"file-upload-box",children:(0,j.jsx)("input",{ref:I,type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const t=Array.from(e.target.files),o=[];t.forEach((e=>{const l=new FileReader;l.onloadend=()=>{o.push({id:s().generate(),filename:e.name,filetype:e.type,fileimage:l.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:F(e.size),file:e}),o.length===t.length&&(N((e=>[...e,...o])),L(o),I.current.value=null)},l.readAsDataURL(e)}))},multiple:!0})})}),(0,j.jsx)("br",{}),(0,j.jsx)("div",{className:"kb-attach-box mb-3",children:(0,j.jsx)("div",{className:"row",children:o&&k.length>0?k.map((e=>(0,j.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,j.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,j.jsxs)("div",{style:{position:"relative"},children:[(0,j.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,j.jsx)(h.Z,{"aria-label":"delete",disabled:Z,onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this image?")&&N((e=>e.filter((e=>e.id!==t)))));var t},style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,j.jsx)(x.Z,{style:{color:"ff0000"}})})]}):(0,j.jsx)(m.Z,{children:(0,j.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,j.jsx)("div",{className:"col-12 text-center",children:(0,j.jsx)("p",{children:"No images selected"})})})}),(0,j.jsx)("div",{className:"kb-buttons-box",children:(0,j.jsx)("button",{type:"button",className:"btn div-submit",style:{backgroundColor:O?"#892CDC":"black",color:"white"},onClick:async()=>{if(o){B(-1),A(-1);try{if(w(!0),1===y&&k.length>=f)await(0,c.ih)(a,o),await(0,c.eg)(a,E,o,A),C("Image uploaded successfully","success"),R(!0);else{const{imagesToDelete:e,newImages:t}=M(k,D);if(f&&t.length<f)return void C("Minimum ".concat(f," image(s) are required"),"error");e.length>0&&(await(0,c.xR)(a,e,o,B),C("Image(s) deleted successfully","success")),t.length>0&&(await(0,c.eg)(a,t,o,A),C("Image(s) uploaded successfully","success")),R(!0)}I.current.value=null}catch(e){R(!1),console.error("Error uploading/deleting images:",e)}finally{w(!1)}}else alert("No studio selected")},disabled:Z,children:"Image Upload"})})]}),k.length>0&&(0,j.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("hr",{}),k.map((e=>(0,j.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,j.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,j.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,j.jsx)("div",{className:"card-body",children:(0,j.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),P>=0&&(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{style:{color:O?"#fff":"#000"},children:["Deleting images... ",P.toFixed(2),"%"]}),(0,j.jsxs)("progress",{value:P,max:"100",style:{color:O?"#fff":"#000"},children:[P.toFixed(2),"%"]})]}),T>=0&&(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{style:{color:O?"#fff":"#000"},children:["Uploading images... ",T.toFixed(2),"%"]}),(0,j.jsxs)("progress",{value:T,max:"100",style:{color:O?"#fff":"#000"},children:[T.toFixed(2),"%"]})]})]})})})})})}));b.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const y=b},26073:(e,t,o)=>{o.d(t,{Z:()=>d});o(72791);var l=o(89743),a=o(2677),s=o(95313),n=o(59434),r=o(60717),i=o(80184);const d=e=>{var t;let{defaultTime:o,handleSelect:d}=e;const c=o.split("-")[0].trim(),u=null===(t=o.split("-")[1])||void 0===t?void 0:t.trim(),h=(0,n.v9)(r.w),m=e=>{const t=(()=>{const e=[];let t=[],o=[];for(let l=0;l<24;l++)for(let e=0;e<60;e+=30){const a=e.toString().padStart(2,"0");if(l<12){const e=0===l?12:l;t.push("".concat(e,":").concat(a," AM"))}else{const e=12===l?12:l%12;o.push("".concat(e,":").concat(a," PM"))}}for(let l=0;l<t.length||l<o.length;l++)l<t.length&&e.push(t[l]),l<o.length&&e.push(o[l]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),t.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(a.Z,{children:(0,i.jsxs)(s.Z.Group,{children:[(0,i.jsx)(s.Z.Label,{children:"Start Time"}),(0,i.jsx)(s.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:m(c)})]})}),(0,i.jsx)(a.Z,{children:(0,i.jsxs)(s.Z.Group,{children:[(0,i.jsx)(s.Z.Label,{children:"End Time"}),(0,i.jsx)(s.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:m(u)})]})})]})}},40763:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Y});var l=o(72791),a=o(10159),s=o(12481),n=o(83708),r=o(59434),i=o(60717),d=o(61224),c=o(43896),u=o(83449),h=o(47283),m=o(82851),x=o(16029),p=o(59777),v=o(95313),g=o(89743),j=o(2677),b=o(94294),y=o(57482),f=o(81018),S=o(51650),Z=o(5712),w=o(93006),C=o(67107),I=o(44507),k=o(4708),N=o(26128),D=o(4560),U=o(24750),E=o(71652),L=o(97892),O=o.n(L),P=o(26073),B=o(75424),T=o(82873),A=o(18406),J=o(66770),R=o.n(J),F=(o(86009),o(763)),M=o(80184);const z=function(e){let{instructors:t,studioId:o,setCourses:d}=e;const c=(0,B.D)(),[u,h]=(0,l.useState)(""),m=(0,r.v9)(i.w),[x,p]=(0,l.useState)([]),[L,J]=(0,l.useState)([]),z=t.map((e=>"".concat(e.name," - ").concat(e.id))),q=S.W,Y=localStorage.getItem("filterLocation")||"",[_,W]=(0,l.useState)(!1),[H,V]=(0,l.useState)(""),[G,K]=(0,l.useState)(null),[Q,$]=(0,l.useState)(""),[X,ee]=(0,l.useState)(Y),[te,oe]=(0,l.useState)(""),[le,ae]=(0,l.useState)(O()(new Date)),[se,ne]=(0,l.useState)(!1),[re,ie]=(0,l.useState)(1),[de,ce]=(0,l.useState)(""),ue=(0,C.Z)({palette:{mode:m?"dark":"light"}}),he=e=>{e.reset(),J([]),p([]),K(null),V(""),$(""),oe(""),ae(O()(Date.now())),ee(""),ce("")};return(0,l.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const g=(0,s.IO)((0,s.hJ)(a.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),j=await(0,s.PL)(g);if(j.empty){var l,r,i,d,c,u,h,m;await(0,s.ET)((0,s.hJ)(a.db,n.i0.DRAFT_COURSES),{name:(null===(l=e.name)||void 0===l?void 0:l.value)||"",duration:(null===(r=e.duration)||void 0===r?void 0:r.value)||"",price:(null===(i=e.courseFees)||void 0===i?void 0:i.value)||"",description:de,danceStyles:L,instructors:x?null===x||void 0===x||null===(d=x.map)||void 0===d?void 0:d.call(x,(e=>{var t,o,l,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(o=t.call(e,"-"))||void 0===o||null===(l=o[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:G&&(null===G||void 0===G||null===(c=G.split)||void 0===c||null===(u=c.call(G,":"))||void 0===u||null===(h=u[1])||void 0===h||null===(m=h.trim)||void 0===m?void 0:m.call(h))||null,durationUnit:H,level:Q,time:te,date:le.format("YYYY-MM-DD"),city:X})}else{var v;let l=[];j.forEach((e=>{l.push({id:e.id,...e.data()})}));let a=l[0];e.name.value=a.name,e.courseFees.value=a.price,e.duration.value=a.duration,ce((null===a||void 0===a?void 0:a.description)||""),J(null!==a&&void 0!==a&&null!==(v=a.danceStyles)&&void 0!==v&&v.length?a.danceStyles:[]),p(t.filter((e=>null===a||void 0===a?void 0:a.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const s=o.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===a||void 0===a?void 0:a.StudioId)));s>0&&K(o[s]),V(a.durationUnit),$((null===a||void 0===a?void 0:a.level)||""),oe((null===a||void 0===a?void 0:a.time)||""),ae(O()((null===a||void 0===a?void 0:a.date)||Date.now())),ee((null===a||void 0===a?void 0:a.city)||"")}W(!0)}catch(g){console.error(g)}}()}),[]),(0,l.useEffect)((()=>{let e=null,t=null;return _&&async function(){const o=document.getElementById("addStudioForm");try{const l=(0,s.IO)((0,s.hJ)(a.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),r=await(0,s.PL)(l);if(!r.empty){let l=[];r.forEach((e=>{l.push({id:e.id,...e.data()})}));let i=l[0];const d=(0,s.JU)(a.db,n.i0.DRAFT_COURSES,i.id);e=setInterval((async()=>{try{var e,l,a,n,r,i,c,u;const m={name:(null===(e=o.name)||void 0===e?void 0:e.value)||"",price:(null===(l=o.courseFees)||void 0===l?void 0:l.value)||"",description:de,danceStyles:L,instructors:x?null===x||void 0===x||null===(a=x.map)||void 0===a?void 0:a.call(x,(e=>{var t,o,l,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(o=t.call(e,"-"))||void 0===o||null===(l=o[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,StudioId:G&&(null===G||void 0===G||null===(n=G.split)||void 0===n||null===(r=n.call(G,":"))||void 0===r||null===(i=r[1])||void 0===i||null===(c=i.trim)||void 0===c?void 0:c.call(i))||null,duration:(null===(u=o.duration)||void 0===u?void 0:u.value)||"",durationUnit:H,level:Q,time:te,date:le.format("YYYY-MM-DD"),city:X};if((0,F.isEqual)(t,m))console.log("Nothing for Autosave to save");else try{await(0,s.r7)(d,m),t=m,console.log("Next AutoSave in",1e4)}catch(h){console.error(h)}}catch(h){console.error(h)}}),1e4)}}catch(l){console.error(l)}}(),()=>clearInterval(e)}),[_,L,x,G,H,Q,te,le,X,de]),(0,l.useEffect)((()=>{if(m){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[m]),(0,M.jsxs)("div",{children:[1===re&&(0,M.jsx)(v.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if((e=>{let t=!0;return e.name.value&&e.duration.value&&e.courseFees.value&&de&&null!==L&&void 0!==L&&L.length&&null!==x&&void 0!==x&&x.length&&G&&H&&Q&&te&&le&&X||(t=!1),t})(t))try{var o,l,r,i,u;const m=JSON.parse(localStorage.getItem("userInfo")).email,p={courseName:e.target.name.value,danceStyles:L,instructors:x?null===x||void 0===x||null===(o=x.map)||void 0===o?void 0:o.call(x,(e=>{var t,o,l,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(o=t.call(e,"-"))||void 0===o||null===(l=o[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:m,StudioId:G&&(null===G||void 0===G||null===(l=G.split)||void 0===l||null===(r=l.call(G,":"))||void 0===r||null===(i=r[1])||void 0===i||null===(u=i.trim)||void 0===u?void 0:u.call(i))||null,duration:e.target.duration.value,durationUnit:H,level:Q,time:te,date:le.format("YYYY-MM-DD"),price:e.target.courseFees.value,description:de,city:X,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};ne(!0);const v=m,g={entity_name:p.courseName,time:p.time,date:p.date,StudioId:p.StudioId},j=await(0,A.qC)(p,n.Ul.COURSES,v,g);if(j.ok){const e=await j.json();h(e.id),d((t=>[...t,{id:e.id,...p}])),he(t),(async()=>{const e=(0,s.IO)((0,s.hJ)(a.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=await(0,s.PL)(e);if(!t.empty){let e=[];t.forEach((t=>{e.push({id:t.id,...t.data()})}));let o=e[0];const l=(0,s.JU)(a.db,n.i0.DRAFT_COURSES,o.id);await(0,s.oe)(l)}})(),c("Course successfully added.","success"),ie((e=>e+1))}}catch(m){console.error("Error adding course: ",m),c((null===m||void 0===m?void 0:m.message)||"Something went wrong","error")}finally{ne(!1)}else c("Please fill all the fields.","error")},style:{backgroundColor:m?"#202020":"",color:m?"white":"black"},children:(0,M.jsx)(v.Z.Group,{controlId:"formBasicAdd",children:(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Couese Name"}),(0,M.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"textarea",placeholder:"Enter course name",name:"name"})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:q,value:L,onChange:(e,t)=>{J(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:z,value:x,onChange:(e,t)=>{p(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,M.jsx)(j.Z,{md:6,children:(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Duration"}),(0,M.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:["Months","Weeks","Days"],value:H,onChange:(e,t)=>{V(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Duration In Units",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})]})})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(j.Z,{md:6,children:(0,M.jsx)(P.Z,{defaultTime:te||"00:00-00:00",handleSelect:(e,t)=>{const[o,l]=te.split(" - ");let a="".concat(o," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==t&&(a="".concat(o," - ").concat(t)),oe(a)}})}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,M.jsx)(E._,{dateAdapter:U.y,children:(0,M.jsx)(D.C,{components:["DatePicker"],children:(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(N.M,{sx:{width:"100%"},value:le,onChange:e=>ae(e)})]})})})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Level"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:Q,onChange:(e,t)=>{$(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,M.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})]}),(0,M.jsx)("br",{}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"City"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:T.c,value:X,onChange:(e,t)=>{ee(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]})}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Studio"}),(0,M.jsxs)(I.Z,{theme:ue,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:o,value:G,onChange:(e,t)=>{K(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}})})]})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Brief Description"}),(0,M.jsx)(R(),{theme:"snow",placeholder:"Enter Description",value:de,onChange:ce})]})]}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,M.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,M.jsx)("hr",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(j.Z,{xs:6}),(0,M.jsx)(j.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},type:"submit",disabled:se,children:"Next"})})]})]})})}),se&&(0,M.jsx)(y.Z,{}),2===re&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.Z,{children:(0,M.jsx)(j.Z,{children:(0,M.jsx)(f.Z,{entityId:u,title:"Course Images",storageFolder:n.Rb.COURSEICON,maxImageCount:1})})}),(0,M.jsx)(g.Z,{style:{margin:"1rem 0"},children:(0,M.jsx)(j.Z,{style:{textAlign:"right"},children:(0,M.jsx)(b.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},onClick:()=>ie((e=>e-1)),children:"Done"})})})]})]})};const q=function(e){let{courseId:t,instructors:o,studioId:d}=e;const c=localStorage.getItem("filterLocation")||"",u=(0,B.D)(),[h,m]=(0,l.useState)(null),[x,p]=(0,l.useState)([]),L=S.W,[J,F]=(0,l.useState)([]),z=(0,r.v9)(i.w),[q,Y]=(0,l.useState)(""),[_,W]=(0,l.useState)(""),[H,V]=(0,l.useState)(c),[G,K]=(0,l.useState)(""),[Q,$]=(0,l.useState)(O()(new Date)),[X,ee]=(0,l.useState)(!1),[te,oe]=(0,l.useState)(""),le=o.map((e=>"".concat(e.name," - ").concat(e.id))),ae=(0,C.Z)({palette:{mode:z?"dark":"light"}}),se={backgroundColor:z?"#333333":"",color:z?"white":"black",height:"auto"},[ne,re]=(0,l.useState)(""),[ie,de]=(0,l.useState)(null),ce=e=>{e.reset(),F([]),p([]),m(null),Y(""),W(""),K(""),$(O()(new Date)),V(""),de(null),re(""),oe("")};return(0,l.useEffect)((()=>{if(ie){const e=o.filter((e=>ie.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(p(e),ie&&ie.danceStyles&&F(ie.danceStyles),ie&&ie.durationUnit&&Y(ie.durationUnit),ie&&ie.level&&W(ie.level),ie&&ie.time&&K(ie.time),ie&&ie.date&&$(O()(ie.date)),ie&&ie.StudioId){const e=d.map((e=>e.split(":")[1].trim())).findIndex((e=>e===ie.StudioId));m(d[e]||null)}V((null===ie||void 0===ie?void 0:ie.city)||""),oe((null===ie||void 0===ie?void 0:ie.description)||"")}}),[ie]),(0,l.useEffect)((()=>{if(z){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[z]),(0,M.jsxs)("div",{style:{backgroundColor:z?"#202020":"",color:z?"white":"black"},children:[(0,M.jsx)("br",{}),(0,M.jsxs)(v.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if(ne)if((e=>{let t=!0;return e.name.value&&e.courseFees.value&&e.duration.value&&te&&null!==J&&void 0!==J&&J.length&&null!==x&&void 0!==x&&x.length&&h&&q&&_&&G&&Q&&H||(t=!1),t})(t)){try{var o,l,a,s,r;const e={courseName:t.name.value,duration:t.duration.value,price:t.courseFees.value,description:te,danceStyles:J,instructors:x?null===x||void 0===x||null===(o=x.map)||void 0===o?void 0:o.call(x,(e=>{var t,o,l,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(o=t.call(e,"-"))||void 0===o||null===(l=o[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(l=h.split)||void 0===l||null===(a=l.call(h,":"))||void 0===a||null===(s=a[1])||void 0===s||null===(r=s.trim)||void 0===r?void 0:r.call(s))||null,durationUnit:q,level:_,time:G,date:Q.format("YYYY-MM-DD"),city:H,youtubeViedoLink:t.youtubeViedoLink.value};ee(!0);const i=await(0,A.fP)(e,n.Ul.COURSES,ne);i.ok?(ce(t),u("Open class successfully updated.","success")):u("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating course: ",i),u((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{ee(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:[(0,M.jsxs)(v.Z.Group,{controlId:"formBasicUpdate",children:[(0,M.jsx)(v.Z.Label,{children:"Id"}),(0,M.jsxs)(v.Z.Control,{as:"select",name:"nameId",style:{...se},onChange:async e=>{e.preventDefault();const t=e.target.value.split(":").pop().trim();re(t);try{const e=await(0,s.QT)((0,s.JU)(a.db,n.Ul.COURSES,t));e.exists?de(e.data()):de(null)}catch(o){console.error("Error fetching course data:",o,t)}},children:[(0,M.jsx)("option",{value:"",children:"Select a course..."}),t&&t.length>0?t.map((e=>(0,M.jsx)("option",{value:e,children:e},e))):(0,M.jsx)("option",{value:"",children:"No course yet!"})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(j.Z,{md:6,children:(0,M.jsx)(f.Z,{entityId:ne,title:"Course Images",storageFolder:n.Rb.COURSEICON,maxImageCount:1})}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)("br",{}),(0,M.jsx)(v.Z.Label,{children:"Course Name"}),(0,M.jsx)(v.Z.Control,{rows:1,defaultValue:ie?ie.courseName:"",style:{...se},type:"textarea",placeholder:"Enter course name",name:"name"}),(0,M.jsx)("br",{}),(0,M.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},multiple:!0,id:"tags-standard",options:L,value:J,onChange:(e,t)=>{F(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{...se}})})]}),(0,M.jsx)("br",{}),(0,M.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},multiple:!0,id:"tags-standard",options:le,value:x,onChange:(e,t)=>{p(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{...se}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(j.Z,{md:6,children:(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Duration"}),(0,M.jsx)(v.Z.Control,{defaultValue:ie?ie.duration:"",rows:1,style:{...se},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Duration In Units"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},id:"tags-standard",options:["Months","Weeks","Days"],value:q,onChange:(e,t)=>{Y(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Duration In Units",style:{...se}})})]})]})]})}),(0,M.jsx)(j.Z,{md:6,children:(0,M.jsx)(P.Z,{defaultTime:G||"00:00-00:00",handleSelect:(e,t)=>{const[o,l]=G.split(" - ");let a="".concat(o," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==t&&(a="".concat(o," - ").concat(t)),K(a)}})})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Course Start Date"}),(0,M.jsx)(E._,{dateAdapter:U.y,children:(0,M.jsx)(D.C,{components:["DatePicker"],children:(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(N.M,{sx:{width:"100%"},value:Q,onChange:e=>$(e)})]})})})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Level"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:_,onChange:(e,t)=>{W(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Level",style:{...se}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,M.jsx)(v.Z.Control,{rows:1,defaultValue:ie?ie.price:"",style:{...se},type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"City"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},id:"tags-standard",options:T.c,value:H,onChange:(e,t)=>{V(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select City",style:{...se}})})]})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Studio"}),(0,M.jsxs)(I.Z,{theme:ae,children:[(0,M.jsx)(k.ZP,{}),(0,M.jsx)(Z.Z,{style:{...se},id:"tags-standard",options:d,value:h,onChange:(e,t)=>{m(t)},renderInput:e=>(0,M.jsx)(w.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{...se}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Brief Description"}),(0,M.jsx)(R(),{theme:"snow",placeholder:"Enter Description",value:te,onChange:oe})]}),(0,M.jsxs)(j.Z,{md:6,children:[(0,M.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,M.jsx)(v.Z.Control,{rows:1,defaultValue:ie?ie.youtubeViedoLink:"",style:{...se},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,M.jsx)("hr",{}),(0,M.jsx)("hr",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(j.Z,{xs:6}),(0,M.jsx)(j.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(b.Z,{variant:"contained",style:{...se},type:"submit",disabled:X,children:"Update Course"})})]})]})]}),X&&(0,M.jsx)(y.Z,{})]})]})};const Y=function(){const[e,t]=(0,l.useState)([]),[o,v]=(0,l.useState)([]),[g,j]=(0,l.useState)([]),b=(0,r.v9)(i.w),[y,f]=(0,l.useState)([]),[S,Z]=(0,l.useState)(!1),[w,C]=(0,l.useState)(-1),{currentUser:I}=(0,d.a)(),[k,N]=l.useState("1");return(0,l.useEffect)((()=>{(async e=>{try{const e=(0,s.JU)(a.db,"User",I.uid),t=await(0,s.QT)(e);t.exists()&&null!=t.data()&&(Z(t.data().CreatorMode),C(t.data().isPremium))}catch(t){console.log(" error")}})()}),[S]),(0,l.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const t=(0,s.hJ)(a.db,n.Ul.INSTRUCTORS),o=(0,s.IO)(t,(0,s.ar)("createdBy","==",e)),l=await(0,s.PL)(o),r=[];l.forEach((e=>{r.push({id:e.id,name:e.data().name})})),f(r)})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(a.db,n.Ul.STUDIO),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=(await(0,s.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const t=e.data();return{id:e.id,...t}}));t(o.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(a.db,n.Ul.COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,s.PL)(e)).docs.filter((e=>e.data().courseName)).map((e=>{const t=e.data();return{id:e.id,...t}})).map((async e=>{const t=(0,s.JU)(a.db,n.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),o=await(0,s.QT)(t);return{...e,studioDetails:o.data()}})),o=await Promise.all(t);localStorage.setItem("CourseCreated",JSON.stringify(o)),v(o),j(o.map((e=>String(e.courseName)+" :"+String(e.id))))})()}),[v]),(0,l.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("CourseCreated"))||[];v(e);const t=e.map((e=>"".concat(e.courseName," : ").concat(e.id)));j(t)}),[j]),(0,M.jsxs)("div",{children:[(0,M.jsx)("br",{}),S?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(x.Z,{sx:{width:"100%",typography:"body1"},children:(0,M.jsxs)(u.ZP,{value:k,children:[(0,M.jsx)(x.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,M.jsxs)(h.Z,{style:{color:b?"white":"black"},onChange:(e,t)=>{N(t)},"aria-label":"lab API tabs example",children:[(0,M.jsx)(c.Z,{style:{color:b?"white":"black"},label:"Add Course",value:"1"}),(0,M.jsx)(c.Z,{style:{color:b?"white":"black"},label:"Update Course",value:"2"})]})}),(0,M.jsx)(m.Z,{value:"1",children:(0,M.jsx)(z,{instructors:y,studioId:e,setCourses:v})}),(0,M.jsx)(m.Z,{value:"2",children:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(q,{instructors:y,courseId:g,studioId:e})})})]})})}):"",o.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("h3",{style:{color:b?"white":"black"},children:"Your Courses"}),(0,M.jsx)(p.Z,{dataList:o,activateCourse:async e=>{try{const t=(0,s.JU)(a.db,n.Ul.COURSES,e);await(0,s.r7)(t,{active:!0}),v((t=>t.map((t=>t.id===e?{...t,active:!0}:t))))}catch(t){console.error(t)}},deactivateCourse:async e=>{try{const t=(0,s.JU)(a.db,n.Ul.COURSES,e);await(0,s.r7)(t,{active:!1}),v((t=>t.map((t=>t.id===e?{...t,active:!1}:t))))}catch(t){console.error(t)}},actionsAllowed:!0})]})]})}},18406:(e,t,o)=>{o.d(t,{C9:()=>n,P9:()=>r,fP:()=>s,ie:()=>i,qC:()=>a});var l=o(83708);async function a(e,t,o,a){const s=l.A3,n=localStorage.getItem("authToken");try{const l=await fetch(s+"crud/newEntity/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({data:e,collection_name:t,notify:o,metadata:a})});if(!l.ok)throw console.log("Error in postData:",l),new Error("HTTP error! status: ".concat(l.status));return l}catch(r){throw console.error("Error in postData:",r),r}}async function s(e,t,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=l.A3,r="crud/updateEntity/".concat(o),i=localStorage.getItem("authToken");try{const o=await fetch(n+r,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({data:e,collection_name:t,notify:a,metadata:s})});if(!o.ok)throw console.log("Error in postData:",o),new Error("HTTP error! status: ".concat(o.status));return o}catch(d){throw console.error("Error in postData:",d),d}}const n=async e=>{const t="".concat(l.uM.CLOUD,"bookings/bookEntity/");try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,entityType:e.entityType,entityId:e.entityId,associatedStudioId:e.associatedStudioId,emailLearner:e.emailLearner,personsAllowed:e.personsAllowed,pricePerPerson:e.pricePerPerson})}),l=await o.json();return o.ok?(console.log("Booking successful:",l),l):(console.error("Booking failed:",l),l)}catch(o){return console.error("Error occurred while booking:",o),null}},r=e=>{if(console.log("MediaDisplay",e),!e)return null;const t=e.trim().match(/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([\w\-]+)/);let o=null;return t&&(o=t[1]),console.log("MediaDisplay",o),o},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,o,l]=e.split("-");return"".concat((e=>{const t=e%10,o=1===t&&"11"!==e?"st":2===t&&"12"!==e?"nd":3===t&&"13"!==e?"rd":"th";return"".concat(e).concat(o)})(l)," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(o)-1],", ").concat(t)}},11518:()=>{},10884:(e,t,o)=>{e.exports=o.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,t,o)=>{e.exports=o.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=763.f0bc63fc.chunk.js.map