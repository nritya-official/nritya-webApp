"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2449],{52449:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var r=o(57437),a=o(2265),l=o(53392),i=o(16210),n=o(88195),s={src:"/_next/static/media/Nritya_Login_logo.d7b5ede7.png",height:168,width:160,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAa0lEQVR42iXIPQqDQBRF4QcJgaRPk7QWWghuwXoEGy1EsfEHdAXiCmxc8nC8OBwel/fZGyOiVhGGPiNjxVGykIkEAzGn+jAFGDUbB8YcoKAlYafDBTB6Bl3DK8CPihpHTorg4U39/ffep78ARD1Lgtm6gKEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d={src:"/_next/static/media/Lets_dance.9cefe37a.png",height:114,width:398,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAQAAADPnVVmAAAALElEQVR42mP4IvtF54vGF84vYl9kvwh+kWD4YvhF44vSF94vul8svph8kQAAKo4RUFi7j1AAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},u=o(46060);let c=(0,n.Z)("div")(e=>{let{theme:t}=e;return{width:"auto",backgroundColor:"#000",padding:"15px",minHeight:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}),g=(0,n.Z)("div")(e=>{let{theme:t}=e;return{height:"130px",width:"130px",margin:"0 auto"}}),m=(0,n.Z)("div")(e=>{let{theme:t}=e;return{width:"67%",minHeight:"75px",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"}});var h=e=>{let{isLoggedIn:t,setIsLoggedIn:o}=e,[l,i]=(0,a.useState)(()=>localStorage.getItem("username")||""),[n,h]=(0,a.useState)(()=>{let e=localStorage.getItem("userInfo");return e?JSON.parse(e).localId:""});return(0,r.jsxs)(c,{children:[(0,r.jsx)(g,{children:(0,r.jsx)("img",{src:s,alt:"login-box-logo",style:{width:"100%",height:"auto"}})}),(0,r.jsx)(m,{children:(0,r.jsx)("img",{src:d,alt:"login-text-img",style:{width:"100%",height:"auto"}})}),(0,r.jsx)(u.default,{onLogin:(e,t)=>{i(e.displayName),o(!0),h(e.localId),localStorage.setItem("username",e.displayName),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userInfo",JSON.stringify(e)),localStorage.setItem("userInfoFull",JSON.stringify(t)),console.log("User Info Full local",JSON.parse(localStorage.getItem("userInfoFull")))},setIsLoggedIn:o})]})},p=o(95576),A=o(81705);let I=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});var y=e=>{let{open:t,handleClose:o}=e;console.log("Open",t);let[l,i]=(0,a.useState)(()=>"true"===localStorage.getItem("isLoggedIn"));return(0,a.useEffect)(()=>{l&&"true"===localStorage.getItem("isLoggedIn")&&(console.log("It's logged in",l),o())},[l,o]),(0,r.jsx)(a.Fragment,{children:(0,r.jsxs)(I,{onClose:o,"aria-labelledby":"customized-dialog-title",open:t,maxWidth:"xs",sx:{"& .MuiModal-backdrop":{backdropFilter:"blur(8px)"}},children:[(0,r.jsx)(p.Z,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,r.jsx)(A.Z,{})}),(0,r.jsx)(h,{isLoggedIn:l,setIsLoggedIn:i})]})})}},46060:function(e,t,o){o.r(t);var r=o(57437),a=o(2265),l=o(99376),i=o(70919),n=o(44752),s=o(5978),d=o(12003),u=o(24402),c=o(4670),g=o(19978),m=o(76631),h=o(68712),p=o(89349);t.default=function(){let[e,t]=(0,a.useState)(!1),[o,A]=(0,a.useState)(null),I=async(e,t)=>{A(e?.displayName),localStorage.setItem("username",o),localStorage.setItem("isLoggedIn",!0),localStorage.setItem("userInfo",JSON.stringify(e)),localStorage.setItem("userInfoFull",JSON.stringify(t))},y=(0,l.useRouter)(),f=async e=>{try{let t=(0,s.JU)(i.db,d.Ul.USER,e.uid);if((await (0,s.QT)(t)).exists())console.log("User there");else{console.log("No such document!");let t={Name:e.displayName,Email:e.email,DoB:null,UserId:e.uid,WorkshopCreated:[],WorkshopEnrolled:[],Cart:[],CreatorMode:!1,KycIdList:{},StudioCreated:[],premiumTill:!1,TransactionIDs:[],recentlyWatched:{0:"",1:"",2:"",3:"",4:""}},o=e.email,r={user_id:e.uid},a=await (0,p.qC)(t,d.Ul.USER,o,r);a.ok?console.log("User added successfully"):console.error(a)}let o=(0,s.JU)(i.db,d.Ul.USER,e.uid),r=await (0,s.QT)(o);localStorage.setItem("userDetails",JSON.stringify({UserId:e.uid,email:e.email,isPremium:r.data().isPremium,displayName:r.data().displayName,WorkshopCreated:r.data().WorkshopCreated,WorkshopEnrolled:r.data().WorkshopEnrolled}))}catch(e){console.error("Error adding user: ",e)}},x=async()=>{try{let e=await (0,n.rh)(i.I8,i.Ap),t=n.hJ.credentialFromResult(e);t.accessToken,t.idToken;let o=e.user;if(e){let e=await i.I8.currentUser?.getIdToken();console.log("token",e),localStorage.setItem("authToken",e)}I({UserId:o.uid,email:o.email,isPremium:o.isPremium,displayName:o.displayName,WorkshopCreated:o.WorkshopCreated,WorkshopEnrolled:o.WorkshopEnrolled,CreatorMode:!1,photoURL:o.photoURL},o),await f(o),await (0,h.oM)(o.uid),y.push("/")}catch(e){console.log("Invalid username or password"),t(!0)}};return(0,r.jsx)(g.Z,{fluid:!0,className:"custom-container-main",children:(0,r.jsx)(u.Z,{children:(0,r.jsx)(c.Z,{xs:12,md:12,children:(0,r.jsx)("div",{children:(0,r.jsx)("form",{className:"custom-login-form",onSubmit:e=>{e.preventDefault(),x()},style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"15px 0"},children:(0,r.jsxs)(m.Z,{type:"submit",style:{backgroundColor:"#D9D9D9",color:"#000",borderRadius:"6px",textTransform:"none",border:"1px solid #777",padding:"8px 16px"},children:[(0,r.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Icon",style:{marginRight:"10px",height:"20px"}}),"Sign In with Google"]})})})})})})}},89349:function(e,t,o){o.d(t,{C9:function(){return l},P9:function(){return i},ie:function(){return n},qC:function(){return a}});var r=o(12003);async function a(e,t,o,a){let l=r.A3,i=localStorage.getItem("authToken");try{let r=await fetch(l+"crud/newEntity/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({data:e,collection_name:t,notify:o,metadata:a})});if(!r.ok)throw console.log("Error in postData:",r),Error(`HTTP error! status: ${r.status}`);return r}catch(e){throw console.error("Error in postData:",e),e}}let l=async e=>{let t=`${r.uM.CLOUD}bookings/bookEntity/`;try{let o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,entityType:e.entityType,entityId:e.entityId,associatedStudioId:e.associatedStudioId,emailLearner:e.emailLearner,personsAllowed:e.personsAllowed,pricePerPerson:e.pricePerPerson})}),r=await o.json();if(o.ok)return console.log("Booking successful:",r),r;return console.error("Booking failed:",r),r}catch(e){return console.error("Error occurred while booking:",e),null}},i=e=>{if(console.log("MediaDisplay",e),!e)return null;let t=e.trim().match(/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([\w\-]+)/),o=null;return t&&(o=t[1]),console.log("MediaDisplay",o),o},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",[t,o,r]=e.split("-");return`${(e=>{let t=e%10;return`${e}${1===t&&"11"!==e?"st":2===t&&"12"!==e?"nd":3===t&&"13"!==e?"rd":"th"}`})(r)} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(o)-1]}, ${t}`}}}]);