"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[7472],{26073:(e,o,l)=>{l.d(o,{Z:()=>d});l(72791);var t=l(89743),r=l(2677),a=l(13855),s=l(59434),n=l(60717),i=l(80184);const d=e=>{var o;let{defaultTime:l,handleSelect:d}=e;const c=l.split("-")[0].trim(),u=null===(o=l.split("-")[1])||void 0===o?void 0:o.trim(),h=(0,s.v9)(n.w),p=e=>{const o=(()=>{const e=[];let o=[],l=[];for(let t=0;t<24;t++)for(let e=0;e<60;e+=30){const r=t.toString().padStart(2,"0"),a=e.toString().padStart(2,"0"),s=`${r}:${a}`;if(t<12)o.push(`${s} AM`);else{const e=(t-12).toString().padStart(2,"0");l.push(`${e}:${a} PM`)}}for(let t=0;t<o.length||t<l.length;t++)t<o.length&&e.push(o[t]),t<l.length&&e.push(l[t]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),o.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(t.Z,{children:[(0,i.jsx)(r.Z,{children:(0,i.jsxs)(a.Z.Group,{children:[(0,i.jsx)(a.Z.Label,{children:"Start Time"}),(0,i.jsx)(a.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black"},children:p(c)})]})}),(0,i.jsx)(r.Z,{children:(0,i.jsxs)(a.Z.Group,{children:[(0,i.jsx)(a.Z.Label,{children:"End Time"}),(0,i.jsx)(a.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black"},children:p(u)})]})})]})}},76785:(e,o,l)=>{l.d(o,{Z:()=>O});l(11518);var t=l(72791),r=l(92552),a=l(84654),s=l(28658),n=l(69597),i=l(83168),d=l(88447),c=l(697),u=l(61889),h=l(20890),p=l(94294),x=l(13400),v=l(36314),m=l(59434),b=l(83708),j=l(68449),g=l(60717),k=l(97892),w=l.n(k),S=l(12481),Z=l(10159),y=l(75424),f=l(49071),I=l(10884),C=l(80184);function N(e){var o,l,r,a,s,n;let{open:i,handleClose:v,dataItem:j,activateWorkshop:k,deactivateWorkshop:N,actionsAllowed:D}=e;const O=(0,y.D)(),W=(0,m.v9)(g.w),[U,P]=(0,t.useState)(!1),[E,L]=(0,t.useState)(null),J=null===(o=JSON.parse(localStorage.getItem("userInfo")))||void 0===o?void 0:o.UserId;(0,t.useEffect)((()=>{(async()=>{try{const e=(0,S.JU)(Z.db,"User",J),o=await(0,S.QT)(e);o.exists()&&L(o.data())}catch(e){console.log(" error")}})()}),[]);const R=j.UserId===J,A=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),F=null===E||void 0===E||null===(l=E.BookedWorkshops)||void 0===l||null===(r=l.includes)||void 0===r?void 0:r.call(l,null===j||void 0===j?void 0:j.id);return(0,C.jsx)(d.Z,{open:i,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,C.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:W?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:W?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,C.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,C.jsx)(u.ZP,{item:!0,xs:12,lg:8,children:(0,C.jsx)("img",{src:j.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,C.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,C.jsxs)(c.Z,{sx:{height:"100%",bgcolor:W?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,C.jsxs)(c.Z,{sx:{flex:1},children:[(0,C.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:W?"white":"black"},children:w()(j.date).format("LL")}),(0,C.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:W?"white":"black"},children:j.time}),(0,C.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:W?"white":"black"},children:j.venue})]}),(0,C.jsxs)(c.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,C.jsxs)(h.Z,{variant:"h5",sx:{alignSelf:"center",color:W?"white":"black"},children:["\u20b9",j.price]}),!D&&!R&&J&&(0,C.jsx)(p.Z,{variant:"outlined",onClick:async()=>{try{P(!0),(0,S.ET)((0,S.hJ)(Z.db,b.Ul.BOOKINGS),{StudioId:j.StudioId,WorkshopId:j.id,UserId:J,bookingDate:Date.now()});const e=(0,S.JU)(Z.db,"User",J),o=await(0,S.QT)(e);o.exists()&&null!=o.data()&&await(0,S.r7)(e,{BookedWorkshops:[...o.data().BookedWorkshops||[],j.id]}),L((e=>({...e,BookedWorkshops:[...(null===e||void 0===e?void 0:e.BookedWorkshops)||[],j.id]}))),O("Workshop booked","success")}catch(e){console.error(e),O((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{P(!1)}},disabled:F||U,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:W?"white":"black",color:W?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:W?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:W?"white":"black"},"&:focus":{boxShadow:"none"}},children:F?"Booked":"Book Now"})]})]}),!D&&!R&&J&&(0,C.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:W?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,C.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,C.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:W?"white":"black"},children:[j.workshopName||"",j.danceStyles.map((e=>` | ${e}`))]}),(0,C.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:W?"white":"black"},children:[(0,C.jsxs)("span",{children:["By ",(null===(a=j.studioDetails)||void 0===a?void 0:a.studioName)||""]}),j.studioDetails&&(null===(s=j.studioDetails)||void 0===s?void 0:s.whatsappNumber)&&(0,C.jsx)(x.Z,{color:"success",size:"small",target:"_blank",href:`https://wa.me/91${j.studioDetails.whatsappNumber}?text=${A}`,children:(0,C.jsx)("img",{src:f,alt:"Whatsapp call",style:{width:30,height:28}})}),j.studioDetails&&(null===(n=j.studioDetails)||void 0===n?void 0:n.mobileNumber)&&(0,C.jsx)(x.Z,{color:"primary",size:"small",target:"_blank",href:`tel:${j.studioDetails.mobileNumber}`,children:(0,C.jsx)("img",{src:I,alt:"Phone call",style:{width:30,height:28}})})]}),(0,C.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:2,color:W?"white":"black"},children:j.description||""})]})]}),(0,C.jsxs)(c.Z,{sx:{mt:"1rem",textAlign:"right"},children:[D&&R&&(0,C.jsx)(p.Z,{onClick:()=>null!==j&&void 0!==j&&j.active?N(null===j||void 0===j?void 0:j.id):k(null===j||void 0===j?void 0:j.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==j&&void 0!==j&&j.active?"Deactivate":"Activate"}),(0,C.jsx)(p.Z,{onClick:v,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:W?"white":"black",color:W?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:W?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:W?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function D(e){var o;let{actionsAllowed:l,dataItem:d,activateWorkshop:u,deactivateWorkshop:h}=e;const p=(0,m.v9)(g.w),[x,k]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),Z=d.id;(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,j.Us)(b.Rb.WORKSHOPICON,Z);k(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[d.id]);const y={backgroundColor:p?"#444":"white",padding:"0px",color:p?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(a.Z,{variant:"solid",sx:{...y,"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"},onClick:()=>S(!0),children:[(0,C.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,C.jsx)("img",{src:x,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,C.jsx)(v.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:d&&d.danceStyles?d.danceStyles.slice(0,3).map(((e,o)=>(0,C.jsx)(n.Z,{color:o%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},o))):(0,C.jsx)(n.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,C.jsxs)(s.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,C.jsxs)(c.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:p?"white":"black",extDecoder:"one"},children:[(0,C.jsx)("span",{children:d&&d.workshopName?d.workshopName:""}),!(null!==d&&void 0!==d&&d.active)&&(0,C.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,C.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(o=d.studioDetails)&&void 0!==o&&o.studioName?d.studioDetails.studioName:""]}),(0,C.jsx)(i.ZP,{style:{marginTop:10,color:p?"white":"black"},level:"body-xs",noWrap:!0,children:d.venue?d.venue:""}),(0,C.jsxs)(i.ZP,{style:{color:p?"white":"black"},level:"body-xs",children:[d.date||""," | ",d.time||""]})]})]}),(0,C.jsx)(N,{dataItem:{...d,imageUrl:x},open:w,handleClose:()=>S(!1),activateWorkshop:u,deactivateWorkshop:h,actionsAllowed:l})]})}const O=e=>{let{actionsAllowed:o,dataList:l,activateWorkshop:t,deactivateWorkshop:r}=e;return(0,C.jsx)("div",{className:"horizontal-scroll-wrapper",children:l.map(((e,l)=>(0,C.jsx)(D,{dataItem:e,activateWorkshop:t,deactivateWorkshop:r,actionsAllowed:o},e.id)))})}},77472:(e,o,l)=>{l.r(o),l.d(o,{default:()=>F});var t=l(72791),r=l(10159),a=l(12481),s=l(83708),n=l(59434),i=l(60717),d=l(61224),c=l(43896),u=l(83449),h=l(47283),p=l(82851),x=l(697),v=l(13855),m=l(89743),b=l(2677),j=l(94294),g=l(81018),k=l(51650),w=l(49644),S=l(76989),Z=l(67107),y=l(44507),f=l(4708),I=l(82718),C=l(4560),N=l(24750),D=l(71652),O=l(97892),W=l.n(O),U=l(26073),P=l(75424),E=l(82873),L=l(80184);const J=function(e){let{instructors:o,studioId:l,setWorkshop:d}=e;const c=(0,P.D)(),[u,h]=(0,t.useState)(""),p=(0,n.v9)(i.w),[x,O]=(0,t.useState)([]),[J,R]=(0,t.useState)([]),A=o.map((e=>`${e.name} - ${e.id}`)),F=k.W,T=localStorage.getItem("filterLocation")||"",[$,B]=(0,t.useState)(!1),[V,H]=(0,t.useState)(""),[Y,z]=(0,t.useState)(null),[K,M]=(0,t.useState)(""),[_,q]=(0,t.useState)(T),[G,Q]=(0,t.useState)(""),[X,ee]=(0,t.useState)(W()(new Date)),[oe,le]=(0,t.useState)(!1),[te,re]=(0,t.useState)(1),ae=(0,Z.Z)({palette:{mode:p?"dark":"light"}}),se=e=>{e.reset(),R([]),O([]),z(null),H(""),M(""),Q(""),ee(W()(new Date)),q("")};return(0,t.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const b=(0,a.IO)((0,a.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,a.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),j=await(0,a.PL)(b);if(j.empty){var t,n,i,d,c,u,h,p,v;await(0,a.ET)((0,a.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),{workshopName:(null===(t=e.workshopName)||void 0===t?void 0:t.value)||"",price:(null===(n=e.workshopFees)||void 0===n?void 0:n.value)||0,venue:(null===(i=e.workshopVenue)||void 0===i?void 0:i.value)||"",description:(null===(d=e.description)||void 0===d?void 0:d.value)||"",danceStyles:J,instructors:x?null===x||void 0===x||null===(c=x.map)||void 0===c?void 0:c.call(x,(e=>{var o,l,t,r;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(l=o.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:Y&&(null===Y||void 0===Y||null===(u=Y.split)||void 0===u||null===(h=u.call(Y,":"))||void 0===h||null===(p=h[1])||void 0===p||null===(v=p.trim)||void 0===v?void 0:v.call(p))||null,duration:V,level:K,time:G,date:X.format("YYYY-MM-DD"),city:_})}else{var m;let t=[];j.forEach((e=>{t.push({id:e.id,...e.data()})}));let r=t[0];e.workshopName.value=(null===r||void 0===r?void 0:r.workshopName)||"",e.workshopFees.value=(null===r||void 0===r?void 0:r.price)||0,e.workshopVenue.value=(null===r||void 0===r?void 0:r.venue)||"",e.description.value=(null===r||void 0===r?void 0:r.description)||"",R(null!==r&&void 0!==r&&null!==(m=r.danceStyles)&&void 0!==m&&m.length?r.danceStyles:[]),O(o.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`)));const a=l.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));a>0&&z(l[a]),H((null===r||void 0===r?void 0:r.duration)||""),M((null===r||void 0===r?void 0:r.level)||""),Q((null===r||void 0===r?void 0:r.time)||""),ee(W()((null===r||void 0===r?void 0:r.date)||Date.now())),q((null===r||void 0===r?void 0:r.city)||"")}B(!0)}catch(b){console.error(b)}}()}),[]),(0,t.useEffect)((()=>{let e=null;return $&&async function(){const o=document.getElementById("addStudioForm");try{const l=(0,a.IO)((0,a.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,a.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=await(0,a.PL)(l);if(!t.empty){let l=[];t.forEach((e=>{l.push({id:e.id,...e.data()})}));let n=l[0];const i=(0,a.JU)(r.db,s.i0.DRAFT_WORKSHOPS,n.id);e=setInterval((async()=>{try{var e,l,t,r,s,n,d,c,u;await(0,a.r7)(i,{workshopName:(null===(e=o.workshopName)||void 0===e?void 0:e.value)||"",price:(null===(l=o.workshopFees)||void 0===l?void 0:l.value)||0,venue:(null===(t=o.workshopVenue)||void 0===t?void 0:t.value)||"",description:(null===(r=o.description)||void 0===r?void 0:r.value)||"",danceStyles:J,instructors:x?null===x||void 0===x||null===(s=x.map)||void 0===s?void 0:s.call(x,(e=>{var o,l,t,r;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(l=o.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,StudioId:Y&&(null===Y||void 0===Y||null===(n=Y.split)||void 0===n||null===(d=n.call(Y,":"))||void 0===d||null===(c=d[1])||void 0===c||null===(u=c.trim)||void 0===u?void 0:u.call(c))||null,duration:V,level:K,time:G,date:X.format("YYYY-MM-DD"),city:_})}catch(h){console.error(h)}}),1e4)}}catch(l){console.error(l)}}(),()=>clearInterval(e)}),[$,J,x,Y,V,K,G,X,_]),(0,L.jsxs)("div",{children:[1===te&&(0,L.jsx)(v.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&e.workshopVenue.value&&e.description.value&&null!==J&&void 0!==J&&J.length&&null!==x&&void 0!==x&&x.length&&Y&&V&&K&&G&&X&&_||(o=!1),o})(o))try{var l,t,n,i,u;const p={workshopName:e.target.workshopName.value,danceStyles:J,instructors:x?null===x||void 0===x||null===(l=x.map)||void 0===l?void 0:l.call(x,(e=>{var o,l,t,r;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(l=o.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:Y&&(null===Y||void 0===Y||null===(t=Y.split)||void 0===t||null===(n=t.call(Y,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(u=i.trim)||void 0===u?void 0:u.call(i))||null,duration:V,level:K,time:G,date:X.format("YYYY-MM-DD"),price:e.target.workshopFees.value,venue:e.target.workshopVenue.value,description:e.target.description.value,city:_,active:!0};le(!0);const v=await(0,a.ET)((0,a.hJ)(r.db,s.Ul.WORKSHOPS),p);h(v.id),d((e=>[...e,{id:v.id,...p}]));const m=(0,a.JU)(r.db,"User",JSON.parse(localStorage.getItem("userInfo")).UserId),b=await(0,a.QT)(m);b.exists()&&null!=b.data()&&await(0,a.r7)(m,{WorkshopCreated:[...b.data().WorkshopCreated,v.id]}),se(o),(async()=>{const e=(0,a.IO)((0,a.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,a.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=await(0,a.PL)(e);if(!o.empty){let e=[];o.forEach((o=>{e.push({id:o.id,...o.data()})}));let l=e[0];const t=(0,a.JU)(r.db,s.i0.DRAFT_WORKSHOPS,l.id);await(0,a.oe)(t)}})(),c("Workshop successfully added.","success"),re((e=>e+1))}catch(p){console.error("Error adding workshop: ",p),c((null===p||void 0===p?void 0:p.message)||"Something went wrong","error")}finally{le(!1)}else c("Please fill all the fields.","error")},style:{backgroundColor:p?"#202020":"",color:p?"white":"black"},children:(0,L.jsx)(v.Z.Group,{controlId:"formBasicAdd",children:(0,L.jsxs)("div",{children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Workshop Name"}),(0,L.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:F,value:J,onChange:(e,o)=>{R(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:A,value:x,onChange:(e,o)=>{O(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Duration (in hours)"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:V,onChange:(e,o)=>{H(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(b.Z,{md:6,children:(0,L.jsx)(U.Z,{defaultTime:G||"00:00-00:00",handleSelect:(e,o)=>{const[l,t]=G.split(" - ");let r=`${l} - ${t}`;null!==e&&(r=`${e} - ${t}`),null!==o&&(r=`${l} - ${o}`),Q(r)}})}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Date"}),(0,L.jsx)(D._,{dateAdapter:N.y,children:(0,L.jsx)(C.C,{components:["DatePicker"],children:(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(I.M,{sx:{width:"100%"},value:X,onChange:e=>ee(e)})]})})})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Level"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:K,onChange:(e,o)=>{M(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,L.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Venue"}),(0,L.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"text",placeholder:"Enter Venue",name:"workshopVenue"})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"City"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:E.c,value:_,onChange:(e,o)=>{q(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Studio"}),(0,L.jsxs)(y.Z,{theme:ae,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:l,value:Y,onChange:(e,o)=>{z(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Brief Description"}),(0,L.jsx)(v.Z.Control,{rows:3,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},as:"textarea",placeholder:"Enter Description",name:"description"})]})]}),(0,L.jsx)("hr",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(b.Z,{xs:6}),(0,L.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,L.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},type:"submit",disabled:oe,children:"Next"})})]})]})})}),2===te&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m.Z,{children:(0,L.jsx)(b.Z,{children:(0,L.jsx)(g.Z,{entityId:u,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})})}),(0,L.jsx)(m.Z,{style:{margin:"1rem 0"},children:(0,L.jsx)(b.Z,{style:{textAlign:"right"},children:(0,L.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},onClick:()=>re((e=>e-1)),children:"Done"})})})]})]})};const R=function(e){let{workshopId:o,instructors:l,studioId:d}=e;const c=localStorage.getItem("filterLocation")||"",u=(0,P.D)(),[h,p]=(0,t.useState)(null),[x,O]=(0,t.useState)([]),J=k.W,[R,A]=(0,t.useState)([]),F=(0,n.v9)(i.w),[T,$]=(0,t.useState)(""),[B,V]=(0,t.useState)(""),[H,Y]=(0,t.useState)(c),[z,K]=(0,t.useState)(""),[M,_]=(0,t.useState)(W()(new Date)),[q,G]=(0,t.useState)(!1),Q=l.map((e=>`${e.name} - ${e.id}`)),X=(0,Z.Z)({palette:{mode:F?"dark":"light"}}),[ee,oe]=(0,t.useState)(""),[le,te]=(0,t.useState)(null),re=e=>{e.reset(),A([]),O([]),p(null),$(""),V(""),K(""),_(W()(new Date)),Y(""),te(null),oe("")};return(0,t.useEffect)((()=>{if(le){const e=l.filter((e=>le.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`));if(O(e),le&&le.danceStyles&&A(le.danceStyles),le&&le.duration&&$(le.duration),le&&le.level&&V(le.level),le&&le.time&&K(le.time),le&&le.date&&_(W()(le.date)),le&&le.StudioId){const e=d.map((e=>e.split(":")[1].trim())).findIndex((e=>e===le.StudioId));p(d[e]||null)}Y((null===le||void 0===le?void 0:le.city)||"")}}),[le]),(0,L.jsxs)("div",{style:{backgroundColor:F?"#202020":"",color:F?"white":"black"},children:[(0,L.jsx)("br",{}),(0,L.jsx)(v.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if(ee)if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&e.workshopVenue.value&&e.description.value&&null!==R&&void 0!==R&&R.length&&null!==x&&void 0!==x&&x.length&&h&&T&&B&&z&&M&&H||(o=!1),o})(o)){try{var l,t,n,i,d;const e={workshopName:o.workshopName.value,price:o.workshopFees.value,venue:o.workshopVenue.value,description:o.description.value,danceStyles:R,instructors:x?null===x||void 0===x||null===(l=x.map)||void 0===l?void 0:l.call(x,(e=>{var o,l,t,r;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(l=o.call(e,"-"))||void 0===l||null===(t=l[1])||void 0===t||null===(r=t.trim)||void 0===r?void 0:r.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(t=h.split)||void 0===t||null===(n=t.call(h,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:T,level:B,time:z,date:M.format("YYYY-MM-DD"),city:H};G(!0);const c=(0,a.JU)(r.db,s.Ul.WORKSHOPS,ee);await(0,a.r7)(c,e),re(o),u("Workshop successfully updated.","success")}catch(c){console.error("Error updating workshop: ",c),u((null===c||void 0===c?void 0:c.message)||"Something went wrong","error")}finally{G(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:(0,L.jsxs)(v.Z.Group,{controlId:"formBasicUpdate",children:[(0,L.jsx)(v.Z.Label,{children:"Id"}),(0,L.jsxs)(v.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},onChange:async e=>{e.preventDefault();const o=e.target.value.split(":").pop().trim();oe(o);try{const e=await(0,a.QT)((0,a.JU)(r.db,s.Ul.WORKSHOPS,o));e.exists?te(e.data()):te(null)}catch(l){console.error("Error fetching workshop data:",l,o)}},children:[(0,L.jsx)("option",{value:"",children:"Select a workshop..."}),o&&o.length>0?o.map((e=>(0,L.jsx)("option",{value:e,children:e},e))):(0,L.jsx)("option",{value:"",children:"No workshop yet!"})]}),(0,L.jsxs)("div",{children:[(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(b.Z,{md:6,children:(0,L.jsx)(g.Z,{entityId:ee,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)("br",{}),(0,L.jsx)(v.Z.Label,{children:"Workshop Name"}),(0,L.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.workshopName:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"}),(0,L.jsx)("br",{}),(0,L.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:J,value:R,onChange:(e,o)=>{A(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]}),(0,L.jsx)("br",{}),(0,L.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},multiple:!0,id:"tags-standard",options:Q,value:x,onChange:(e,o)=>{O(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Duration (in hours)"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:T,onChange:(e,o)=>{$(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]}),(0,L.jsx)(b.Z,{md:6,children:(0,L.jsx)(U.Z,{defaultTime:z||"00:00-00:00",handleSelect:(e,o)=>{const[l,t]=z.split(" - ");let r=`${l} - ${t}`;null!==e&&(r=`${e} - ${t}`),null!==o&&(r=`${l} - ${o}`),K(r)}})})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Date"}),(0,L.jsx)(D._,{dateAdapter:N.y,children:(0,L.jsx)(C.C,{components:["DatePicker"],children:(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(I.M,{sx:{width:"100%"},value:M,onChange:e=>_(e)})]})})})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Level"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:B,onChange:(e,o)=>{V(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,L.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.price:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Venue"}),(0,L.jsx)(v.Z.Control,{rows:1,defaultValue:le?le.venue:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},type:"text",placeholder:"Enter Venue",name:"workshopVenue"})]})]}),(0,L.jsx)("br",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"City"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:E.c,value:H,onChange:(e,o)=>{Y(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]}),(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Studio"}),(0,L.jsxs)(y.Z,{theme:X,children:[(0,L.jsx)(f.ZP,{}),(0,L.jsx)(w.Z,{style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},id:"tags-standard",options:d,value:h,onChange:(e,o)=>{p(o)},renderInput:e=>(0,L.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"}})})]})]})]}),(0,L.jsx)("br",{}),(0,L.jsx)(m.Z,{children:(0,L.jsxs)(b.Z,{md:6,children:[(0,L.jsx)(v.Z.Label,{children:"Brief Description"}),(0,L.jsx)(v.Z.Control,{rows:3,defaultValue:le?le.description:"",style:{backgroundColor:F?"#333333":"",color:F?"white":"black"},as:"textarea",placeholder:"Enter Description",name:"description"})]})}),(0,L.jsx)("hr",{}),(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(b.Z,{xs:6}),(0,L.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,L.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:F?"#892cdc":"black"},type:"submit",disabled:q,children:"Update Workshop"})})]})]})]})})]})};var A=l(76785);const F=function(){const[e,o]=(0,t.useState)([]),[l,v]=(0,t.useState)([]),[m,b]=(0,t.useState)([]),j=(0,n.v9)(i.w),[g,k]=(0,t.useState)([]),[w,S]=(0,t.useState)(!1),[Z,y]=(0,t.useState)(-1),{currentUser:f}=(0,d.a)(),[I,C]=t.useState("1");return(0,t.useEffect)((()=>{(async e=>{try{const e=(0,a.JU)(r.db,"User",f.uid),o=await(0,a.QT)(e);o.exists()&&null!=o.data()&&(S(o.data().CreatorMode),y(o.data().isPremium))}catch(o){console.log(" error")}})()}),[w]),(0,t.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const o=(0,a.hJ)(r.db,s.Ul.INSTRUCTORS),l=(0,a.IO)(o,(0,a.ar)("createdBy","==",e)),t=await(0,a.PL)(l),n=[];t.forEach((e=>{n.push({id:e.id,name:e.data().name})})),k(n)})()}),[]),(0,t.useEffect)((()=>{(async()=>{const e=(0,a.IO)((0,a.hJ)(r.db,s.Ul.STUDIO),(0,a.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),l=(await(0,a.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const o=e.data();return{id:e.id,...o}}));o(l.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,t.useEffect)((()=>{(async()=>{const e=(0,a.IO)((0,a.hJ)(r.db,s.Ul.WORKSHOPS),(0,a.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=(await(0,a.PL)(e)).docs.filter((e=>e.data().workshopName)).map((e=>{const o=e.data();return{id:e.id,...o}})).map((async e=>{const o=(0,a.JU)(r.db,s.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),l=await(0,a.QT)(o);return{...e,studioDetails:l.data()}})),l=await Promise.all(o);localStorage.setItem("WorkshopCreated",JSON.stringify(l)),v(l),b(l.map((e=>String(e.workshopName)+" :"+String(e.id))))})()}),[v]),(0,t.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("WorkshopCreated"))||[];v(e);const o=e.map((e=>`${e.workshopName} : ${e.id}`));b(o)}),[b]),(0,L.jsxs)("div",{children:[(0,L.jsx)("br",{}),w?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(x.Z,{sx:{width:"100%",typography:"body1"},children:(0,L.jsxs)(u.ZP,{value:I,children:[(0,L.jsx)(x.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,L.jsxs)(h.Z,{style:{color:j?"white":"black"},onChange:(e,o)=>{C(o)},"aria-label":"lab API tabs example",children:[(0,L.jsx)(c.Z,{style:{color:j?"white":"black"},label:"Add Workshop",value:"1"}),(0,L.jsx)(c.Z,{style:{color:j?"white":"black"},label:"Update Workshop",value:"2"})]})}),(0,L.jsx)(p.Z,{value:"1",children:(0,L.jsx)(J,{instructors:g,studioId:e,setWorkshop:v})}),(0,L.jsx)(p.Z,{value:"2",children:(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(R,{instructors:g,workshopId:m,studioId:e})})})]})})}):"",l.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("h3",{style:{color:j?"white":"black"},children:"Your Workshops"}),(0,L.jsx)(A.Z,{dataList:l,activateWorkshop:async e=>{try{const o=(0,a.JU)(r.db,s.Ul.WORKSHOPS,e);await(0,a.r7)(o,{active:!0}),v((o=>o.map((o=>o.id===e?{...o,active:!0}:o))))}catch(o){console.error(o)}},deactivateWorkshop:async e=>{try{const o=(0,a.JU)(r.db,s.Ul.WORKSHOPS,e);await(0,a.r7)(o,{active:!1}),v((o=>o.map((o=>o.id===e?{...o,active:!1}:o))))}catch(o){console.error(o)}},actionsAllowed:!0})]})]})}},11518:()=>{},10884:(e,o,l)=>{e.exports=l.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,o,l)=>{e.exports=l.p+"static/media/whatsapp.8d81ece5885274edfd73.png"}}]);
//# sourceMappingURL=7472.a8fe473d.chunk.js.map