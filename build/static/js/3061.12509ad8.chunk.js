"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[3061],{83061:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(72791),n=a(47022),r=a(95313),l=a(43360),o=a(59434),i=a(60717),c=a(68449),d=a(83708),u=a(16836),h=a(89704),m=a.n(h),p=a(78436),b=a(18406),g=a(20890),x=a(57482),f=a(82873),y=a(65202),v=a(80184);const j=new Map([["first_name","First Name"],["middle_last_name","Middle & Last Name"],["phone_number","Phone Number"],["street_address","Street Address"],["city","City"],["state_province","State"],["state","State"],["zip_pin_code","PIN Code/ZIP"],["aadhar","Aadhar Number"],["gstin","GST Number"],["comments","Remark(s)"]]),C=[["first_name"],["middle_last_name"],["phone_number"],["street_address"],["city"],["state_province","state"],["zip_pin_code"]],S=f.c,k=y.$;const _=function(){var e,t,a;const[h,f]=(0,s.useState)({first_name:"",middle_last_name:"",phone_number:"",street_address:"",city:"",state_province:"",zip_pin_code:"",country:"India",aadhar:"",gstin:"",comments:"",status:d.n$.SUBMITTED,tncAgreed:!1,hash:""}),[y,_]=(0,s.useState)(null),E=(0,o.v9)(i.w),[w,I]=(0,s.useState)({}),N=null===(e=JSON.parse(localStorage.getItem("userInfo")))||void 0===e?void 0:e.UserId,R="".concat(N,"_Kyc"),[A,Z]=(0,s.useState)(null),[U,T]=(0,s.useState)(null),[D,O]=(0,s.useState)([]),[F,$]=(0,s.useState)([]),[L,V]=(0,s.useState)(!1),[G,M]=(0,s.useState)(-1),[B,K]=(0,s.useState)(-1),[z,q]=(0,s.useState)(!1),P=null===(t=JSON.parse(localStorage.getItem("userInfo")))||void 0===t?void 0:t.email,Y=null===(a=JSON.parse(localStorage.getItem("userInfo")))||void 0===a?void 0:a.displayName,W=e=>{const{name:t,value:a}=e.target,s=(0,p.O)(t,a);I((e=>({...e,[t]:s}))),f((e=>({...e,[t]:a})))};(0,s.useEffect)((()=>{(async()=>{const e=await(0,c.Ld)(d.Ul.USER_KYC,R);e?(_(e),f({...e,status:e.status||d.n$.SUBMITTED})):_(null)})(),(async()=>{const e="".concat(d.Rb.CREATORS_KYC_DOCUMENTS,"/").concat(N);try{const[t,a]=await Promise.all([(0,c.XG)("".concat(e,"/Aadhar/")),(0,c.XG)("".concat(e,"/Gst/"))]);t&&t.length>0?Z(t):(Z(null),console.warn("No Aadhar documents found.")),a&&a.length>0?T(a):(T(null),console.warn("No GST documents found."))}catch(t){console.error("Error fetching KYC documents:",t)}})()}),[R]);const J=["status","hash","country","tncAgreed","comments","UserId","gstin","aadhar"];return(0,v.jsxs)("div",{style:{color:E?"white":"black"},children:[(0,v.jsxs)(n.Z,{className:"glassmorphic-container",style:{margin:"auto",border:E?"1px solid white":"1px solid black",borderRadius:"5px",padding:"20px"},children:[(0,v.jsxs)(r.Z,{onSubmit:async e=>{e.preventDefault(),q(!0);try{const t=Object.keys(h).filter((e=>!["hash","status","country","comments","UserId"].includes(e)));let a=!0,s=[],n=0;if(t.forEach((e=>{const t=(0,p.O)(e,h[e]);t&&(a=!1,n+=1,s.push("".concat(n,": ").concat(t)),I((a=>({...a,[e]:t}))))})),!a)return void alert("Please correct the following errors before submitting:\n\n".concat(s.join("\n")));const r=await(0,c.Ld)(d.Ul.USER_KYC,R),l=(e=>{const t=Object.keys(e).filter((e=>"hash"!==e&&"status"!==e)).sort().map((t=>"".concat(t,":").concat(e[t]))).join("|");return m().SHA256(t).toString()})(h);console.log(l,null===r||void 0===r?void 0:r.hash);const o=P,i={user_name:Y,user_id:N};if(r){if(r.hash!==l){const e={...h,hash:l};await(0,b.qC)(e,d.Ul.USER_KYC,o,i)}}else{const e={...h,hash:l};await(0,b.qC)(e,d.Ul.USER_KYC,o,i)}D&&(console.log(D),await(0,c.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,N,"Aadhar"),M(0),await(0,c.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,D,N,"Aadhar",(e=>M(e)),(e=>{Z(e),console.log(e)}))),F&&(console.log(F),await(0,c.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,N,"Gst"),K(0),await(0,c.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,F,N,"Gst",(e=>K(e)),(e=>{T(e),console.log(e)}))),await(0,c.Xt)(d.Ul.USER,N,{KycIdList:{[R]:h.status}}),e.target.reset()}catch(t){console.error("Error processing KYC: ",t)}finally{q(!1)}},children:[(0,v.jsx)("h1",{style:{color:E?"white":"black",textTransform:"capitalize"},children:"Verify yourself"}),(0,v.jsx)("div",{className:"row",children:C.map((e=>{const t=e.find((e=>!J.includes(e)&&void 0!==h[e]));return t?(0,v.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,v.jsxs)(r.Z.Group,{controlId:"formBasic".concat(t),children:[(0,v.jsx)(g.Z,{style:{color:E?"white":"black"},children:j.get(t)}),["city","state_province"].includes(t)?(0,v.jsxs)(r.Z.Control,{as:"select",placeholder:"Enter ".concat(j.get(t)),name:t,value:h[t],onChange:W,required:!0,className:"glassmorphic-input",style:{backgroundColor:E?"#181818":"#e5e5e5",color:E?"white":"black",paddingTop:0,paddingBottom:0},children:[(0,v.jsxs)("option",{value:"",children:["Select a ",j.get(t)]}),[..."city"===t?S:k].map(((e,t)=>(0,v.jsx)("option",{value:e,children:e},t)))]}):(0,v.jsx)(r.Z.Control,{type:"age"===t||"phone_number"===t?"number":"text",placeholder:"Enter ".concat(j.get(t)),name:t,value:h[t],onChange:W,required:!0,className:"glassmorphic-input",style:{backgroundColor:E?"#181818":"#e5e5e5",color:E?"white":"black"}}),w[t]&&(0,v.jsx)("span",{style:{color:"red"},children:w[t]})," "]})},t):null}))}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,v.jsxs)(r.Z.Group,{controlId:"formBasicAadhar",children:[(0,v.jsx)(r.Z.Label,{style:{color:E?"white":"black"},children:"Aadhar"}),(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)(r.Z.Control,{type:"text",placeholder:"Enter Aadhar Number",name:"aadhar",className:"glassmorphic-input",value:h.aadhar,onChange:W,style:{backgroundColor:E?"#181818":"#e5e5e5",color:E?"white":"black",marginRight:"10px"}}),(0,v.jsx)(l.Z,{disable:"Verified"===h.status,variant:"light",onClick:()=>document.getElementById("aadharUpload").click(),style:{padding:"0.5rem",backgroundColor:E?"#333":"#f8f9fa",color:E?"white":"black",cursor:"pointer"},children:"Upload"}),(0,v.jsx)("input",{type:"file",id:"aadharUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{O(e.target.files[0]),V(!0)})(e)})]}),A&&A.length>0&&A[0].fileURL?(0,v.jsx)(l.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(A[0].fileURL,"_blank"),children:"Download Aadhar Document"}):(0,v.jsx)("p",{style:{color:E?"white":"black"},children:(null===D||void 0===D?void 0:D.name)||"No new Aadhar file uploaded."})]}),w.aadhar&&(0,v.jsx)("span",{style:{color:"red"},children:w.aadhar}),(0,v.jsx)("div",{children:G>=0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("progress",{value:G,max:"100"}),(0,v.jsxs)("p",{children:[G,"% uploaded"]})]})})]})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,v.jsxs)(r.Z.Group,{controlId:"formBasicGst",children:[(0,v.jsx)(r.Z.Label,{style:{color:E?"white":"black"},children:"GST"}),(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)(r.Z.Control,{type:"text",placeholder:"Enter GST Number",name:"gstin",value:h.gstin,onChange:W,className:"glassmorphic-input",style:{backgroundColor:E?"#181818":"#e5e5e5",color:E?"white":"black",marginRight:"10px"}}),(0,v.jsx)(l.Z,{disable:"Verified"===h.status,variant:"light",onClick:()=>document.getElementById("gstUpload").click(),style:{padding:"0.5rem",backgroundColor:E?"#333":"#f8f9fa",color:E?"white":"black",cursor:"pointer"},children:"Upload"}),(0,v.jsx)("input",{type:"file",id:"gstUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{$(e.target.files[0]),V(!0)})(e)})]}),U&&U.length>0&&U[0].fileURL?(0,v.jsx)(l.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(U[0].fileURL,"_blank"),children:"Download GST Document"}):(0,v.jsxs)("p",{style:{color:E?"white":"black"},children:[" ",(null===F||void 0===F?void 0:F.name)||"No new GST file uploaded."]})]}),w.gstin&&(0,v.jsx)("span",{style:{color:"red"},children:w.gstin}),(0,v.jsx)("div",{children:B>=0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("progress",{value:B,max:"100"}),(0,v.jsxs)("p",{children:[B,"% uploaded"]})]})})]})}),(0,v.jsxs)("div",{class:"form-check",children:[(0,v.jsx)("input",{type:"checkbox",class:"form-check-input",id:"tnc-switch",checked:h.tncAgreed,onChange:e=>{f((t=>({...t,tncAgreed:e.target.checked})))}}),(0,v.jsx)("label",{class:"form-check-label",for:"exampleCheck1",children:(0,v.jsxs)("span",{style:{color:E?"white":"black"},children:["I agree to the ",(0,v.jsx)("a",{href:"#/npoliciesStudio",style:{color:E?"lightblue":"blue"},children:"Terms and Conditions. Click to read."})]})})]}),(0,v.jsx)("br",{}),h.comments&&(0,v.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,v.jsx)("br",{}),(0,v.jsxs)(r.Z.Group,{controlId:"formBasicComments",children:[(0,v.jsx)(r.Z.Label,{children:j.get("comments")}),(0,v.jsx)(r.Z.Control,{as:"textarea",name:"comments",value:h.comments,readOnly:!0,style:{backgroundColor:E?"#181818":"#e5e5e5",color:E?"white":"black"}})]})]}),(0,v.jsx)(l.Z,{variant:"info",type:"submit",disabled:"Verified"===h.status||!h.tncAgreed,children:"Submit"})]}),z&&(0,v.jsx)(x.Z,{}),(0,v.jsx)("br",{}),(0,v.jsx)(v.Fragment,{children:h.hash&&(0,v.jsx)(u.Z,{kycId:R,status:h.status})})]}),(0,v.jsx)("br",{})]})}},16836:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(59434),n=a(70242),r=a(74512),l=a(15825),o=a(83708),i=a(60717),c=a(80184);const d=[o.n$.SUBMITTED,o.n$.UNDER_REVIEW,o.n$.REVIEWED,o.n$.VERIFIED],u={[o.n$.SUBMITTED]:0,[o.n$.UNDER_REVIEW]:1,[o.n$.REVIEWED]:2,[o.n$.VERIFIED]:3,[o.n$.VERIFICATION_FAILED]:3},h=e=>{let{status:t}=e;const a="#67569E",h=(0,s.v9)(i.w)?"white":"black";return(0,c.jsx)(n.Z,{activeStep:u[t],alternativeLabel:!0,sx:{my:3,"& .MuiStepLabel-iconContainer .Mui-completed":{color:a},"& .MuiStepLabel-iconContainer .Mui-active":{color:a},"& .MuiStepLabel-label":{color:h,letterSpacing:"0.85px",fontFamily:"Nunito Sans",fontWeight:500,fontSize:"16.98px","&.Mui-error":{color:"error.main"}}},children:d.map(((e,a)=>(0,c.jsx)(r.Z,{children:(0,c.jsx)(l.Z,{error:e===o.n$.VERIFIED&&t===o.n$.VERIFICATION_FAILED,children:e===o.n$.VERIFIED&&t===o.n$.VERIFICATION_FAILED?"Failed Verification":e})},a)))})}},78436:(e,t,a)=>{a.d(t,{O:()=>s});const s=(e,t)=>{let a="";const s="string"===typeof t?t.trim():t;switch(e){case"first_name":s||(a="First name is required.");break;case"middle_last_name":s||(a="Last name is required.");break;case"street_address":s||(a="Street address is required.");break;case"city":s||(a="City is required.");break;case"state_province":s||(a="State is required.");break;case"zip_pin_code":s&&/^\d{6}$/.test(s)||(a="ZIP/Pin code must be exactly 6 digits.");break;case"phone_number":s&&/^\d{10}$/.test(s)||(a="Phone number must be a valid 10-digit number.");break;case"aadhar":s&&/^\d{12}$/.test(s)||(a="Aadhar number must be exactly 12 digits.");break;case"gstin":s&&/^[0-9]{2}[A-Za-z]{5}[0-9]{4}[A-Za-z]{1}[1-9A-Za-z]{1}[Zz]{1}[0-9A-Za-z]{1}$/.test(s)||(a="GSTIN must be a valid format (e.g., 22ABCDE0000A1Z5).")}return a}},15341:(e,t,a)=>{a.d(t,{FT:()=>l,ZP:()=>i});var s=a(72791),n=a(80184);const r=["as","disabled"];function l(e){let{tagName:t,disabled:a,href:s,target:n,rel:r,role:l,onClick:o,tabIndex:i=0,type:c}=e;t||(t=null!=s||null!=n||null!=r?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:a},d];const u=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),a?e.stopPropagation():null==o||o(e)};return"a"===t&&(s||(s="#"),a&&(s=void 0)),[{role:null!=l?l:"button",disabled:void 0,tabIndex:a?void 0:i,href:s,target:"a"===t?n:void 0,"aria-disabled":a||void 0,rel:"a"===t?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const o=s.forwardRef(((e,t)=>{let{as:a,disabled:s}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);const[i,{tagName:c}]=l(Object.assign({tagName:a,disabled:s},o));return(0,n.jsx)(c,Object.assign({},o,i,{ref:t}))}));o.displayName="Button";const i=o},43360:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(41418),n=a.n(s),r=a(72791),l=a(15341),o=a(10162),i=a(80184);const c=r.forwardRef(((e,t)=>{let{as:a,bsPrefix:s,variant:r="primary",size:c,active:d=!1,disabled:u=!1,className:h,...m}=e;const p=(0,o.vE)(s,"btn"),[b,{tagName:g}]=(0,l.FT)({tagName:a,disabled:u,...m}),x=g;return(0,i.jsx)(x,{...b,...m,ref:t,disabled:u,className:n()(h,p,d&&"active",r&&"".concat(p,"-").concat(r),c&&"".concat(p,"-").concat(c),m.href&&u&&"disabled")})}));c.displayName="Button";const d=c}}]);
//# sourceMappingURL=3061.12509ad8.chunk.js.map