"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[3467],{33467:(e,t,l)=>{l.r(t),l.d(t,{default:()=>B});var o=l(72791),n=l(59434),s=l(60717),a=l(47022),r=l(89743),i=l(2677),c=l(95316),d=l(95313),m=l(56144),p=l(43360),h=l(67107),u=l(61889),g=l(44507),x=l(36314),j=l(5712),y=l(93006),v=l(29472),S=l(81918),f=l(16029),Z=l(52061),I=l(74569),C=l.n(I),w=l(51650),b=l(26953),L=l(5403),N=l(63466),k=l(83708),D=l(1734),A=l(51321),U=l(99637),R=l(56510),O=l(80184);const E="filterSearchType",T="filterDistances",F="filterDanceForms",z="browserGeoLoc",q=[k.zq.ALL,k.zq.BEGINNERS,k.zq.INTERMEDIATE,k.zq.ADVANCED],P=10**10,W=[1,2,3,4,5,6,7,8,9,10],H=[{name:"studio",label:"Studios",collection:k.Ul.STUDIO},{name:"workshop",label:"Workshops",collection:k.Ul.WORKSHOPS},{name:"openClass",label:"Open Classes",collection:k.Ul.OPEN_CLASSES},{name:"course",label:"Courses",collection:k.Ul.COURSES}];const B=()=>{const{setIsLoading:e}=(0,R.U)(),[t,l]=(0,o.useState)(""),[I,B]=(0,o.useState)([]),[J,G]=(0,o.useState)(""),_=(0,n.v9)(s.w),[V,M]=(0,o.useState)(!1),[K,Y]=(0,o.useState)({}),[Q,X]=(0,o.useState)("distances"),[$,ee]=(0,o.useState)(0),[te,le]=(0,o.useState)([]),[oe,ne]=(0,o.useState)([]),[se,ae]=(0,o.useState)("studio"),[re,ie]=(0,o.useState)("All"),[ce,de]=(0,o.useState)(P),[me,pe]=(0,o.useState)({workshop:[],openClass:[],course:[]}),he=w.W.map((e=>({value:e,label:e}))),ue=()=>{M(!V)},ge=(0,h.Z)({palette:{mode:_?"dark":"light"}}),xe=()=>{let e=0;localStorage.getItem(T)&&e++,re&&re!==k.zq.ALL&&e++,ce&&ce!==P&&e++;const t=localStorage.getItem(F);return t&&(e+=JSON.parse(t).length),e},je=()=>{e(!0);const o=localStorage.getItem(E)||se||"studio";null==t&&l("");let n="".concat(k.A3,"api/search/?query=").concat(t);const s=(e=>{const t=H.find((t=>t.name===e));return t?t.collection:k.Ul.STUDIO})(o),a=localStorage.getItem("filterLocation")||"New Delhi";n+="&city=".concat(encodeURIComponent(a)),(async e=>{try{const t="".concat(k.A3,"api/autocomplete/?&city=").concat(e),l=await fetch(t);if(!l.ok)throw new Error("Failed to fetch data");const o=await l.json();Y(o)}catch(t){console.error("Error in processing:",t)}})(a),o&&(n+="&entity=".concat(encodeURIComponent(s)));const r=JSON.parse(localStorage.getItem(F)||"[]");r.length>0&&(n+="&danceStyle=".concat(encodeURIComponent(r.join(",")))),s!==k.Ul.STUDIO&&re&&re!==k.zq.ALL&&(n+="&level=".concat(encodeURIComponent(re))),s!==k.Ul.WORKSHOPS&&s!==k.Ul.COURSES||!ce||ce===P||(n+="&price=".concat(encodeURIComponent(ce)));const i=function(){var e=localStorage.getItem(z);if(null!==e)try{var t=JSON.parse(e);if(t&&t.latitude&&t.longitude)return{latitude:t.latitude,longitude:t.longitude}}catch(l){console.error("Error parsing JSON:",l)}return null}();J&&i&&localStorage.getItem(T)&&(n+="&distance=".concat(encodeURIComponent(J),"&user_lat=").concat(encodeURIComponent(i.latitude),"&user_lon=").concat(encodeURIComponent(i.longitude))),console.log("apiEndpoint ",n),fetch(n).then((e=>e.json())).then((e=>{const t=Array.isArray(e)?e:Object.values(e);B(t)})).catch((e=>console.error("Error fetching search results:",e))).finally((()=>{e(!1)}))},ye=()=>{G(""),ne([]),ae("studio"),de(P),ie(k.zq.ALL),localStorage.removeItem(T),localStorage.removeItem(F),localStorage.setItem(E,"studio"),ee(xe()),M(!1),je()};(0,o.useEffect)((()=>{const e=localStorage.getItem(T),t=localStorage.getItem(F),l=localStorage.getItem(E);l?ae(l):(ae("studio"),localStorage.setItem(E,"studio")),e&&G(e),t&&ne(JSON.parse(t)),ee(xe()),je()}),[re,ce]);const[ve,Se]=(0,o.useState)("Search studios, workshops, open classes, courses..."),fe=()=>{window.innerWidth<600?Se("Search..."):Se("Search studios, workshops, open classes, courses...")};return(0,o.useEffect)((()=>(fe(),window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe)})),[]),(0,O.jsxs)("div",{style:{backgroundColor:_?"#202020":"white",padding:"10px",minHeight:"75vh"},children:[(0,O.jsx)("header",{children:(0,O.jsxs)(a.Z,{style:{width:"100%"},children:[(0,O.jsx)(u.ZP,{container:!0,alignItems:"center",children:(0,O.jsx)(u.ZP,{item:!0,xs:12,children:(0,O.jsx)(g.Z,{theme:ge,children:(0,O.jsx)(x.Z,{style:{width:"100%",paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0},direction:"row",spacing:1,children:(0,O.jsx)(j.Z,{value:t,onInputChange:async(e,t)=>{const o="".concat(k.A3,"api");if(l(t),t.length>=3)try{const e="filterLocation",l="New Delhi",n=localStorage.getItem(e)||l,s=encodeURIComponent(n||l),a="".concat(o,"/autocomplete?query=").concat(t,"&city=").concat(s),r=await C().get(a);console.log("Response :",r.data);const i=Object.values(r.data).filter((e=>null!==e));le(i)}catch(n){console.error("Error fetching autocomplete suggestions:",n)}else le([])},onChange:(e,t)=>{l(t)},options:te,getOptionLabel:e=>e.toString(),renderInput:e=>(0,O.jsx)(y.Z,{className:"autocomplete-input",...e,label:ve,variant:"outlined",InputProps:{...e.InputProps,endAdornment:(0,O.jsx)(N.Z,{position:"end",style:{marginRight:0,marginTop:0,marginLeft:0,marginBottom:0},children:(0,O.jsx)(L.Z,{style:{cursor:"pointer",color:_?"#892CDC":"black",marginRight:1,width:"40px"},onClick:je})}),style:{paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0}}}),style:{flex:1}})})})})}),(0,O.jsx)("br",{}),(0,O.jsx)(r.Z,{className:"align-items-center",children:(0,O.jsx)("div",{className:"horizontal-scroll-wrapper-for-filters",children:H.map((e=>(0,O.jsx)(i.Z,{xs:"auto",style:{marginTop:"0.5rem"},children:(0,O.jsx)("button",{onClick:()=>{return t=e.name,localStorage.setItem(E,t),localStorage.removeItem(T),G(""),ie(k.zq.ALL),de(P),ae(t),ee(xe()),void je();var t},style:{cursor:"pointer",backgroundColor:se===e.name?_?"white":"black":_?"black":"white",color:se===e.name?_?"black":"white":_?"white":"black",borderRadius:"10px",fontWeight:"bold",border:"1px solid ".concat(_?"white":"black"),padding:"5px 10px",transition:"background-color 0.3s, color 0.3s"},children:e.label})},e.name)))})}),(0,O.jsx)(r.Z,{className:"align-items-center",children:(0,O.jsxs)("div",{className:"horizontal-scroll-wrapper-for-filters",children:[(0,O.jsx)(i.Z,{xs:"auto",style:{marginTop:"0.5rem"},children:(0,O.jsx)(v.Z,{onClick:ue,badgeContent:$,color:_?"warning":"secondary",pill:!0,children:(0,O.jsx)(S.Z,{className:"rounded-3",color:_?"warning":"secondary",label:"\u2630 filters",variant:_?"outlined":"contained"})})}),(oe.length||J||re&&re!==k.zq.ALL||ce&&ce!==P)&&(0,O.jsx)(i.Z,{xs:"auto",style:{marginTop:"0.5rem"},children:(0,O.jsx)(v.Z,{color:"error",onClick:ye,style:{cursor:"pointer"},pill:!0,children:(0,O.jsx)(S.Z,{color:"error",label:"Clear All",onDelete:ye,style:{cursor:"pointer"},variant:_?"outlined":"contained",className:"rounded-3"})})}),(0,O.jsxs)(f.Z,{display:"flex",children:[J&&(0,O.jsx)(i.Z,{xs:"auto",style:{marginTop:"0.5rem"},children:(0,O.jsx)(v.Z,{color:"success",pill:!0,children:(0,O.jsx)(S.Z,{className:"rounded-3",color:"success",label:"Distance: ".concat(J," km"),variant:_?"outlined":"contained",onDelete:()=>{G(null),localStorage.removeItem(T),ee(xe()),je()}})})}),re&&re!==k.zq.ALL&&(0,O.jsx)(i.Z,{xs:"auto",children:(0,O.jsx)(v.Z,{color:"info",style:{marginLeft:"0",marginTop:"0.5rem"},pill:!0,children:(0,O.jsx)(S.Z,{className:"rounded-3",color:"info",label:"Level: ".concat(re),variant:_?"outlined":"contained",onDelete:()=>ie(k.zq.ALL)})},re)}),ce&&ce!==P&&(0,O.jsx)(i.Z,{xs:"auto",children:(0,O.jsx)(v.Z,{color:"info",style:{marginLeft:"0",marginTop:"0.5rem"},pill:!0,children:(0,O.jsx)(S.Z,{className:"rounded-3",color:"info",label:"Prices Upto: ".concat(ce),variant:_?"outlined":"contained",onDelete:()=>de(P)})},ce)}),oe&&(0,O.jsx)(i.Z,{xs:"auto",children:oe.map(((e,t)=>(0,O.jsx)(v.Z,{color:"info",style:{marginLeft:0!==t?"0.25rem":"0",marginTop:"0.5rem"},pill:!0,children:(0,O.jsx)(S.Z,{className:"rounded-3",color:"info",label:"Dance Form: ".concat(e),variant:_?"outlined":"contained",onDelete:()=>(e=>{const t=oe.filter((t=>t!==e));ne(t),localStorage.setItem(F,JSON.stringify(t)),ee(xe()),je()})(e)})},t)))})]})]})})]})}),(0,O.jsxs)(c.Z,{show:V,onHide:ue,backdrop:"static",children:[(0,O.jsx)(c.Z.Header,{closeButton:!0,children:(0,O.jsx)(c.Z.Title,{children:"Filters"})}),(0,O.jsxs)(c.Z.Body,{children:[(0,O.jsxs)(r.Z,{children:[(0,O.jsxs)(i.Z,{md:4,children:[(0,O.jsx)("h5",{children:"Filter By:"}),(0,O.jsxs)("ul",{style:{listStyleType:"none",padding:0},children:["studio"===se&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("hr",{style:{margin:"5px 0"}}),(0,O.jsx)("li",{style:{cursor:"pointer",margin:"5px 0"},onClick:()=>(X("distances"),M(!0)),children:"Distances"})]}),("workshop"===se||"course"===se)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("hr",{style:{margin:"5px 0"}}),(0,O.jsx)("li",{style:{cursor:"pointer",margin:"5px 0"},onClick:()=>(X("price"),M(!0)),children:"Price"})]}),"studio"!==se&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("hr",{style:{margin:"5px 0"}}),(0,O.jsx)("li",{style:{cursor:"pointer",margin:"5px 0"},onClick:()=>(X("level"),M(!0)),children:"Level"})]}),(0,O.jsx)("hr",{style:{margin:"5px 0"}}),(0,O.jsx)("li",{style:{cursor:"pointer",margin:"5px 0"},onClick:()=>(X("danceForm"),M(!0)),children:"Dance Forms"}),(0,O.jsx)("hr",{style:{margin:"5px 0"}})]})]}),(0,O.jsxs)(i.Z,{md:8,children:[V&&"distances"===Q&&(0,O.jsxs)(d.Z.Group,{controlId:"filterDistances",children:[(0,O.jsx)(d.Z.Label,{children:"Distances:"}),(0,O.jsxs)(d.Z.Control,{className:"p-0",as:"select",value:J,onChange:e=>G(e.target.value),children:[(0,O.jsx)("option",{value:"",children:"Select distance"}),W.map((e=>(0,O.jsxs)("option",{value:e,children:[e," km"]},e)))]})]}),V&&"level"===Q&&(0,O.jsxs)(d.Z.Group,{controlId:"filterLevel",children:[(0,O.jsx)(d.Z.Label,{children:"Level :"}),(0,O.jsxs)(d.Z.Control,{className:"p-0",as:"select",value:re,onChange:e=>ie(e.target.value),children:[(0,O.jsx)("option",{value:"",children:"Select Lavel"}),q.map((e=>(0,O.jsx)("option",{value:e,children:e},e)))]})]}),V&&"price"===Q&&(0,O.jsxs)(d.Z.Group,{controlId:"filterPrice",children:[(0,O.jsx)(d.Z.Label,{children:"Prices :"}),(0,O.jsxs)(d.Z.Control,{className:"p-0",as:"select",value:ce,onChange:e=>de(e.target.value),children:[(0,O.jsx)("option",{value:"",children:"Prices below"}),[499,999,1499,1999,2999,4999,9999,P].map((e=>(0,O.jsx)("option",{value:e,children:e>=P?"All":e},e)))]})]}),V&&"danceForm"===Q&&(0,O.jsxs)(d.Z.Group,{controlId:"filterDanceForms",children:[(0,O.jsx)(d.Z.Label,{children:"Dance Forms:"}),(0,O.jsx)(Z.ZP,{isMulti:!0,value:he.filter((e=>oe.includes(e.value))),onChange:e=>{ne(e?e.map((e=>e.value)):[])},options:he,closeMenuOnSelect:!1,placeholder:"Select Dance Forms",styles:{valueContainer:e=>({...e,maxHeight:100,overflowY:"auto"}),multiValue:(e,t)=>t.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,t)=>t.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,t)=>t.data.isFixed?{...e,display:"none"}:e}})]})]})]}),(0,O.jsxs)(m.Z,{style:{marginTop:"1rem"},children:[(0,O.jsx)(p.Z,{variant:"primary",onClick:()=>{localStorage.setItem(T,J),localStorage.setItem(E,se),localStorage.setItem(F,JSON.stringify(oe)),ee(xe()),M(!1),je()},children:"Apply"}),(0,O.jsx)(p.Z,{variant:"danger",onClick:ye,style:{marginLeft:"10px"},children:"Clear All Filters"})]})]})]}),(0,O.jsx)("hr",{}),"studio"===se&&(0,O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"10px"},children:0===I.length?(0,O.jsx)("div",{className:"",style:{minHeight:"30vh"}}):I.map(((e,t)=>(0,O.jsx)("div",{className:"studio-card-container",style:{padding:"0.2rem"},md:2,children:(0,O.jsx)("a",{href:"#/studio/".concat(e.studioId),style:{textDecoration:"none"},children:(0,O.jsx)(b.Z,{studio:e})})},t)))}),"workshop"===se&&(0,O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"10px"},children:0===I.length?(0,O.jsx)("div",{className:"",style:{minHeight:"30vh"}}):I.map(((e,t)=>(0,O.jsx)("div",{className:"studio-card-container",style:{padding:"0.2rem"},md:2,children:(0,O.jsx)(D.Z,{dataItem:e,studioIdName:K},e.id)},t)))}),"openClass"===se&&(0,O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"10px"},children:0===I.length?(0,O.jsx)("div",{className:"",style:{minHeight:"30vh"}}):I.map(((e,t)=>(0,O.jsx)("div",{className:"studio-card-container",style:{padding:"0.2rem"},md:2,children:(0,O.jsx)(A.Z,{dataItem:e,studioIdName:K},e.id)},t)))}),"course"===se&&(0,O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"10px"},children:0===I.length?(0,O.jsx)("div",{className:"",style:{minHeight:"30vh"}}):I.map(((e,t)=>(0,O.jsx)("div",{className:"studio-card-container",style:{padding:"0.2rem"},md:2,children:(0,O.jsx)(U.Z,{dataItem:e,studioIdName:K},e.id)},t)))})]})}}}]);
//# sourceMappingURL=3467.e6c9295e.chunk.js.map