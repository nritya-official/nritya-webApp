"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[4532],{59777:(e,t,l)=>{l.d(t,{Z:()=>L});l(11518);var o=l(72791),a=l(1413),r=l(92552),s=l(84654),n=l(28658),i=l(69597),d=l(83168),c=l(88447),u=l(16029),h=l(61889),x=l(20890),m=l(94294),v=l(13400),p=l(36314),Z=l(59434),j=l(83708),b=l(68449),g=l(60717),y=l(97892),S=l.n(y),C=l(12481),w=l(10159),f=l(75424),I=l(49071),k=l(10884),U=l(93819),E=l(80184);function D(e){var t,l,r,s,n,i;let{open:d,handleClose:p,dataItem:b,activateCourse:y,deactivateCourse:D,actionsAllowed:N}=e;const L=(0,f.D)(),O=(0,Z.v9)(g.w),[P,J]=(0,o.useState)(!1),[R,A]=(0,o.useState)(null),F=null===(t=JSON.parse(localStorage.getItem("userInfo")))||void 0===t?void 0:t.UserId;(0,o.useEffect)((()=>{(async()=>{try{const e=(0,C.JU)(w.db,"User",F),t=await(0,C.QT)(e);t.exists()&&A(t.data())}catch(e){console.log(" error")}})()}),[]);const B=b.UserId===F,T=null===R||void 0===R||null===(l=R.BookedCourses)||void 0===l||null===(r=l.includes)||void 0===r?void 0:r.call(l,null===b||void 0===b?void 0:b.id),q=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),Y="".concat(window.location.host,"/nritya-webApp#/course/").concat(b.id);return(0,E.jsx)(c.Z,{open:d,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,E.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:O?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:O?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,E.jsxs)(h.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,E.jsx)(h.ZP,{item:!0,xs:12,lg:8,children:(0,E.jsx)("img",{src:b.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,E.jsxs)(h.ZP,{item:!0,xs:12,lg:4,children:[(0,E.jsxs)(u.Z,{sx:{height:"100%",bgcolor:O?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,E.jsxs)(u.Z,{sx:{flex:1},children:[(0,E.jsx)(x.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:S()(b.date).format("LL")}),(0,E.jsx)(x.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:b.time}),(0,E.jsx)(x.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:O?"white":"black"},children:b.venue}),(0,E.jsxs)(x.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:O?"white":"black"},children:[b.duration," ",b.durationUnit]})]}),(0,E.jsxs)(u.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,E.jsxs)(x.Z,{variant:"h5",sx:{alignSelf:"center",color:O?"white":"black"},children:["\u20b9",b.price]}),!N&&!B&&F&&(0,E.jsx)(m.Z,{variant:"outlined",onClick:async()=>{try{J(!0),(0,C.ET)((0,C.hJ)(w.db,j.Ul.BOOKINGS),{StudioId:b.StudioId,CourseId:b.id,UserId:F,bookingDate:Date.now()});const e=(0,C.JU)(w.db,"User",F),t=await(0,C.QT)(e);t.exists()&&null!=t.data()&&await(0,C.r7)(e,{BookedCourses:[...t.data().BookedCourses||[],b.id]}),A((e=>(0,a.Z)((0,a.Z)({},e),{},{BookedCourses:[...(null===e||void 0===e?void 0:e.BookedCourses)||[],b.id]}))),L("Course booked","success")}catch(e){console.error(e),L((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{J(!1)}},disabled:T||P,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:T?"Booked":"Book Now"})]})]}),!N&&!B&&F&&(0,E.jsx)(x.Z,{component:"p",variant:"caption",sx:{my:"2px",color:O?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,E.jsxs)(h.ZP,{item:!0,sx:{mt:1},children:[(0,E.jsxs)(u.Z,{sx:{display:"flex",columnGap:2},children:[(0,E.jsxs)(x.Z,{variant:"h5",component:"p",sx:{color:O?"white":"black"},children:[b.name||"",b.danceStyles.map((e=>" | ".concat(e)))]}),(0,E.jsx)(U.Z,{shareUrl:Y})]}),(0,E.jsxs)(x.Z,{variant:"body1",component:"p",sx:{mt:1,color:O?"white":"black"},children:[(0,E.jsxs)("span",{children:["By ",(null===(s=b.studioDetails)||void 0===s?void 0:s.studioName)||""]}),b.studioDetails&&(null===(n=b.studioDetails)||void 0===n?void 0:n.whatsappNumber)&&(0,E.jsx)(v.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(b.studioDetails.whatsappNumber,"?text=").concat(q),children:(0,E.jsx)("img",{src:I,alt:"Whatsapp call",style:{width:30,height:28}})}),b.studioDetails&&(null===(i=b.studioDetails)||void 0===i?void 0:i.mobileNumber)&&(0,E.jsx)(v.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(b.studioDetails.mobileNumber),children:(0,E.jsx)("img",{src:k,alt:"Phone call",style:{width:30,height:28}})})]}),(0,E.jsx)("div",{style:{color:O?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:b.description||"Course Description"}})]})]}),(0,E.jsxs)(u.Z,{sx:{mt:"1rem",textAlign:"right"},children:[N&&B&&(0,E.jsx)(m.Z,{onClick:()=>null!==b&&void 0!==b&&b.active?D(null===b||void 0===b?void 0:b.id):y(null===b||void 0===b?void 0:b.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==b&&void 0!==b&&b.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==b&&void 0!==b&&b.active?"Deactivate":"Activate"}),(0,E.jsx)(m.Z,{onClick:p,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function N(e){var t;let{dataItem:l,activateCourse:c,deactivateCourse:h,actionsAllowed:x}=e;const m=(0,Z.v9)(g.w),[v,y]=(0,o.useState)(null),[S,C]=(0,o.useState)(!1),w=l.id;(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,b.Us)(j.Rb.COURSEICON,w);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[l.id]);const f={backgroundColor:m?"#444":"white",padding:"0px",color:m?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(s.Z,{variant:"solid",sx:(0,a.Z)((0,a.Z)({},f),{},{"&:hover":{transform:"scale(1.01)",cursor:"pointer"}}),onClick:()=>C(!0),children:[(0,E.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,E.jsx)("img",{src:v,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,E.jsx)(p.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:l&&l.danceStyles?l.danceStyles.slice(0,3).map(((e,t)=>(0,E.jsx)(i.Z,{color:t%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},t))):(0,E.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,E.jsxs)(n.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,E.jsxs)(u.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:m?"white":"black",extDecoder:"one"},children:[(0,E.jsx)("span",{children:l&&l.name?l.name:""}),!(null!==l&&void 0!==l&&l.active)&&(0,E.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,E.jsxs)(d.ZP,{style:{color:m?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(t=l.studioDetails)&&void 0!==t&&t.studioName?l.studioDetails.studioName:""]}),(0,E.jsx)(d.ZP,{style:{marginTop:10,color:m?"white":"black"},level:"body-xs",noWrap:!0,children:l.venue?l.venue:""}),(0,E.jsxs)(d.ZP,{style:{color:m?"white":"black"},level:"body-xs",children:[l.date||""," | ",l.time||""]})]})]}),(0,E.jsx)(D,{dataItem:(0,a.Z)((0,a.Z)({},l),{},{imageUrl:v}),open:S,handleClose:()=>C(!1),activateCourse:c,deactivateCourse:h,actionsAllowed:x})]})}const L=e=>{let{dataList:t,activateCourse:l,deactivateCourse:o,actionsAllowed:a}=e;return(0,E.jsx)("div",{className:"horizontal-scroll-wrapper",children:t.map(((e,t)=>(0,E.jsx)(N,{dataItem:e,activateCourse:l,deactivateCourse:o,actionsAllowed:a},e.id)))})}},40763:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var o=l(1413),a=l(72791),r=l(10159),s=l(12481),n=l(83708),i=l(59434),d=l(60717),c=l(61224),u=l(43896),h=l(83449),x=l(47283),m=l(82851),v=l(16029),p=l(59777),Z=l(95313),j=l(89743),b=l(2677),g=l(94294),y=l(57482),S=l(81018),C=l(51650),w=l(5712),f=l(76989),I=l(67107),k=l(44507),U=l(4708),E=l(63237),D=l(4560),N=l(24750),L=l(71652),O=l(97892),P=l.n(O),J=l(26073),R=l(75424),A=l(82873),F=l(18406),B=l(66770),T=l.n(B),q=(l(86009),l(763)),Y=l(80184);const z=function(e){let{instructors:t,studioId:l,setCourses:c}=e;const u=(0,R.D)(),[h,x]=(0,a.useState)(""),m=(0,i.v9)(d.w),[v,p]=(0,a.useState)([]),[O,B]=(0,a.useState)([]),z=t.map((e=>"".concat(e.name," - ").concat(e.id))),_=C.W,M=localStorage.getItem("filterLocation")||"",[V,W]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(""),[H,K]=(0,a.useState)(null),[X,$]=(0,a.useState)(""),[ee,te]=(0,a.useState)(M),[le,oe]=(0,a.useState)(""),[ae,re]=(0,a.useState)(P()(new Date)),[se,ne]=(0,a.useState)(!1),[ie,de]=(0,a.useState)(1),[ce,ue]=(0,a.useState)(""),he=(0,I.Z)({palette:{mode:m?"dark":"light"}}),xe=e=>{e.reset(),B([]),p([]),K(null),Q(""),$(""),oe(""),re(P()(Date.now())),te(""),ue("")};return(0,a.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const j=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),b=await(0,s.PL)(j);if(b.empty){var a,i,d,c,u,h,x,m;await(0,s.ET)((0,s.hJ)(r.db,n.i0.DRAFT_COURSES),{name:(null===(a=e.name)||void 0===a?void 0:a.value)||"",duration:(null===(i=e.duration)||void 0===i?void 0:i.value)||"",price:(null===(d=e.courseFees)||void 0===d?void 0:d.value)||"",description:ce,danceStyles:O,instructors:v?null===v||void 0===v||null===(c=v.map)||void 0===c?void 0:c.call(v,(e=>{var t,l,o,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(a=o.trim)||void 0===a?void 0:a.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:H&&(null===H||void 0===H||null===(u=H.split)||void 0===u||null===(h=u.call(H,":"))||void 0===h||null===(x=h[1])||void 0===x||null===(m=x.trim)||void 0===m?void 0:m.call(x))||null,durationUnit:G,level:X,time:le,date:ae.format("YYYY-MM-DD"),city:ee})}else{var Z;let a=[];b.forEach((e=>{a.push((0,o.Z)({id:e.id},e.data()))}));let r=a[0];e.name.value=r.name,e.courseFees.value=r.price,e.duration.value=r.duration,ue((null===r||void 0===r?void 0:r.description)||""),B(null!==r&&void 0!==r&&null!==(Z=r.danceStyles)&&void 0!==Z&&Z.length?r.danceStyles:[]),p(t.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const s=l.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));s>0&&K(l[s]),Q(r.durationUnit),$((null===r||void 0===r?void 0:r.level)||""),oe((null===r||void 0===r?void 0:r.time)||""),re(P()((null===r||void 0===r?void 0:r.date)||Date.now())),te((null===r||void 0===r?void 0:r.city)||"")}W(!0)}catch(j){console.error(j)}}()}),[]),(0,a.useEffect)((()=>{let e=null,t=null;return V&&async function(){const l=document.getElementById("addStudioForm");try{const a=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),i=await(0,s.PL)(a);if(!i.empty){let a=[];i.forEach((e=>{a.push((0,o.Z)({id:e.id},e.data()))}));let d=a[0];const c=(0,s.JU)(r.db,n.i0.DRAFT_COURSES,d.id);e=setInterval((async()=>{try{var e,o,a,r,n,i,d,u;const x={name:(null===(e=l.name)||void 0===e?void 0:e.value)||"",price:(null===(o=l.courseFees)||void 0===o?void 0:o.value)||"",description:ce,danceStyles:O,instructors:v?null===v||void 0===v||null===(a=v.map)||void 0===a?void 0:a.call(v,(e=>{var t,l,o,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(a=o.trim)||void 0===a?void 0:a.call(o))||null})):null,StudioId:H&&(null===H||void 0===H||null===(r=H.split)||void 0===r||null===(n=r.call(H,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:(null===(u=l.duration)||void 0===u?void 0:u.value)||"",durationUnit:G,level:X,time:le,date:ae.format("YYYY-MM-DD"),city:ee};if((0,q.isEqual)(t,x))console.log("Nothing for Autosave to save");else try{await(0,s.r7)(c,x),t=x,console.log("Next AutoSave in",1e4)}catch(h){console.error(h)}}catch(h){console.error(h)}}),1e4)}}catch(a){console.error(a)}}(),()=>clearInterval(e)}),[V,O,v,H,G,X,le,ae,ee,ce]),(0,a.useEffect)((()=>{if(m){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[m]),(0,Y.jsxs)("div",{children:[1===ie&&(0,Y.jsx)(Z.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if((e=>{let t=!0;return e.name.value&&e.duration.value&&e.courseFees.value&&ce&&null!==O&&void 0!==O&&O.length&&null!==v&&void 0!==v&&v.length&&H&&G&&X&&le&&ae&&ee||(t=!1),t})(t))try{var l,a,i,d,h;const m=JSON.parse(localStorage.getItem("userInfo")).email,p={courseName:e.target.name.value,danceStyles:O,instructors:v?null===v||void 0===v||null===(l=v.map)||void 0===l?void 0:l.call(v,(e=>{var t,l,o,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(a=o.trim)||void 0===a?void 0:a.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:m,StudioId:H&&(null===H||void 0===H||null===(a=H.split)||void 0===a||null===(i=a.call(H,":"))||void 0===i||null===(d=i[1])||void 0===d||null===(h=d.trim)||void 0===h?void 0:h.call(d))||null,duration:e.target.duration.value,durationUnit:G,level:X,time:le,date:ae.format("YYYY-MM-DD"),price:e.target.courseFees.value,description:ce,city:ee,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};ne(!0);const Z=m,j={entity_name:p.courseName,time:p.time,date:p.date,StudioId:p.StudioId},b=await(0,F.qC)(p,n.Ul.COURSES,Z,j);if(b.ok){const e=await b.json();x(e.id),c((t=>[...t,(0,o.Z)({id:e.id},p)])),xe(t),(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=await(0,s.PL)(e);if(!t.empty){let e=[];t.forEach((t=>{e.push((0,o.Z)({id:t.id},t.data()))}));let l=e[0];const a=(0,s.JU)(r.db,n.i0.DRAFT_COURSES,l.id);await(0,s.oe)(a)}})(),u("Course successfully added.","success"),de((e=>e+1))}}catch(m){console.error("Error adding course: ",m),u((null===m||void 0===m?void 0:m.message)||"Something went wrong","error")}finally{ne(!1)}else u("Please fill all the fields.","error")},style:{backgroundColor:m?"#202020":"",color:m?"white":"black"},children:(0,Y.jsx)(Z.Z.Group,{controlId:"formBasicAdd",children:(0,Y.jsxs)("div",{children:[(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Couese Name"}),(0,Y.jsx)(Z.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"textarea",placeholder:"Enter course name",name:"name"})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Dance Styles"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:_,value:O,onChange:(e,t)=>{B(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Names of Instructors"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:z,value:v,onChange:(e,t)=>{p(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]}),(0,Y.jsx)(b.Z,{md:6,children:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Duration"}),(0,Y.jsx)(Z.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Duration In Units"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:["Months","Weeks","Days"],value:G,onChange:(e,t)=>{Q(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Duration In Units",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})]})})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.Z,{md:6,children:(0,Y.jsx)(J.Z,{defaultTime:le||"00:00-00:00",handleSelect:(e,t)=>{const[l,o]=le.split(" - ");let a="".concat(l," - ").concat(o);null!==e&&(a="".concat(e," - ").concat(o)),null!==t&&(a="".concat(l," - ").concat(t)),oe(a)}})}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Course Start Date"}),(0,Y.jsx)(L._,{dateAdapter:N.y,children:(0,Y.jsx)(D.C,{components:["DatePicker"],children:(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(E.M,{sx:{width:"100%"},value:ae,onChange:e=>re(e)})]})})})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Level"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:X,onChange:(e,t)=>{$(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Fees/Price"}),(0,Y.jsx)(Z.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsx)(j.Z,{children:(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"City"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:A.c,value:ee,onChange:(e,t)=>{te(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select City",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Studio"}),(0,Y.jsxs)(k.Z,{theme:he,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:l,value:H,onChange:(e,t)=>{K(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Brief Description"}),(0,Y.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:ce,onChange:ue})]})]}),(0,Y.jsx)(j.Z,{children:(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Youtube video link"}),(0,Y.jsx)(Z.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,Y.jsx)("hr",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.Z,{xs:6}),(0,Y.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,Y.jsx)(g.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},type:"submit",disabled:se,children:"Next"})})]})]})})}),se&&(0,Y.jsx)(y.Z,{}),2===ie&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(j.Z,{children:(0,Y.jsx)(b.Z,{children:(0,Y.jsx)(S.Z,{entityId:h,title:"Course Images",storageFolder:n.Rb.COURSEICON,maxImageCount:1})})}),(0,Y.jsx)(j.Z,{style:{margin:"1rem 0"},children:(0,Y.jsx)(b.Z,{style:{textAlign:"right"},children:(0,Y.jsx)(g.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},onClick:()=>de((e=>e-1)),children:"Done"})})})]})]})};const _=function(e){let{courseId:t,instructors:l,studioId:c}=e;const u=localStorage.getItem("filterLocation")||"",h=(0,R.D)(),[x,m]=(0,a.useState)(null),[v,p]=(0,a.useState)([]),O=C.W,[B,q]=(0,a.useState)([]),z=(0,i.v9)(d.w),[_,M]=(0,a.useState)(""),[V,W]=(0,a.useState)(""),[G,Q]=(0,a.useState)(u),[H,K]=(0,a.useState)(""),[X,$]=(0,a.useState)(P()(new Date)),[ee,te]=(0,a.useState)(!1),[le,oe]=(0,a.useState)(""),ae=l.map((e=>"".concat(e.name," - ").concat(e.id))),re=(0,I.Z)({palette:{mode:z?"dark":"light"}}),se={backgroundColor:z?"#333333":"",color:z?"white":"black",height:"auto"},[ne,ie]=(0,a.useState)(""),[de,ce]=(0,a.useState)(null),ue=e=>{e.reset(),q([]),p([]),m(null),M(""),W(""),K(""),$(P()(new Date)),Q(""),ce(null),ie(""),oe("")};return(0,a.useEffect)((()=>{if(de){const e=l.filter((e=>de.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(p(e),de&&de.danceStyles&&q(de.danceStyles),de&&de.durationUnit&&M(de.durationUnit),de&&de.level&&W(de.level),de&&de.time&&K(de.time),de&&de.date&&$(P()(de.date)),de&&de.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===de.StudioId));m(c[e]||null)}Q((null===de||void 0===de?void 0:de.city)||""),oe((null===de||void 0===de?void 0:de.description)||"")}}),[de]),(0,a.useEffect)((()=>{if(z){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const t=document.getElementsByClassName("ql-editor ")[0];console.log(t),e.style.color="black"}}),[z]),(0,Y.jsxs)("div",{style:{backgroundColor:z?"#202020":"",color:z?"white":"black"},children:[(0,Y.jsx)("br",{}),(0,Y.jsxs)(Z.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const t=e.target;if(ne)if((e=>{let t=!0;return e.name.value&&e.courseFees.value&&e.duration.value&&le&&null!==B&&void 0!==B&&B.length&&null!==v&&void 0!==v&&v.length&&x&&_&&V&&H&&X&&G||(t=!1),t})(t)){try{var l,o,a,r,s;const e={courseName:t.name.value,duration:t.duration.value,price:t.courseFees.value,description:le,danceStyles:B,instructors:v?null===v||void 0===v||null===(l=v.map)||void 0===l?void 0:l.call(v,(e=>{var t,l,o,a;return(null===e||void 0===e||null===(t=e.split)||void 0===t||null===(l=t.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(a=o.trim)||void 0===a?void 0:a.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:x&&(null===x||void 0===x||null===(o=x.split)||void 0===o||null===(a=o.call(x,":"))||void 0===a||null===(r=a[1])||void 0===r||null===(s=r.trim)||void 0===s?void 0:s.call(r))||null,durationUnit:_,level:V,time:H,date:X.format("YYYY-MM-DD"),city:G,youtubeViedoLink:t.youtubeViedoLink.value};te(!0);const i=await(0,F.fP)(e,n.Ul.COURSES,ne);i.ok?(ue(t),h("Open class successfully updated.","success")):h("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating course: ",i),h((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{te(!1)}document.getElementById("updateStudioForm").reset()}else h("Please fill all the fields.","error")},children:[(0,Y.jsxs)(Z.Z.Group,{controlId:"formBasicUpdate",children:[(0,Y.jsx)(Z.Z.Label,{children:"Id"}),(0,Y.jsxs)(Z.Z.Control,{as:"select",name:"nameId",style:(0,o.Z)({},se),onChange:async e=>{e.preventDefault();const t=e.target.value.split(":").pop().trim();ie(t);try{const e=await(0,s.QT)((0,s.JU)(r.db,n.Ul.COURSES,t));e.exists?ce(e.data()):ce(null)}catch(l){console.error("Error fetching course data:",l,t)}},children:[(0,Y.jsx)("option",{value:"",children:"Select a course..."}),t&&t.length>0?t.map((e=>(0,Y.jsx)("option",{value:e,children:e},e))):(0,Y.jsx)("option",{value:"",children:"No course yet!"})]}),(0,Y.jsxs)("div",{children:[(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.Z,{md:6,children:(0,Y.jsx)(S.Z,{entityId:ne,title:"Course Images",storageFolder:n.Rb.COURSEICON,maxImageCount:1})}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)("br",{}),(0,Y.jsx)(Z.Z.Label,{children:"Course Name"}),(0,Y.jsx)(Z.Z.Control,{rows:1,defaultValue:de?de.courseName:"",style:(0,o.Z)({},se),type:"textarea",placeholder:"Enter course name",name:"name"}),(0,Y.jsx)("br",{}),(0,Y.jsx)(Z.Z.Label,{children:"Dance Styles"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),multiple:!0,id:"tags-standard",options:O,value:B,onChange:(e,t)=>{q(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:(0,o.Z)({},se)}))})]}),(0,Y.jsx)("br",{}),(0,Y.jsx)(Z.Z.Label,{children:"Names of Instructors"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),multiple:!0,id:"tags-standard",options:ae,value:v,onChange:(e,t)=>{p(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:(0,o.Z)({},se)}))})]})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.Z,{md:6,children:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Duration"}),(0,Y.jsx)(Z.Z.Control,{defaultValue:de?de.duration:"",rows:1,style:(0,o.Z)({},se),type:"number",placeholder:"Enter Duration",name:"duration"})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Duration In Units"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),id:"tags-standard",options:["Months","Weeks","Days"],value:_,onChange:(e,t)=>{M(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Duration In Units",style:(0,o.Z)({},se)}))})]})]})]})}),(0,Y.jsx)(b.Z,{md:6,children:(0,Y.jsx)(J.Z,{defaultTime:H||"00:00-00:00",handleSelect:(e,t)=>{const[l,o]=H.split(" - ");let a="".concat(l," - ").concat(o);null!==e&&(a="".concat(e," - ").concat(o)),null!==t&&(a="".concat(l," - ").concat(t)),K(a)}})})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Course Start Date"}),(0,Y.jsx)(L._,{dateAdapter:N.y,children:(0,Y.jsx)(D.C,{components:["DatePicker"],children:(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(E.M,{sx:{width:"100%"},value:X,onChange:e=>$(e)})]})})})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Level"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:V,onChange:(e,t)=>{W(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:(0,o.Z)({},se)}))})]})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsx)(j.Z,{children:(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Fees/Price"}),(0,Y.jsx)(Z.Z.Control,{rows:1,defaultValue:de?de.price:"",style:(0,o.Z)({},se),type:"number",placeholder:"Enter fees/price",name:"courseFees"})]})}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"City"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),id:"tags-standard",options:A.c,value:G,onChange:(e,t)=>{Q(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select City",style:(0,o.Z)({},se)}))})]})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Studio"}),(0,Y.jsxs)(k.Z,{theme:re,children:[(0,Y.jsx)(U.ZP,{}),(0,Y.jsx)(w.Z,{style:(0,o.Z)({},se),id:"tags-standard",options:c,value:x,onChange:(e,t)=>{m(t)},renderInput:e=>(0,Y.jsx)(f.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:(0,o.Z)({},se)}))})]})]})]}),(0,Y.jsx)("br",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Brief Description"}),(0,Y.jsx)(T(),{theme:"snow",placeholder:"Enter Description",value:le,onChange:oe})]}),(0,Y.jsxs)(b.Z,{md:6,children:[(0,Y.jsx)(Z.Z.Label,{children:"Youtube video link"}),(0,Y.jsx)(Z.Z.Control,{rows:1,defaultValue:de?de.youtubeViedoLink:"",style:(0,o.Z)({},se),type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,Y.jsx)("hr",{}),(0,Y.jsx)("hr",{}),(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.Z,{xs:6}),(0,Y.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,Y.jsx)(g.Z,{variant:"contained",style:(0,o.Z)({},se),type:"submit",disabled:ee,children:"Update Course"})})]})]})]}),ee&&(0,Y.jsx)(y.Z,{})]})]})};const M=function(){const[e,t]=(0,a.useState)([]),[l,Z]=(0,a.useState)([]),[j,b]=(0,a.useState)([]),g=(0,i.v9)(d.w),[y,S]=(0,a.useState)([]),[C,w]=(0,a.useState)(!1),[f,I]=(0,a.useState)(-1),{currentUser:k}=(0,c.a)(),[U,E]=a.useState("1");return(0,a.useEffect)((()=>{(async e=>{try{const e=(0,s.JU)(r.db,"User",k.uid),t=await(0,s.QT)(e);t.exists()&&null!=t.data()&&(w(t.data().CreatorMode),I(t.data().isPremium))}catch(t){console.log(" error")}})()}),[C]),(0,a.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const t=(0,s.hJ)(r.db,n.Ul.INSTRUCTORS),l=(0,s.IO)(t,(0,s.ar)("createdBy","==",e)),o=await(0,s.PL)(l),a=[];o.forEach((e=>{a.push({id:e.id,name:e.data().name})})),S(a)})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.Ul.STUDIO),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),l=(await(0,s.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const t=e.data();return(0,o.Z)({id:e.id},t)}));t(l.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.Ul.COURSES),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,s.PL)(e)).docs.filter((e=>e.data().courseName)).map((e=>{const t=e.data();return(0,o.Z)({id:e.id},t)})).map((async e=>{const t=(0,s.JU)(r.db,n.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),l=await(0,s.QT)(t);return(0,o.Z)((0,o.Z)({},e),{},{studioDetails:l.data()})})),l=await Promise.all(t);localStorage.setItem("CourseCreated",JSON.stringify(l)),Z(l),b(l.map((e=>String(e.courseName)+" :"+String(e.id))))})()}),[Z]),(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("CourseCreated"))||[];Z(e);const t=e.map((e=>"".concat(e.courseName," : ").concat(e.id)));b(t)}),[b]),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("br",{}),C?(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(v.Z,{sx:{width:"100%",typography:"body1"},children:(0,Y.jsxs)(h.ZP,{value:U,children:[(0,Y.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,Y.jsxs)(x.Z,{style:{color:g?"white":"black"},onChange:(e,t)=>{E(t)},"aria-label":"lab API tabs example",children:[(0,Y.jsx)(u.Z,{style:{color:g?"white":"black"},label:"Add Course",value:"1"}),(0,Y.jsx)(u.Z,{style:{color:g?"white":"black"},label:"Update Course",value:"2"})]})}),(0,Y.jsx)(m.Z,{value:"1",children:(0,Y.jsx)(z,{instructors:y,studioId:e,setCourses:Z})}),(0,Y.jsx)(m.Z,{value:"2",children:(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(_,{instructors:y,courseId:j,studioId:e})})})]})})}):"",l.length>0&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("h3",{style:{color:g?"white":"black"},children:"Your Courses"}),(0,Y.jsx)(p.Z,{dataList:l,activateCourse:async e=>{try{const t=(0,s.JU)(r.db,n.Ul.COURSES,e);await(0,s.r7)(t,{active:!0}),Z((t=>t.map((t=>t.id===e?(0,o.Z)((0,o.Z)({},t),{},{active:!0}):t))))}catch(t){console.error(t)}},deactivateCourse:async e=>{try{const t=(0,s.JU)(r.db,n.Ul.COURSES,e);await(0,s.r7)(t,{active:!1}),Z((t=>t.map((t=>t.id===e?(0,o.Z)((0,o.Z)({},t),{},{active:!1}):t))))}catch(t){console.error(t)}},actionsAllowed:!0})]})]})}}}]);
//# sourceMappingURL=4532.f08c7870.chunk.js.map