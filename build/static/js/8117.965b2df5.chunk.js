"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[8117],{76785:(e,o,t)=>{t.d(o,{Z:()=>E});t(11518);var l=t(72791),a=t(1413),r=t(92552),s=t(84654),n=t(28658),i=t(69597),d=t(83168),c=t(88447),u=t(16029),h=t(61889),p=t(20890),x=t(94294),m=t(13400),v=t(36314),b=t(59434),g=t(83708),j=t(68449),k=t(60717),Z=t(97892),w=t.n(Z),y=t(12481),S=t(10159),f=t(75424),I=t(49071),C=t(10884),N=t(93819),D=t(80184);function O(e){var o,t,r,s,n,i;let{open:d,handleClose:v,dataItem:j,activateWorkshop:Z,deactivateWorkshop:O,actionsAllowed:W}=e;const E=(0,f.D)(),U=(0,b.v9)(k.w),[L,P]=(0,l.useState)(!1),[J,R]=(0,l.useState)(null),A=null===(o=JSON.parse(localStorage.getItem("userInfo")))||void 0===o?void 0:o.UserId;(0,l.useEffect)((()=>{(async()=>{try{const e=(0,y.JU)(S.db,"User",A),o=await(0,y.QT)(e);o.exists()&&R(o.data())}catch(e){console.log(" error")}})()}),[]);const F=j.UserId===A,B=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),T=null===J||void 0===J||null===(t=J.BookedWorkshops)||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,null===j||void 0===j?void 0:j.id),Y="".concat(window.location.host,"/nritya-webApp#/workshop/").concat(j.id);return(0,D.jsx)(c.Z,{open:d,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,D.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:U?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:U?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,D.jsxs)(h.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,D.jsx)(h.ZP,{item:!0,xs:12,lg:8,children:(0,D.jsx)("img",{src:j.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,D.jsxs)(h.ZP,{item:!0,xs:12,lg:4,children:[(0,D.jsxs)(u.Z,{sx:{height:"100%",bgcolor:U?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,D.jsxs)(u.Z,{sx:{flex:1},children:[(0,D.jsx)(p.Z,{variant:"h6",component:"p",sx:{color:U?"white":"black"},children:w()(j.date).format("DD/MM/YYYY")}),(0,D.jsx)(p.Z,{variant:"h6",component:"p",sx:{color:U?"white":"black"},children:j.time}),(0,D.jsx)(p.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:U?"white":"black"},children:j.venue})]}),(0,D.jsxs)(u.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,D.jsxs)(p.Z,{variant:"h5",sx:{alignSelf:"center",color:U?"white":"black"},children:["\u20b9",j.price]}),!W&&!F&&A&&(0,D.jsx)(x.Z,{variant:"outlined",onClick:async()=>{try{P(!0),(0,y.ET)((0,y.hJ)(S.db,g.Ul.BOOKINGS),{StudioId:j.StudioId,WorkshopId:j.id,UserId:A,bookingDate:Date.now()});const e=(0,y.JU)(S.db,"User",A),o=await(0,y.QT)(e);o.exists()&&null!=o.data()&&await(0,y.r7)(e,{BookedWorkshops:[...o.data().BookedWorkshops||[],j.id]}),R((e=>(0,a.Z)((0,a.Z)({},e),{},{BookedWorkshops:[...(null===e||void 0===e?void 0:e.BookedWorkshops)||[],j.id]}))),E("Workshop booked","success")}catch(e){console.error(e),E((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{P(!1)}},disabled:T||L,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:U?"white":"black",color:U?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:U?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:U?"white":"black"},"&:focus":{boxShadow:"none"}},children:T?"Booked":"Book Now"})]})]}),!W&&!F&&A&&(0,D.jsx)(p.Z,{component:"p",variant:"caption",sx:{my:"2px",color:U?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,D.jsxs)(h.ZP,{item:!0,sx:{mt:1},children:[(0,D.jsxs)(u.Z,{sx:{display:"flex",columnGap:2},children:[(0,D.jsxs)(p.Z,{variant:"h5",component:"p",sx:{color:U?"white":"black"},children:[j.workshopName||"",j.danceStyles.map((e=>" | ".concat(e)))]}),(0,D.jsx)(N.Z,{shareUrl:Y})]}),(0,D.jsxs)(p.Z,{variant:"body1",component:"p",sx:{mt:1,color:U?"white":"black"},children:[(0,D.jsxs)("span",{children:["By ",(null===(s=j.studioDetails)||void 0===s?void 0:s.studioName)||""]}),j.studioDetails&&(null===(n=j.studioDetails)||void 0===n?void 0:n.whatsappNumber)&&(0,D.jsx)(m.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(j.studioDetails.whatsappNumber,"?text=").concat(B),children:(0,D.jsx)("img",{src:I,alt:"Whatsapp call",style:{width:30,height:28}})}),j.studioDetails&&(null===(i=j.studioDetails)||void 0===i?void 0:i.mobileNumber)&&(0,D.jsx)(m.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(j.studioDetails.mobileNumber),children:(0,D.jsx)("img",{src:C,alt:"Phone call",style:{width:30,height:28}})})]}),(0,D.jsx)("div",{style:{color:U?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:j.description||"Workshop Description"}})]})]}),(0,D.jsxs)(u.Z,{sx:{mt:"1rem",textAlign:"right"},children:[W&&F&&(0,D.jsx)(x.Z,{onClick:()=>null!==j&&void 0!==j&&j.active?O(null===j||void 0===j?void 0:j.id):Z(null===j||void 0===j?void 0:j.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==j&&void 0!==j&&j.active?"Deactivate":"Activate"}),(0,D.jsx)(x.Z,{onClick:v,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:U?"white":"black",color:U?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:U?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:U?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function W(e){var o;let{actionsAllowed:t,dataItem:c,activateWorkshop:h,deactivateWorkshop:p}=e;const x=(0,b.v9)(k.w),[m,Z]=(0,l.useState)(null),[w,y]=(0,l.useState)(!1),S=c.id;(0,l.useEffect)((()=>{(async()=>{try{const e=await(0,j.Us)(g.Rb.WORKSHOPICON,S);Z(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[c.id]);const f={backgroundColor:x?"#444":"white",padding:"0px",color:x?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(s.Z,{variant:"solid",sx:(0,a.Z)((0,a.Z)({},f),{},{"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"}),onClick:()=>y(!0),children:[(0,D.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,D.jsx)("img",{src:m,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,D.jsx)(v.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:c&&c.danceStyles?c.danceStyles.slice(0,3).map(((e,o)=>(0,D.jsx)(i.Z,{color:o%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},o))):(0,D.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,D.jsxs)(n.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,D.jsxs)(u.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:x?"white":"black",extDecoder:"one"},children:[(0,D.jsx)("span",{children:c&&c.workshopName?c.workshopName:""}),!(null!==c&&void 0!==c&&c.active)&&(0,D.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,D.jsxs)(d.ZP,{style:{color:x?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(o=c.studioDetails)&&void 0!==o&&o.studioName?c.studioDetails.studioName:""]}),(0,D.jsx)(d.ZP,{style:{marginTop:10,color:x?"white":"black"},level:"body-xs",noWrap:!0,children:c.venue?c.venue:""}),(0,D.jsxs)(d.ZP,{style:{color:x?"white":"black"},level:"body-xs",children:[c.date||""," | ",c.time||""]})]})]}),(0,D.jsx)(O,{dataItem:(0,a.Z)((0,a.Z)({},c),{},{imageUrl:m}),open:w,handleClose:()=>y(!1),activateWorkshop:h,deactivateWorkshop:p,actionsAllowed:t})]})}const E=e=>{let{actionsAllowed:o,dataList:t,activateWorkshop:l,deactivateWorkshop:a}=e;return(0,D.jsx)("div",{className:"horizontal-scroll-wrapper",children:t.map(((e,t)=>(0,D.jsx)(W,{dataItem:e,activateWorkshop:l,deactivateWorkshop:a,actionsAllowed:o},e.id)))})}},77472:(e,o,t)=>{t.r(o),t.d(o,{default:()=>H});var l=t(1413),a=t(72791),r=t(10159),s=t(12481),n=t(83708),i=t(59434),d=t(60717),c=t(61224),u=t(43896),h=t(83449),p=t(47283),x=t(82851),m=t(16029),v=t(95313),b=t(89743),g=t(2677),j=t(94294),k=t(57482),Z=t(81018),w=t(51650),y=t(5712),S=t(76989),f=t(67107),I=t(44507),C=t(4708),N=t(63237),D=t(4560),O=t(24750),W=t(71652),E=t(97892),U=t.n(E),L=t(26073),P=t(75424),J=(t(82873),t(18406)),R=t(66770),A=t.n(R),F=(t(86009),t(763)),B=t(80184);const T=function(e){let{instructors:o,studioId:t,setWorkshop:c}=e;const u=(0,P.D)(),[h,p]=(0,a.useState)(""),x=(0,i.v9)(d.w),[m,E]=(0,a.useState)([]),[R,T]=(0,a.useState)([]),Y=o.map((e=>"".concat(e.name," - ").concat(e.id))),q=w.W,[H,M]=(localStorage.getItem("filterLocation"),(0,a.useState)(!1)),[z,_]=(0,a.useState)(""),[K,V]=(0,a.useState)(null),[G,Q]=(0,a.useState)(""),[X,$]=(0,a.useState)(""),[ee,oe]=(0,a.useState)(U()(new Date)),[te,le]=(0,a.useState)(!1),[ae,re]=(0,a.useState)(""),[se,ne]=(0,a.useState)(1),ie=(0,f.Z)({palette:{mode:x?"dark":"light"}}),de=e=>{e.reset(),T([]),E([]),V(null),_(""),Q(""),$(""),oe(U()(new Date)),re("")};return(0,a.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const v=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_WORKSHOPS),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),b=await(0,s.PL)(v);if(b.empty){var a,i,d,c,u,h,p;await(0,s.ET)((0,s.hJ)(r.db,n.i0.DRAFT_WORKSHOPS),{workshopName:(null===(a=e.workshopName)||void 0===a?void 0:a.value)||"",price:(null===(i=e.workshopFees)||void 0===i?void 0:i.value)||0,description:ae,danceStyles:R,instructors:m?null===m||void 0===m||null===(d=m.map)||void 0===d?void 0:d.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:K&&(null===K||void 0===K||null===(c=K.split)||void 0===c||null===(u=c.call(K,":"))||void 0===u||null===(h=u[1])||void 0===h||null===(p=h.trim)||void 0===p?void 0:p.call(h))||null,duration:z,level:G,time:X,date:ee.format("YYYY-MM-DD")})}else{var x;let a=[];b.forEach((e=>{a.push((0,l.Z)({id:e.id},e.data()))}));let r=a[0];e.workshopName.value=(null===r||void 0===r?void 0:r.workshopName)||"",e.workshopFees.value=(null===r||void 0===r?void 0:r.price)||0,e.capacity.value=(null===r||void 0===r?void 0:r.capacity)||0,re((null===r||void 0===r?void 0:r.description)||""),T(null!==r&&void 0!==r&&null!==(x=r.danceStyles)&&void 0!==x&&x.length?r.danceStyles:[]),E(o.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const s=t.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));s>0&&V(t[s]),_((null===r||void 0===r?void 0:r.duration)||""),Q((null===r||void 0===r?void 0:r.level)||""),$((null===r||void 0===r?void 0:r.time)||""),oe(U()((null===r||void 0===r?void 0:r.date)||Date.now()))}M(!0)}catch(v){console.error(v)}}()}),[]),(0,a.useEffect)((()=>{let e=null,o=null;return H&&async function(){const t=document.getElementById("addStudioForm");try{const a=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_WORKSHOPS),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),i=await(0,s.PL)(a);if(!i.empty){let a=[];i.forEach((e=>{a.push((0,l.Z)({id:e.id},e.data()))}));let d=a[0];const c=(0,s.JU)(r.db,n.i0.DRAFT_WORKSHOPS,d.id);e=setInterval((async()=>{try{var e,l,a,r,n,i,d;const h={workshopName:(null===(e=t.workshopName)||void 0===e?void 0:e.value)||"",price:(null===(l=t.workshopFees)||void 0===l?void 0:l.value)||0,description:ae,danceStyles:R,instructors:m?null===m||void 0===m||null===(a=m.map)||void 0===a?void 0:a.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,StudioId:K&&(null===K||void 0===K||null===(r=K.split)||void 0===r||null===(n=r.call(K,":"))||void 0===n||null===(i=n[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:z,level:G,time:X,date:ee.format("YYYY-MM-DD")};if((0,F.isEqual)(o,h))console.log("Nothing for Autosave to save");else try{await(0,s.r7)(c,h),o=h,console.log("Next AutoSave in",1e4)}catch(u){console.error(u)}}catch(u){console.error(u)}}),1e4)}}catch(a){console.error(a)}}(),()=>clearInterval(e)}),[H,R,m,ae,K,z,G,X,ee]),(0,a.useEffect)((()=>{if(x){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const o=document.getElementsByClassName("ql-editor ")[0];console.log(o),e.style.color="black"}}),[x]),(0,B.jsxs)("div",{children:[1===se&&(0,B.jsx)(v.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&null!==R&&void 0!==R&&R.length&&null!==m&&void 0!==m&&m.length&&ae&&K&&z&&G&&X&&ee||(o=!1),o})(o))try{var t,a,i,d,h;const x=JSON.parse(localStorage.getItem("userInfo")).email,v={workshopName:e.target.workshopName.value,danceStyles:R,instructors:m?null===m||void 0===m||null===(t=m.map)||void 0===t?void 0:t.call(m,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:x,StudioId:K&&(null===K||void 0===K||null===(a=K.split)||void 0===a||null===(i=a.call(K,":"))||void 0===i||null===(d=i[1])||void 0===d||null===(h=d.trim)||void 0===h?void 0:h.call(d))||null,duration:z,level:G,time:X,description:ae,date:ee.format("YYYY-MM-DD"),price:e.target.workshopFees.value,capacity:e.target.capacity.value,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};le(!0);const b=x,g={entity_name:v.workshopName,time:v.time,date:v.date,StudioId:v.StudioId},j=await(0,J.qC)(v,n.Ul.WORKSHOPS,b,g);if(j.ok){const e=await j.json();p(e.id),c((o=>[...o,(0,l.Z)({id:e.id},v)])),de(o),(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.i0.DRAFT_WORKSHOPS),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=await(0,s.PL)(e);if(!o.empty){let e=[];o.forEach((o=>{e.push((0,l.Z)({id:o.id},o.data()))}));let t=e[0];const a=(0,s.JU)(r.db,n.i0.DRAFT_WORKSHOPS,t.id);await(0,s.oe)(a)}})(),u("Workshop successfully added.","success"),ne((e=>e+1))}}catch(x){console.error("Error adding workshop: ",x),u((null===x||void 0===x?void 0:x.message)||"Something went wrong","error")}finally{le(!1)}else u("Please fill all the fields.","error")},style:{backgroundColor:x?"#202020":"",color:x?"white":"black"},children:(0,B.jsx)(v.Z.Group,{controlId:"formBasicAdd",children:(0,B.jsxs)("div",{children:[(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Workshop Name"}),(0,B.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},multiple:!0,id:"tags-standard",options:q,value:R,onChange:(e,o)=>{T(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},multiple:!0,id:"tags-standard",options:Y,value:m,onChange:(e,o)=>{E(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Duration (in hours)"}),(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:z,onChange:(e,o)=>{_(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Duration",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsx)(g.Z,{md:6,children:(0,B.jsx)(L.Z,{defaultTime:X||"00:00-00:00",handleSelect:(e,o)=>{const[t,l]=X.split(" - ");let a="".concat(t," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==o&&(a="".concat(t," - ").concat(o)),$(a)}})}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Date"}),(0,B.jsx)(W._,{dateAdapter:O.y,children:(0,B.jsx)(D.C,{components:["DatePicker"],children:(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(N.M,{sx:{width:"100%"},value:ee,onChange:e=>oe(e)})]})})})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Level"}),(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:G,onChange:(e,o)=>{Q(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,B.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Maximum capacity"}),(0,B.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Studio"}),(0,B.jsxs)(I.Z,{theme:ie,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},id:"tags-standard",options:t,value:K,onChange:(e,o)=>{V(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:x?"#333333":"",color:x?"white":"black"}}))})]})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Youtube video link"}),(0,B.jsx)(v.Z.Control,{rows:1,style:{backgroundColor:x?"#333333":"",color:x?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Brief Description"}),(0,B.jsx)(A(),{theme:"snow",placeholder:"Enter Description",value:ae,onChange:re})]})]}),(0,B.jsx)("hr",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsx)(g.Z,{xs:6}),(0,B.jsx)(g.Z,{xs:6,className:"d-flex justify-content-end",children:(0,B.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:x?"#892cdc":"black"},type:"submit",disabled:te,children:"Next"})})]})]})})}),te&&(0,B.jsx)(k.Z,{}),2===se&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(b.Z,{children:(0,B.jsx)(g.Z,{children:(0,B.jsx)(Z.Z,{entityId:h,title:"Workshop Images",storageFolder:n.Rb.WORKSHOPICON,maxImageCount:1})})}),(0,B.jsx)(b.Z,{style:{margin:"1rem 0"},children:(0,B.jsx)(g.Z,{style:{textAlign:"right"},children:(0,B.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:x?"#892cdc":"black"},onClick:()=>ne((e=>e-1)),children:"Done"})})})]})]})};const Y=function(e){let{workshopId:o,instructors:t,studioId:c}=e;localStorage.getItem("filterLocation");const u=(0,P.D)(),[h,p]=(0,a.useState)(null),[x,m]=(0,a.useState)([]),E=w.W,[R,F]=(0,a.useState)([]),T=(0,i.v9)(d.w),[Y,q]=(0,a.useState)(""),[H,M]=(0,a.useState)(""),[z,_]=(0,a.useState)(""),[K,V]=(0,a.useState)(""),[G,Q]=(0,a.useState)(U()(new Date)),[X,$]=(0,a.useState)(!1),ee=t.map((e=>"".concat(e.name," - ").concat(e.id))),oe=(0,f.Z)({palette:{mode:T?"dark":"light"}}),[te,le]=(0,a.useState)(""),[ae,re]=(0,a.useState)(null),se=e=>{e.reset(),F([]),m([]),p(null),q(""),M(""),V(""),Q(U()(new Date)),re(null),le(""),_("")};return(0,a.useEffect)((()=>{if(ae){const e=t.filter((e=>ae.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(m(e),ae&&ae.danceStyles&&F(ae.danceStyles),ae&&ae.duration&&q(ae.duration),ae&&ae.level&&M(ae.level),ae&&ae.time&&V(ae.time),ae&&ae.date&&Q(U()(ae.date)),ae&&ae.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===ae.StudioId));p(c[e]||null)}_((null===ae||void 0===ae?void 0:ae.description)||"")}}),[ae]),(0,a.useEffect)((()=>{if(T){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const o=document.getElementsByClassName("ql-editor ")[0];console.log(o),e.style.color="black"}}),[T]),(0,B.jsxs)("div",{style:{backgroundColor:T?"#202020":"",color:T?"white":"black"},children:[(0,B.jsx)("br",{}),(0,B.jsxs)(v.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const o=e.target;if(te)if((e=>{let o=!0;return e.workshopName.value&&e.workshopFees.value&&e.capacity.value&&z&&null!==R&&void 0!==R&&R.length&&null!==x&&void 0!==x&&x.length&&h&&Y&&H&&K&&G||(o=!1),o})(o)){try{var t,l,a,r,s;const e={workshopName:o.workshopName.value,price:o.workshopFees.value,capacity:o.capacity.value,description:z,danceStyles:R,instructors:x?null===x||void 0===x||null===(t=x.map)||void 0===t?void 0:t.call(x,(e=>{var o,t,l,a;return(null===e||void 0===e||null===(o=e.split)||void 0===o||null===(t=o.call(e,"-"))||void 0===t||null===(l=t[1])||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(l=h.split)||void 0===l||null===(a=l.call(h,":"))||void 0===a||null===(r=a[1])||void 0===r||null===(s=r.trim)||void 0===s?void 0:s.call(r))||null,duration:Y,level:H,time:K,date:G.format("YYYY-MM-DD"),youtubeViedoLink:o.youtubeViedoLink.value};console.log(e),$(!0);const i=await(0,J.fP)(e,n.Ul.WORKSHOPS,te);i.ok?(se(o),u("Workshop successfully updated.","success")):u("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating workshop: ",i),u((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{$(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:[(0,B.jsxs)(v.Z.Group,{controlId:"formBasicUpdate",children:[(0,B.jsx)(v.Z.Label,{children:"Id"}),(0,B.jsxs)(v.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:T?"#333333":"",color:T?"white":"black",height:"auto"},onChange:async e=>{e.preventDefault();const o=e.target.value.split(":").pop().trim();le(o);try{const e=await(0,s.QT)((0,s.JU)(r.db,n.Ul.WORKSHOPS,o));e.exists?re(e.data()):re(null)}catch(t){console.error("Error fetching workshop data:",t,o)}},children:[(0,B.jsx)("option",{value:"",children:"Select a workshop..."}),o&&o.length>0?o.map((e=>(0,B.jsx)("option",{value:e,children:e},e))):(0,B.jsx)("option",{value:"",children:"No workshop yet!"})]}),(0,B.jsxs)("div",{children:[(0,B.jsxs)(b.Z,{children:[(0,B.jsx)(g.Z,{md:6,children:(0,B.jsx)(Z.Z,{entityId:te,title:"Workshop Images",storageFolder:n.Rb.WORKSHOPICON,maxImageCount:1})}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)("br",{}),(0,B.jsx)(v.Z.Label,{children:"Workshop Name"}),(0,B.jsx)(v.Z.Control,{rows:1,defaultValue:ae?ae.workshopName:"",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"}),(0,B.jsx)("br",{}),(0,B.jsx)(v.Z.Label,{children:"Dance Styles"}),(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},multiple:!0,id:"tags-standard",options:E,value:R,onChange:(e,o)=>{F(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"}}))})]}),(0,B.jsx)("br",{}),(0,B.jsx)(v.Z.Label,{children:"Names of Instructors"}),(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},multiple:!0,id:"tags-standard",options:ee,value:x,onChange:(e,o)=>{m(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"}}))})]})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Duration (in hours)"}),(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:Y,onChange:(e,o)=>{q(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Duration",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"}}))})]})]}),(0,B.jsx)(g.Z,{md:6,children:(0,B.jsx)(L.Z,{defaultTime:K||"00:00-00:00",handleSelect:(e,o)=>{const[t,l]=K.split(" - ");let a="".concat(t," - ").concat(l);null!==e&&(a="".concat(e," - ").concat(l)),null!==o&&(a="".concat(t," - ").concat(o)),V(a)}})})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Date"}),(0,B.jsx)(W._,{dateAdapter:O.y,children:(0,B.jsx)(D.C,{components:["DatePicker"],children:(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(N.M,{sx:{width:"100%"},value:G,onChange:e=>Q(e)})]})})})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Level"}),(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},id:"tags-standard",options:[n.zq.ALL,n.zq.BEGINNERS,n.zq.INTERMEDIATE,n.zq.ADVANCED],value:H,onChange:(e,o)=>{M(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"}}))})]})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Fees/Price"}),(0,B.jsx)(v.Z.Control,{rows:1,defaultValue:ae?ae.price:"",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Maximum capacity"}),(0,B.jsx)(v.Z.Control,{rows:1,defaultValue:ae&&void 0!==ae.capacity?ae.capacity:"",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]})]}),(0,B.jsx)("br",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Studio"}),(0,B.jsxs)(I.Z,{theme:oe,children:[(0,B.jsx)(C.ZP,{}),(0,B.jsx)(y.Z,{style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},id:"tags-standard",options:c,value:h,onChange:(e,o)=>{p(o)},renderInput:e=>(0,B.jsx)(S.Z,(0,l.Z)((0,l.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"}}))})]})]}),(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Youtube video Link"}),(0,B.jsx)(v.Z.Control,{rows:1,defaultValue:ae?ae.youtubeViedoLink:"",style:{backgroundColor:T?"#333333":"",color:T?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,B.jsx)("br",{}),(0,B.jsx)(b.Z,{children:(0,B.jsxs)(g.Z,{md:6,children:[(0,B.jsx)(v.Z.Label,{children:"Brief Description"}),(0,B.jsx)(A(),{theme:"snow",placeholder:"Enter Description",value:z,onChange:_})]})}),(0,B.jsx)("hr",{}),(0,B.jsxs)(b.Z,{children:[(0,B.jsx)(g.Z,{xs:6}),(0,B.jsx)(g.Z,{xs:6,className:"d-flex justify-content-end",children:(0,B.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:T?"#892cdc":"black"},type:"submit",disabled:X,children:"Update Workshop"})})]})]})]}),X&&(0,B.jsx)(k.Z,{})]})]})};var q=t(76785);const H=function(){const[e,o]=(0,a.useState)([]),[t,v]=(0,a.useState)([]),[b,g]=(0,a.useState)([]),j=(0,i.v9)(d.w),[k,Z]=(0,a.useState)([]),[w,y]=(0,a.useState)(!1),[S,f]=(0,a.useState)(-1),{currentUser:I}=(0,c.a)(),[C,N]=a.useState("1");return(0,a.useEffect)((()=>{(async e=>{try{const e=(0,s.JU)(r.db,"User",I.uid),o=await(0,s.QT)(e);o.exists()&&null!=o.data()&&(y(o.data().CreatorMode),f(o.data().isPremium))}catch(o){console.log(" error")}})()}),[w]),(0,a.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const o=(0,s.hJ)(r.db,n.Ul.INSTRUCTORS),t=(0,s.IO)(o,(0,s.ar)("createdBy","==",e)),l=await(0,s.PL)(t),a=[];l.forEach((e=>{a.push({id:e.id,name:e.data().name})})),Z(a)})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.Ul.STUDIO),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),t=(await(0,s.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const o=e.data();return(0,l.Z)({id:e.id},o)}));o(t.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=(0,s.IO)((0,s.hJ)(r.db,n.Ul.WORKSHOPS),(0,s.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=(await(0,s.PL)(e)).docs.filter((e=>e.data().workshopName)).map((e=>{const o=e.data();return(0,l.Z)({id:e.id},o)})).map((async e=>{const o=(0,s.JU)(r.db,n.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),t=await(0,s.QT)(o);return(0,l.Z)((0,l.Z)({},e),{},{studioDetails:t.data()})})),t=await Promise.all(o);localStorage.setItem("WorkshopCreated",JSON.stringify(t)),v(t),g(t.map((e=>String(e.workshopName)+" :"+String(e.id))))})()}),[v]),(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("WorkshopCreated"))||[];v(e);const o=e.map((e=>"".concat(e.workshopName," : ").concat(e.id)));g(o)}),[g]),(0,B.jsxs)("div",{children:[(0,B.jsx)("br",{}),w?(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(m.Z,{sx:{width:"100%",typography:"body1"},children:(0,B.jsxs)(h.ZP,{value:C,children:[(0,B.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,B.jsxs)(p.Z,{style:{color:j?"white":"black"},onChange:(e,o)=>{N(o)},"aria-label":"lab API tabs example",children:[(0,B.jsx)(u.Z,{style:{color:j?"white":"black"},label:"Add Workshop",value:"1"}),(0,B.jsx)(u.Z,{style:{color:j?"white":"black"},label:"Update Workshop",value:"2"})]})}),(0,B.jsx)(x.Z,{value:"1",children:(0,B.jsx)(T,{instructors:k,studioId:e,setWorkshop:v})}),(0,B.jsx)(x.Z,{value:"2",children:(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(Y,{instructors:k,workshopId:b,studioId:e})})})]})})}):"",t.length>0&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h3",{style:{color:j?"white":"black"},children:"Your Workshops"}),(0,B.jsx)(q.Z,{dataList:t,activateWorkshop:async e=>{try{const o=(0,s.JU)(r.db,n.Ul.WORKSHOPS,e);await(0,s.r7)(o,{active:!0}),v((o=>o.map((o=>o.id===e?(0,l.Z)((0,l.Z)({},o),{},{active:!0}):o))))}catch(o){console.error(o)}},deactivateWorkshop:async e=>{try{const o=(0,s.JU)(r.db,n.Ul.WORKSHOPS,e);await(0,s.r7)(o,{active:!1}),v((o=>o.map((o=>o.id===e?(0,l.Z)((0,l.Z)({},o),{},{active:!1}):o))))}catch(o){console.error(o)}},actionsAllowed:!0})]})]})}}}]);
//# sourceMappingURL=8117.965b2df5.chunk.js.map