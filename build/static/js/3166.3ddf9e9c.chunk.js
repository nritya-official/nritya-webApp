(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[3166],{41893:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var a=n(72791),r=n(47022),o=n(95313),s=n(43360),l=n(59434),c=n(60717),i=n(68449),d=n(83708),u=n(67107),h=n(44507),m=n(35527),p=n(20890),g=n(63875),x=n(74512),f=n(15825),b=n(66934),y=n(56856),j=n(23285),v=n(80184);const C=(0,b.ZP)(y.Z)((e=>{let{theme:t}=e;return{["&.".concat(j.Z.alternativeLabel)]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},["&.".concat(j.Z.active)]:{["& .".concat(j.Z.line)]:{borderColor:"green"}},["&.".concat(j.Z.completed)]:{["& .".concat(j.Z.line)]:{borderColor:"green"}},["& .".concat(j.Z.line)]:{borderColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderTopWidth:3,borderRadius:1}}})),_=[d.n$.SUBMITTED,d.n$.UNDER_REVIEW,d.n$.REVIEWED,d.n$.VERIFIED],E={[d.n$.SUBMITTED]:0,[d.n$.UNDER_REVIEW]:1,[d.n$.REVIEWED]:2,[d.n$.VERIFIED]:3,[d.n$.VERIFICATION_FAILED]:3},S=e=>{let{kycId:t,status:n}=e;const r=(0,l.v9)(c.w),[o,s]=(0,a.useState)({});console.log(n);const b=(0,u.Z)({palette:{mode:r?"dark":"light",primary:{main:r?"#90caf9":"#1976d2"}}});return(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,i.Ld)(d.Ul.USER_KYC,t);s(e)}catch(e){console.error("Error fetching KYC data for KYC ID ".concat(t,":"),e)}})()}),[t]),(0,v.jsx)(h.Z,{theme:b,children:(0,v.jsxs)(m.Z,{sx:{textAlign:"center",marginBottom:"1rem"},elevation:2,children:[(0,v.jsxs)(p.Z,{variant:"h5",component:"p",children:["Application Status: ",n]}),(0,v.jsx)("br",{}),(0,v.jsx)(g.Z,{activeStep:E[n],alternativeLabel:!0,connector:(0,v.jsx)(C,{}),children:_.map(((e,t)=>(0,v.jsx)(x.Z,{children:(0,v.jsx)(f.Z,{error:e===d.n$.VERIFIED&&n===d.n$.VERIFICATION_FAILED,children:e===d.n$.VERIFIED&&n===d.n$.VERIFICATION_FAILED?"Failed Verification":e})},t)))}),(0,v.jsx)("br",{})]})})};var k=n(89704),I=n.n(k);const Z=(e,t)=>{let n="";switch(console.log(e,t),e){case"phone_number":/^\d{10}$/.test(t)||(n="Phone number must be exactly 10 digits.");break;case"zip_pin_code":/^\d{6}$/.test(t)||(n="ZIP/Pin code must be exactly 6 digits.");break;case"aadhar":t&&!/^\d{12}$/.test(t)&&(n="Aadhar number must be exactly 12 digits.");break;case"gstin":t&&!/^[0-9]{2}[A-Za-z]{5}[0-9]{4}[A-Za-z]{1}[1-9A-Za-z]{1}[Zz]{1}[0-9A-Za-z]{1}$/.test(t)&&(n="GSTIN must be a valid format (e.g., 22ABCDE0000A1Z5).")}return console.log(n),n};var w=n(18406),R=n(57482),T=n(82873),N=n(65202);const A=new Map([["first_name","First Name"],["middle_last_name","Middle & Last Name"],["phone_number","Phone Number"],["street_address","Street Address"],["city","City"],["state_province","State"],["state","State"],["zip_pin_code","PIN Code/ZIP"],["aadhar","Aadhar Number"],["gstin","GST Number"],["comments","Remark(s)"]]),U=[["first_name"],["middle_last_name"],["phone_number"],["street_address"],["city"],["state_province","state"],["zip_pin_code"]],D=T.c,O=N.$;const V=function(){var e,t,n;const[u,h]=(0,a.useState)({first_name:"",middle_last_name:"",phone_number:"",street_address:"",city:"",state_province:"",zip_pin_code:"",country:"India",aadhar:"",gstin:"",comments:"",status:d.n$.SUBMITTED,tncAgreed:!1,hash:""}),[m,g]=(0,a.useState)(null),x=(0,l.v9)(c.w),[f,b]=(0,a.useState)({}),y=null===(e=JSON.parse(localStorage.getItem("userInfo")))||void 0===e?void 0:e.UserId,j="".concat(y,"_Kyc"),[C,_]=(0,a.useState)(null),[E,k]=(0,a.useState)(null),[T,N]=(0,a.useState)([]),[V,$]=(0,a.useState)([]),[L,F]=(0,a.useState)(!1),[P,G]=(0,a.useState)(-1),[K,Y]=(0,a.useState)(-1),[B,M]=(0,a.useState)(!1),z=null===(t=JSON.parse(localStorage.getItem("userInfo")))||void 0===t?void 0:t.email,W=null===(n=JSON.parse(localStorage.getItem("userInfo")))||void 0===n?void 0:n.displayName,q=e=>{const{name:t,value:n}=e.target,a=Z(t,n);b((e=>({...e,[t]:a}))),h((e=>({...e,[t]:n})))};(0,a.useEffect)((()=>{(async()=>{const e=await(0,i.Ld)(d.Ul.USER_KYC,j);e?(g(e),h({...e,status:e.status||d.n$.SUBMITTED})):g(null)})(),(async()=>{const e="".concat(d.Rb.CREATORS_KYC_DOCUMENTS,"/").concat(y);try{const[t,n]=await Promise.all([(0,i.XG)("".concat(e,"/Aadhar/")),(0,i.XG)("".concat(e,"/Gst/"))]);t&&t.length>0?_(t):(_(null),console.warn("No Aadhar documents found.")),n&&n.length>0?k(n):(k(null),console.warn("No GST documents found."))}catch(t){console.error("Error fetching KYC documents:",t)}})()}),[j]);const H=["status","hash","country","tncAgreed","comments","UserId","gstin","aadhar"];return(0,v.jsxs)("div",{style:{color:x?"white":"black"},children:[(0,v.jsxs)(r.Z,{className:"glassmorphic-container",style:{margin:"auto",border:x?"1px solid white":"1px solid black",borderRadius:"5px",padding:"20px"},children:[(0,v.jsxs)(o.Z,{onSubmit:async e=>{e.preventDefault(),M(!0);try{const t=Object.keys(u).filter((e=>!["hash","status","country","comments","UserId"].includes(e)));let n=!0,a=[],r=0;if(t.forEach((e=>{const t=Z(e,u[e]);t&&(n=!1,r+=1,a.push("".concat(r,": ").concat(t)),b((n=>({...n,[e]:t}))))})),!n)return void alert("Please correct the following errors before submitting:\n\n".concat(a.join("\n")));const o=await(0,i.Ld)(d.Ul.USER_KYC,j),s=(e=>{const t=Object.keys(e).filter((e=>"hash"!==e&&"status"!==e)).sort().map((t=>"".concat(t,":").concat(e[t]))).join("|");return I().SHA256(t).toString()})(u);console.log(s,null===o||void 0===o?void 0:o.hash);const l=z,c={user_name:W,user_id:y};if(o){if(o.hash!==s){const e={...u,hash:s};await(0,w.qC)(e,d.Ul.USER_KYC,l,c)}}else{const e={...u,hash:s};await(0,w.qC)(e,d.Ul.USER_KYC,l,c)}T&&(console.log(T),await(0,i.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,y,"Aadhar"),G(0),await(0,i.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,T,y,"Aadhar",(e=>G(e)),(e=>{_(e),console.log(e)}))),V&&(console.log(V),await(0,i.qS)(d.Rb.CREATORS_KYC_DOCUMENTS,y,"Gst"),Y(0),await(0,i.FV)(d.Rb.CREATORS_KYC_DOCUMENTS,V,y,"Gst",(e=>Y(e)),(e=>{k(e),console.log(e)}))),await(0,i.Xt)(d.Ul.USER,y,{KycIdList:{[j]:u.status}}),e.target.reset()}catch(t){console.error("Error processing KYC: ",t)}finally{M(!1)}},children:[(0,v.jsx)("h1",{style:{color:x?"white":"black",textTransform:"capitalize"},children:"Verify yourself"}),(0,v.jsx)("div",{className:"row",children:U.map((e=>{const t=e.find((e=>!H.includes(e)&&void 0!==u[e]));return t?(0,v.jsx)("div",{className:"col-md-6 col-lg-4",children:(0,v.jsxs)(o.Z.Group,{controlId:"formBasic".concat(t),children:[(0,v.jsx)(p.Z,{style:{color:x?"white":"black"},children:A.get(t)}),["city","state_province"].includes(t)?(0,v.jsxs)(o.Z.Control,{as:"select",placeholder:"Enter ".concat(A.get(t)),name:t,value:u[t],onChange:q,required:!0,className:"glassmorphic-input",style:{backgroundColor:x?"#181818":"#e5e5e5",color:x?"white":"black",paddingTop:0,paddingBottom:0},children:[(0,v.jsxs)("option",{value:"",children:["Select a ",A.get(t)]}),[..."city"===t?D:O].map(((e,t)=>(0,v.jsx)("option",{value:e,children:e},t)))]}):(0,v.jsx)(o.Z.Control,{type:"age"===t||"phone_number"===t?"number":"text",placeholder:"Enter ".concat(A.get(t)),name:t,value:u[t],onChange:q,required:!0,className:"glassmorphic-input",style:{backgroundColor:x?"#181818":"#e5e5e5",color:x?"white":"black"}}),f[t]&&(0,v.jsx)("span",{style:{color:"red"},children:f[t]})," "]})},t):null}))}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,v.jsxs)(o.Z.Group,{controlId:"formBasicAadhar",children:[(0,v.jsx)(o.Z.Label,{style:{color:x?"white":"black"},children:"Aadhar"}),(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)(o.Z.Control,{type:"text",placeholder:"Enter Aadhar Number",name:"aadhar",className:"glassmorphic-input",value:u.aadhar,onChange:q,style:{backgroundColor:x?"#181818":"#e5e5e5",color:x?"white":"black",marginRight:"10px"}}),(0,v.jsx)(s.Z,{disable:"Verified"===u.status,variant:"light",onClick:()=>document.getElementById("aadharUpload").click(),style:{padding:"0.5rem",backgroundColor:x?"#333":"#f8f9fa",color:x?"white":"black",cursor:"pointer"},children:"Upload"}),(0,v.jsx)("input",{type:"file",id:"aadharUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{N(e.target.files[0]),F(!0)})(e)})]}),C&&C.length>0&&C[0].fileURL?(0,v.jsx)(s.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(C[0].fileURL,"_blank"),children:"Download Aadhar Document"}):(0,v.jsx)("p",{style:{color:x?"white":"black"},children:(null===T||void 0===T?void 0:T.name)||"No new Aadhar file uploaded."})]}),f.aadhar&&(0,v.jsx)("span",{style:{color:"red"},children:f.aadhar}),(0,v.jsx)("div",{children:P>=0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("progress",{value:P,max:"100"}),(0,v.jsxs)("p",{children:[P,"% uploaded"]})]})})]})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,v.jsxs)(o.Z.Group,{controlId:"formBasicGst",children:[(0,v.jsx)(o.Z.Label,{style:{color:x?"white":"black"},children:"GST"}),(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)(o.Z.Control,{type:"text",placeholder:"Enter GST Number",name:"gstin",value:u.gstin,onChange:q,className:"glassmorphic-input",style:{backgroundColor:x?"#181818":"#e5e5e5",color:x?"white":"black",marginRight:"10px"}}),(0,v.jsx)(s.Z,{disable:"Verified"===u.status,variant:"light",onClick:()=>document.getElementById("gstUpload").click(),style:{padding:"0.5rem",backgroundColor:x?"#333":"#f8f9fa",color:x?"white":"black",cursor:"pointer"},children:"Upload"}),(0,v.jsx)("input",{type:"file",id:"gstUpload",accept:".pdf",style:{display:"none"},onChange:e=>(e=>{$(e.target.files[0]),F(!0)})(e)})]}),E&&E.length>0&&E[0].fileURL?(0,v.jsx)(s.Z,{variant:"link",style:{color:"#007bff",textDecoration:"none"},onClick:()=>window.open(E[0].fileURL,"_blank"),children:"Download GST Document"}):(0,v.jsxs)("p",{style:{color:x?"white":"black"},children:[" ",(null===V||void 0===V?void 0:V.name)||"No new GST file uploaded."]})]}),f.gstin&&(0,v.jsx)("span",{style:{color:"red"},children:f.gstin}),(0,v.jsx)("div",{children:K>=0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("progress",{value:K,max:"100"}),(0,v.jsxs)("p",{children:[K,"% uploaded"]})]})})]})}),(0,v.jsxs)("div",{class:"form-check",children:[(0,v.jsx)("input",{type:"checkbox",class:"form-check-input",id:"tnc-switch",checked:u.tncAgreed,onChange:e=>{h((t=>({...t,tncAgreed:e.target.checked})))}}),(0,v.jsx)("label",{class:"form-check-label",for:"exampleCheck1",children:(0,v.jsxs)("span",{style:{color:x?"white":"black"},children:["I agree to the ",(0,v.jsx)("a",{href:"#/npoliciesStudio",style:{color:x?"lightblue":"blue"},children:"Terms and Conditions. Click to read."})]})})]}),(0,v.jsx)("br",{}),u.comments&&(0,v.jsxs)("div",{className:"col-md-12 col-lg-12",children:[(0,v.jsx)("br",{}),(0,v.jsxs)(o.Z.Group,{controlId:"formBasicComments",children:[(0,v.jsx)(o.Z.Label,{children:A.get("comments")}),(0,v.jsx)(o.Z.Control,{as:"textarea",name:"comments",value:u.comments,readOnly:!0,style:{backgroundColor:x?"#181818":"#e5e5e5",color:x?"white":"black"}})]})]}),(0,v.jsx)(s.Z,{variant:"info",type:"submit",disabled:"Verified"===u.status||!u.tncAgreed,children:"Submit"})]}),B&&(0,v.jsx)(R.Z,{}),(0,v.jsx)("br",{}),(0,v.jsx)(v.Fragment,{children:u.hash&&(0,v.jsx)(S,{kycId:j,status:u.status})})]}),(0,v.jsx)("br",{})]})}},44507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(87462),r=n(63366),o=n(72791);const s=o.createContext(null);function l(){return o.useContext(s)}const c="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var i=n(80184);const d=function(e){const{children:t,theme:n}=e,r=l(),d=o.useMemo((()=>{const e=null===r?n:function(e,t){if("function"===typeof t)return t(e);return(0,a.Z)({},e,t)}(r,n);return null!=e&&(e[c]=null!==r),e}),[n,r]);return(0,i.jsx)(s.Provider,{value:d,children:t})};var u=n(62564),h=n(69120),m=n(5402);const p={};function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o.useMemo((()=>{const o=e&&t[e]||t;if("function"===typeof n){const s=n(o),l=e?(0,a.Z)({},t,{[e]:s}):s;return r?()=>l:l}return e?(0,a.Z)({},t,{[e]:n}):(0,a.Z)({},t,n)}),[e,t,n,r])}const x=function(e){const{children:t,theme:n,themeId:a}=e,r=(0,h.Z)(p),o=l()||p,s=g(a,r,n),c=g(a,o,n,!0),x="rtl"===s.direction;return(0,i.jsx)(d,{theme:c,children:(0,i.jsx)(u.T.Provider,{value:s,children:(0,i.jsx)(m.Z,{value:x,children:t})})})};var f=n(988);const b=["theme"];function y(e){let{theme:t}=e,n=(0,r.Z)(e,b);const o=t[f.Z];return(0,i.jsx)(x,(0,a.Z)({},n,{themeId:o?f.Z:void 0,theme:o||t}))}},5402:(e,t,n)=>{"use strict";n.d(t,{V:()=>i,Z:()=>d});var a=n(87462),r=n(63366),o=n(72791),s=n(80184);const l=["value"],c=o.createContext();const i=()=>{const e=o.useContext(c);return null!=e&&e},d=function(e){let{value:t}=e,n=(0,r.Z)(e,l);return(0,s.jsx)(c.Provider,(0,a.Z)({value:null==t||t},n))}},80888:(e,t,n)=>{"use strict";var a=n(79047);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==a){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},52007:(e,t,n)=>{e.exports=n(80888)()},79047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=3166.3ddf9e9c.chunk.js.map