"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[7472],{81018:(e,a,o)=>{o.d(a,{Z:()=>j});var t=o(72791),l=o(6429),r=o.n(l),n=o(30276),s=o(10159),i=o(59434),d=o(60717),c=o(68449),u=o(57621),h=o(13400),p=o(39504),m=o(27247),x=o(75424),g=o(83708),b=o(80184);const v=e=>{let{entityId:a,storageFolder:o,title:l,maxImageCount:v=10,updateMode:j,disable:y}=e;(0,x.D)();const[k,w]=(0,t.useState)([]),[f,S]=(0,t.useState)([]),[Z,I]=(0,t.useState)([]),[C,N]=(0,t.useState)([]),D=(0,i.v9)(d.w),[B,P]=(0,t.useState)(-1),[E,O]=(0,t.useState)(-1);console.log("Kyc enitity id ",a,y);const L=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const o=a<0?0:a,t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]};(0,t.useEffect)((()=>{a&&W(a)}),[a]),(0,t.useEffect)((()=>{if(v&&k.length>v){const e=k.slice(0,v);alert("Exceeded maxImageCount, keeping first ".concat(v," files.")),w(e)}}),[k,v]);const U=(e,a)=>{const o=e.map((e=>e.id)),t=a.map((e=>e.id));return{imagesToDelete:a.filter((e=>!o.includes(e.id))),newImages:e.filter((e=>!t.includes(e.id)))}},W=async e=>{w([]),I([]),N([]);try{const a="".concat(o,"/").concat(e);console.log(a);const t=(0,n.iH)(s.tO,a),l=await(0,n.aF)(t),r=await Promise.all(l.items.map((async e=>{const a=await(0,n.Jt)(e);return{id:e.name,filename:e.name,fileURL:a}})));S(r),w(r)}catch(a){console.error("Error fetching user images:",a)}};return(0,b.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,b.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"card mt-5",children:(0,b.jsxs)("div",{className:"card-body",style:{backgroundColor:D?"#333333":"white"},children:[(0,b.jsxs)("div",{className:"kb-data-box",children:[(0,b.jsx)("div",{className:"kb-modal-data-title",children:(0,b.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,b.jsx)("h4",{children:l}),(0,b.jsxs)("p",{children:["Max no of image(s):",v," ",o===g.Rb.STUDIOIMAGES&&(0,b.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,b.jsxs)("form",{style:{backgroundColor:D?"#333333":"white"},children:[(0,b.jsx)("div",{className:"kb-file-upload",children:(0,b.jsx)("div",{className:"file-upload-box",children:(0,b.jsx)("input",{type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const a=Array.from(e.target.files),o=[];a.forEach((e=>{const t=new FileReader;t.onloadend=()=>{o.push({id:r().generate(),filename:e.name,filetype:e.type,fileimage:t.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:L(e.size),file:e}),o.length===a.length&&(w((e=>[...e,...o])),I(o))},t.readAsDataURL(e)}))},multiple:!0})})}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"kb-attach-box mb-3",children:(0,b.jsx)("div",{className:"row",children:a&&k.length>0?k.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,b.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,b.jsx)(h.Z,{"aria-label":"delete",disabled:y,onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this image?")){const a=k.find((a=>a.id===e));N((e=>[...e,a])),w((a=>a.filter((a=>a.id!==e))))}})(e.id),style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,b.jsx)(m.Z,{style:{color:"ff0000"}})})]}):(0,b.jsx)(p.Z,{children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("p",{children:"No images selected"})})})}),(0,b.jsx)("div",{className:"kb-buttons-box",children:(0,b.jsx)("button",{type:"button",className:"btn form-submit",style:{backgroundColor:D?"#892CDC":"black",color:"white"},onClick:async()=>{if(a)try{if(1===v)await(0,c.ih)(o,a),await(0,c.eg)(o,Z,a);else{const{imagesToDelete:e,newImages:t}=U(k,f);e.length>0&&await(0,c.xR)(o,e,a,P),t.length>0&&await(0,c.eg)(o,t,a,O)}}catch(e){console.error("Error uploading/deleting images:",e)}else alert("No studio selected")},disabled:y,children:"Image Upload"})})]}),k.length>0&&(0,b.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("hr",{}),k.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,b.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),B>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Deleting images... ",B.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:B,max:"100",style:{color:D?"#fff":"#000"},children:[B.toFixed(2),"%"]})]}),E>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Uploading images... ",E.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:E,max:"100",style:{color:D?"#fff":"#000"},children:[E.toFixed(2),"%"]})]})]})})})})})};v.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const j=v},26073:(e,a,o)=>{o.d(a,{Z:()=>d});o(72791);var t=o(89743),l=o(2677),r=o(95313),n=o(59434),s=o(60717),i=o(80184);const d=e=>{var a;let{defaultTime:o,handleSelect:d}=e;const c=o.split("-")[0].trim(),u=null===(a=o.split("-")[1])||void 0===a?void 0:a.trim(),h=(0,n.v9)(s.w),p=e=>{const a=(()=>{const e=[];let a=[],o=[];for(let t=0;t<24;t++)for(let e=0;e<60;e+=30){const l=e.toString().padStart(2,"0");if(t<12){const e=0===t?12:t;a.push("".concat(e,":").concat(l," AM"))}else{const e=12===t?12:t%12;o.push("".concat(e,":").concat(l," PM"))}}for(let t=0;t<a.length||t<o.length;t++)t<a.length&&e.push(a[t]),t<o.length&&e.push(o[t]);return e})();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("option",{value:e,children:e}),a.map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]})};return(0,i.jsxs)(t.Z,{children:[(0,i.jsx)(l.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"Start Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(c)})]})}),(0,i.jsx)(l.Z,{children:(0,i.jsxs)(r.Z.Group,{children:[(0,i.jsx)(r.Z.Label,{children:"End Time"}),(0,i.jsx)(r.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(u)})]})})]})}},76785:(e,a,o)=>{o.d(a,{Z:()=>E});o(11518);var t=o(72791),l=o(1413),r=o(92552),n=o(84654),s=o(28658),i=o(69597),d=o(83168),c=o(88447),u=o(16029),h=o(61889),p=o(20890),m=o(94294),x=o(13400),g=o(36314),b=o(59434),v=o(83708),j=o(68449),y=o(60717),k=o(97892),w=o.n(k),f=o(12481),S=o(10159),Z=o(75424),I=o(49071),C=o(10884),N=o(93819),D=o(80184);function B(e){var a,o,r,n,s,i;let{open:d,handleClose:g,dataItem:j,activateWorkshop:k,deactivateWorkshop:B,actionsAllowed:P}=e;const E=(0,Z.D)(),O=(0,b.v9)(y.w),[L,U]=(0,t.useState)(!1),[W,A]=(0,t.useState)(null),J=null===(a=JSON.parse(localStorage.getItem("userInfo")))||void 0===a?void 0:a.UserId;(0,t.useEffect)((()=>{(async()=>{try{const e=(0,f.JU)(S.db,"User",J),a=await(0,f.QT)(e);a.exists()&&A(a.data())}catch(e){console.log(" error")}})()}),[]);const R=j.UserId===J,T=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),M=null===W||void 0===W||null===(o=W.BookedWorkshops)||void 0===o||null===(r=o.includes)||void 0===r?void 0:r.call(o,null===j||void 0===j?void 0:j.id),F="".concat(window.location.host,"/nritya-webApp#/workshop/").concat(j.id);return(0,D.jsx)(c.Z,{open:d,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,D.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:O?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:O?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,D.jsxs)(h.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,D.jsx)(h.ZP,{item:!0,xs:12,lg:8,children:(0,D.jsx)("img",{src:j.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,D.jsxs)(h.ZP,{item:!0,xs:12,lg:4,children:[(0,D.jsxs)(u.Z,{sx:{height:"100%",bgcolor:O?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,D.jsxs)(u.Z,{sx:{flex:1},children:[(0,D.jsx)(p.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:w()(j.date).format("DD/MM/YYYY")}),(0,D.jsx)(p.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:j.time}),(0,D.jsx)(p.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:O?"white":"black"},children:j.venue})]}),(0,D.jsxs)(u.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,D.jsxs)(p.Z,{variant:"h5",sx:{alignSelf:"center",color:O?"white":"black"},children:["\u20b9",j.price]}),!P&&!R&&J&&(0,D.jsx)(m.Z,{variant:"outlined",onClick:async()=>{try{U(!0),(0,f.ET)((0,f.hJ)(S.db,v.Ul.BOOKINGS),{StudioId:j.StudioId,WorkshopId:j.id,UserId:J,bookingDate:Date.now()});const e=(0,f.JU)(S.db,"User",J),a=await(0,f.QT)(e);a.exists()&&null!=a.data()&&await(0,f.r7)(e,{BookedWorkshops:[...a.data().BookedWorkshops||[],j.id]}),A((e=>(0,l.Z)((0,l.Z)({},e),{},{BookedWorkshops:[...(null===e||void 0===e?void 0:e.BookedWorkshops)||[],j.id]}))),E("Workshop booked","success")}catch(e){console.error(e),E((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{U(!1)}},disabled:M||L,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:M?"Booked":"Book Now"})]})]}),!P&&!R&&J&&(0,D.jsx)(p.Z,{component:"p",variant:"caption",sx:{my:"2px",color:O?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,D.jsxs)(h.ZP,{item:!0,sx:{mt:1},children:[(0,D.jsxs)(u.Z,{sx:{display:"flex",columnGap:2},children:[(0,D.jsxs)(p.Z,{variant:"h5",component:"p",sx:{color:O?"white":"black"},children:[j.workshopName||"",j.danceStyles.map((e=>" | ".concat(e)))]}),(0,D.jsx)(N.Z,{shareUrl:F})]}),(0,D.jsxs)(p.Z,{variant:"body1",component:"p",sx:{mt:1,color:O?"white":"black"},children:[(0,D.jsxs)("span",{children:["By ",(null===(n=j.studioDetails)||void 0===n?void 0:n.studioName)||""]}),j.studioDetails&&(null===(s=j.studioDetails)||void 0===s?void 0:s.whatsappNumber)&&(0,D.jsx)(x.Z,{color:"success",size:"small",target:"_blank",href:"https://wa.me/91".concat(j.studioDetails.whatsappNumber,"?text=").concat(T),children:(0,D.jsx)("img",{src:I,alt:"Whatsapp call",style:{width:30,height:28}})}),j.studioDetails&&(null===(i=j.studioDetails)||void 0===i?void 0:i.mobileNumber)&&(0,D.jsx)(x.Z,{color:"primary",size:"small",target:"_blank",href:"tel:".concat(j.studioDetails.mobileNumber),children:(0,D.jsx)("img",{src:C,alt:"Phone call",style:{width:30,height:28}})})]}),(0,D.jsx)("div",{style:{color:O?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:j.description||"Workshop Description"}})]})]}),(0,D.jsxs)(u.Z,{sx:{mt:"1rem",textAlign:"right"},children:[P&&R&&(0,D.jsx)(m.Z,{onClick:()=>null!==j&&void 0!==j&&j.active?B(null===j||void 0===j?void 0:j.id):k(null===j||void 0===j?void 0:j.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==j&&void 0!==j&&j.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==j&&void 0!==j&&j.active?"Deactivate":"Activate"}),(0,D.jsx)(m.Z,{onClick:g,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function P(e){var a;let{actionsAllowed:o,dataItem:c,activateWorkshop:h,deactivateWorkshop:p}=e;const m=(0,b.v9)(y.w),[x,k]=(0,t.useState)(null),[w,f]=(0,t.useState)(!1),S=c.id;(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,j.Us)(v.Rb.WORKSHOPICON,S);k(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[c.id]);const Z={backgroundColor:m?"#444":"white",padding:"0px",color:m?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(n.Z,{variant:"solid",sx:(0,l.Z)((0,l.Z)({},Z),{},{"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"}),onClick:()=>f(!0),children:[(0,D.jsxs)(r.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,D.jsx)("img",{src:x,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,D.jsx)(g.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:c&&c.danceStyles?c.danceStyles.slice(0,3).map(((e,a)=>(0,D.jsx)(i.Z,{color:a%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},a))):(0,D.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,D.jsxs)(s.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,D.jsxs)(u.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:m?"white":"black",extDecoder:"one"},children:[(0,D.jsx)("span",{children:c&&c.workshopName?c.workshopName:""}),!(null!==c&&void 0!==c&&c.active)&&(0,D.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,D.jsxs)(d.ZP,{style:{color:m?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(a=c.studioDetails)&&void 0!==a&&a.studioName?c.studioDetails.studioName:""]}),(0,D.jsx)(d.ZP,{style:{marginTop:10,color:m?"white":"black"},level:"body-xs",noWrap:!0,children:c.venue?c.venue:""}),(0,D.jsxs)(d.ZP,{style:{color:m?"white":"black"},level:"body-xs",children:[c.date||""," | ",c.time||""]})]})]}),(0,D.jsx)(B,{dataItem:(0,l.Z)((0,l.Z)({},c),{},{imageUrl:x}),open:w,handleClose:()=>f(!1),activateWorkshop:h,deactivateWorkshop:p,actionsAllowed:o})]})}const E=e=>{let{actionsAllowed:a,dataList:o,activateWorkshop:t,deactivateWorkshop:l}=e;return(0,D.jsx)("div",{className:"horizontal-scroll-wrapper",children:o.map(((e,o)=>(0,D.jsx)(P,{dataItem:e,activateWorkshop:t,deactivateWorkshop:l,actionsAllowed:a},e.id)))})}},77472:(e,a,o)=>{o.r(a),o.d(a,{default:()=>H});var t=o(1413),l=o(72791),r=o(10159),n=o(12481),s=o(83708),i=o(59434),d=o(60717),c=o(61224),u=o(43896),h=o(83449),p=o(47283),m=o(82851),x=o(16029),g=o(95313),b=o(89743),v=o(2677),j=o(94294),y=o(57482),k=o(81018),w=o(51650),f=o(5712),S=o(76989),Z=o(67107),I=o(44507),C=o(4708),N=o(63237),D=o(4560),B=o(24750),P=o(71652),E=o(97892),O=o.n(E),L=o(26073),U=o(75424),W=(o(82873),o(18406)),A=o(66770),J=o.n(A),R=(o(86009),o(763)),T=o(80184);const M=function(e){let{instructors:a,studioId:o,setWorkshop:c}=e;const u=(0,U.D)(),[h,p]=(0,l.useState)(""),m=(0,i.v9)(d.w),[x,E]=(0,l.useState)([]),[A,M]=(0,l.useState)([]),F=a.map((e=>"".concat(e.name," - ").concat(e.id))),K=w.W,[H,z]=(localStorage.getItem("filterLocation"),(0,l.useState)(!1)),[Y,G]=(0,l.useState)(""),[V,q]=(0,l.useState)(null),[_,Q]=(0,l.useState)(""),[$,X]=(0,l.useState)(""),[ee,ae]=(0,l.useState)(O()(new Date)),[oe,te]=(0,l.useState)(!1),[le,re]=(0,l.useState)(""),[ne,se]=(0,l.useState)(1),ie=(0,Z.Z)({palette:{mode:m?"dark":"light"}}),de=e=>{e.reset(),M([]),E([]),q(null),G(""),Q(""),X(""),ae(O()(new Date)),re("")};return(0,l.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const g=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),b=await(0,n.PL)(g);if(b.empty){var l,i,d,c,u,h,p;await(0,n.ET)((0,n.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),{workshopName:(null===(l=e.workshopName)||void 0===l?void 0:l.value)||"",price:(null===(i=e.workshopFees)||void 0===i?void 0:i.value)||0,description:le,danceStyles:A,instructors:x?null===x||void 0===x||null===(d=x.map)||void 0===d?void 0:d.call(x,(e=>{var a,o,t,l;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(o=a.call(e,"-"))||void 0===o||null===(t=o[1])||void 0===t||null===(l=t.trim)||void 0===l?void 0:l.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:V&&(null===V||void 0===V||null===(c=V.split)||void 0===c||null===(u=c.call(V,":"))||void 0===u||null===(h=u[1])||void 0===h||null===(p=h.trim)||void 0===p?void 0:p.call(h))||null,duration:Y,level:_,time:$,date:ee.format("YYYY-MM-DD")})}else{var m;let l=[];b.forEach((e=>{l.push((0,t.Z)({id:e.id},e.data()))}));let r=l[0];e.workshopName.value=(null===r||void 0===r?void 0:r.workshopName)||"",e.workshopFees.value=(null===r||void 0===r?void 0:r.price)||0,e.capacity.value=(null===r||void 0===r?void 0:r.capacity)||0,re((null===r||void 0===r?void 0:r.description)||""),M(null!==r&&void 0!==r&&null!==(m=r.danceStyles)&&void 0!==m&&m.length?r.danceStyles:[]),E(a.filter((e=>null===r||void 0===r?void 0:r.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id))));const n=o.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===r||void 0===r?void 0:r.StudioId)));n>0&&q(o[n]),G((null===r||void 0===r?void 0:r.duration)||""),Q((null===r||void 0===r?void 0:r.level)||""),X((null===r||void 0===r?void 0:r.time)||""),ae(O()((null===r||void 0===r?void 0:r.date)||Date.now()))}z(!0)}catch(g){console.error(g)}}()}),[]),(0,l.useEffect)((()=>{let e=null,a=null;return H&&async function(){const o=document.getElementById("addStudioForm");try{const l=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),i=await(0,n.PL)(l);if(!i.empty){let l=[];i.forEach((e=>{l.push((0,t.Z)({id:e.id},e.data()))}));let d=l[0];const c=(0,n.JU)(r.db,s.i0.DRAFT_WORKSHOPS,d.id);e=setInterval((async()=>{try{var e,t,l,r,s,i,d;const h={workshopName:(null===(e=o.workshopName)||void 0===e?void 0:e.value)||"",price:(null===(t=o.workshopFees)||void 0===t?void 0:t.value)||0,description:le,danceStyles:A,instructors:x?null===x||void 0===x||null===(l=x.map)||void 0===l?void 0:l.call(x,(e=>{var a,o,t,l;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(o=a.call(e,"-"))||void 0===o||null===(t=o[1])||void 0===t||null===(l=t.trim)||void 0===l?void 0:l.call(t))||null})):null,StudioId:V&&(null===V||void 0===V||null===(r=V.split)||void 0===r||null===(s=r.call(V,":"))||void 0===s||null===(i=s[1])||void 0===i||null===(d=i.trim)||void 0===d?void 0:d.call(i))||null,duration:Y,level:_,time:$,date:ee.format("YYYY-MM-DD")};if((0,R.isEqual)(a,h))console.log("Nothing for Autosave to save");else try{await(0,n.r7)(c,h),a=h,console.log("Next AutoSave in",1e4)}catch(u){console.error(u)}}catch(u){console.error(u)}}),1e4)}}catch(l){console.error(l)}}(),()=>clearInterval(e)}),[H,A,x,le,V,Y,_,$,ee]),(0,l.useEffect)((()=>{if(m){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[m]),(0,T.jsxs)("div",{children:[1===ne&&(0,T.jsx)(g.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if((e=>{let a=!0;return e.workshopName.value&&e.workshopFees.value&&null!==A&&void 0!==A&&A.length&&null!==x&&void 0!==x&&x.length&&le&&V&&Y&&_&&$&&ee||(a=!1),a})(a))try{var o,l,i,d,h;const m=JSON.parse(localStorage.getItem("userInfo")).email,g={workshopName:e.target.workshopName.value,danceStyles:A,instructors:x?null===x||void 0===x||null===(o=x.map)||void 0===o?void 0:o.call(x,(e=>{var a,o,t,l;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(o=a.call(e,"-"))||void 0===o||null===(t=o[1])||void 0===t||null===(l=t.trim)||void 0===l?void 0:l.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:m,StudioId:V&&(null===V||void 0===V||null===(l=V.split)||void 0===l||null===(i=l.call(V,":"))||void 0===i||null===(d=i[1])||void 0===d||null===(h=d.trim)||void 0===h?void 0:h.call(d))||null,duration:Y,level:_,time:$,description:le,date:ee.format("YYYY-MM-DD"),price:e.target.workshopFees.value,capacity:e.target.capacity.value,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};te(!0);const b=m,v={entity_name:g.workshopName,time:g.time,date:g.date,StudioId:g.StudioId},j=await(0,W.qC)(g,s.Ul.WORKSHOPS,b,v);if(j.ok){const e=await j.json();p(e.id),c((a=>[...a,(0,t.Z)({id:e.id},g)])),de(a),(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.i0.DRAFT_WORKSHOPS),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=await(0,n.PL)(e);if(!a.empty){let e=[];a.forEach((a=>{e.push((0,t.Z)({id:a.id},a.data()))}));let o=e[0];const l=(0,n.JU)(r.db,s.i0.DRAFT_WORKSHOPS,o.id);await(0,n.oe)(l)}})(),u("Workshop successfully added.","success"),se((e=>e+1))}}catch(m){console.error("Error adding workshop: ",m),u((null===m||void 0===m?void 0:m.message)||"Something went wrong","error")}finally{te(!1)}else u("Please fill all the fields.","error")},style:{backgroundColor:m?"#202020":"",color:m?"white":"black"},children:(0,T.jsx)(g.Z.Group,{controlId:"formBasicAdd",children:(0,T.jsxs)("div",{children:[(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Workshop Name"}),(0,T.jsx)(g.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Dance Styles"}),(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:K,value:A,onChange:(e,a)=>{M(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Names of Instructors"}),(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},multiple:!0,id:"tags-standard",options:F,value:x,onChange:(e,a)=>{E(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Duration (in hours)"}),(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:Y,onChange:(e,a)=>{G(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Duration",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(v.Z,{md:6,children:(0,T.jsx)(L.Z,{defaultTime:$||"00:00-00:00",handleSelect:(e,a)=>{const[o,t]=$.split(" - ");let l="".concat(o," - ").concat(t);null!==e&&(l="".concat(e," - ").concat(t)),null!==a&&(l="".concat(o," - ").concat(a)),X(l)}})}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Date"}),(0,T.jsx)(P._,{dateAdapter:B.y,children:(0,T.jsx)(D.C,{components:["DatePicker"],children:(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(N.M,{sx:{width:"100%"},value:ee,onChange:e=>ae(e)})]})})})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Level"}),(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:_,onChange:(e,a)=>{Q(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Fees/Price"}),(0,T.jsx)(g.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Maximum capacity"}),(0,T.jsx)(g.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Studio"}),(0,T.jsxs)(I.Z,{theme:ie,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},id:"tags-standard",options:o,value:V,onChange:(e,a)=>{q(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:m?"#333333":"",color:m?"white":"black"}}))})]})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Youtube video link"}),(0,T.jsx)(g.Z.Control,{rows:1,style:{backgroundColor:m?"#333333":"",color:m?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Brief Description"}),(0,T.jsx)(J(),{theme:"snow",placeholder:"Enter Description",value:le,onChange:re})]})]}),(0,T.jsx)("hr",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(v.Z,{xs:6}),(0,T.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,T.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},type:"submit",disabled:oe,children:"Next"})})]})]})})}),oe&&(0,T.jsx)(y.Z,{}),2===ne&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{children:(0,T.jsx)(v.Z,{children:(0,T.jsx)(k.Z,{entityId:h,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})})}),(0,T.jsx)(b.Z,{style:{margin:"1rem 0"},children:(0,T.jsx)(v.Z,{style:{textAlign:"right"},children:(0,T.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:m?"#892cdc":"black"},onClick:()=>se((e=>e-1)),children:"Done"})})})]})]})};const F=function(e){let{workshopId:a,instructors:o,studioId:c}=e;localStorage.getItem("filterLocation");const u=(0,U.D)(),[h,p]=(0,l.useState)(null),[m,x]=(0,l.useState)([]),E=w.W,[A,R]=(0,l.useState)([]),M=(0,i.v9)(d.w),[F,K]=(0,l.useState)(""),[H,z]=(0,l.useState)(""),[Y,G]=(0,l.useState)(""),[V,q]=(0,l.useState)(""),[_,Q]=(0,l.useState)(O()(new Date)),[$,X]=(0,l.useState)(!1),ee=o.map((e=>"".concat(e.name," - ").concat(e.id))),ae=(0,Z.Z)({palette:{mode:M?"dark":"light"}}),[oe,te]=(0,l.useState)(""),[le,re]=(0,l.useState)(null),ne=e=>{e.reset(),R([]),x([]),p(null),K(""),z(""),q(""),Q(O()(new Date)),re(null),te(""),G("")};return(0,l.useEffect)((()=>{if(le){const e=o.filter((e=>le.instructors.includes(e.id))).map((e=>"".concat(e.name," - ").concat(e.id)));if(x(e),le&&le.danceStyles&&R(le.danceStyles),le&&le.duration&&K(le.duration),le&&le.level&&z(le.level),le&&le.time&&q(le.time),le&&le.date&&Q(O()(le.date)),le&&le.StudioId){const e=c.map((e=>e.split(":")[1].trim())).findIndex((e=>e===le.StudioId));p(c[e]||null)}G((null===le||void 0===le?void 0:le.description)||"")}}),[le]),(0,l.useEffect)((()=>{if(M){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[M]),(0,T.jsxs)("div",{style:{backgroundColor:M?"#202020":"",color:M?"white":"black"},children:[(0,T.jsx)("br",{}),(0,T.jsxs)(g.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if(oe)if((e=>{let a=!0;return e.workshopName.value&&e.workshopFees.value&&e.capacity.value&&Y&&null!==A&&void 0!==A&&A.length&&null!==m&&void 0!==m&&m.length&&h&&F&&H&&V&&_||(a=!1),a})(a)){try{var o,t,l,r,n;const e={workshopName:a.workshopName.value,price:a.workshopFees.value,capacity:a.capacity.value,description:Y,danceStyles:A,instructors:m?null===m||void 0===m||null===(o=m.map)||void 0===o?void 0:o.call(m,(e=>{var a,o,t,l;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(o=a.call(e,"-"))||void 0===o||null===(t=o[1])||void 0===t||null===(l=t.trim)||void 0===l?void 0:l.call(t))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(t=h.split)||void 0===t||null===(l=t.call(h,":"))||void 0===l||null===(r=l[1])||void 0===r||null===(n=r.trim)||void 0===n?void 0:n.call(r))||null,duration:F,level:H,time:V,date:_.format("YYYY-MM-DD"),youtubeViedoLink:a.youtubeViedoLink.value};console.log(e),X(!0);const i=await(0,W.fP)(e,s.Ul.WORKSHOPS,oe);i.ok?(ne(a),u("Workshop successfully updated.","success")):u("Error ".concat(i,"."),"error")}catch(i){console.error("Error updating workshop: ",i),u((null===i||void 0===i?void 0:i.message)||"Something went wrong","error")}finally{X(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:[(0,T.jsxs)(g.Z.Group,{controlId:"formBasicUpdate",children:[(0,T.jsx)(g.Z.Label,{children:"Id"}),(0,T.jsxs)(g.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:M?"#333333":"",color:M?"white":"black",height:"auto"},onChange:async e=>{e.preventDefault();const a=e.target.value.split(":").pop().trim();te(a);try{const e=await(0,n.QT)((0,n.JU)(r.db,s.Ul.WORKSHOPS,a));e.exists?re(e.data()):re(null)}catch(o){console.error("Error fetching workshop data:",o,a)}},children:[(0,T.jsx)("option",{value:"",children:"Select a workshop..."}),a&&a.length>0?a.map((e=>(0,T.jsx)("option",{value:e,children:e},e))):(0,T.jsx)("option",{value:"",children:"No workshop yet!"})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(v.Z,{md:6,children:(0,T.jsx)(k.Z,{entityId:oe,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)("br",{}),(0,T.jsx)(g.Z.Label,{children:"Workshop Name"}),(0,T.jsx)(g.Z.Control,{rows:1,defaultValue:le?le.workshopName:"",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"}),(0,T.jsx)("br",{}),(0,T.jsx)(g.Z.Label,{children:"Dance Styles"}),(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},multiple:!0,id:"tags-standard",options:E,value:A,onChange:(e,a)=>{R(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"}}))})]}),(0,T.jsx)("br",{}),(0,T.jsx)(g.Z.Label,{children:"Names of Instructors"}),(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},multiple:!0,id:"tags-standard",options:ee,value:m,onChange:(e,a)=>{x(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"}}))})]})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Duration (in hours)"}),(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:F,onChange:(e,a)=>{K(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Duration",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"}}))})]})]}),(0,T.jsx)(v.Z,{md:6,children:(0,T.jsx)(L.Z,{defaultTime:V||"00:00-00:00",handleSelect:(e,a)=>{const[o,t]=V.split(" - ");let l="".concat(o," - ").concat(t);null!==e&&(l="".concat(e," - ").concat(t)),null!==a&&(l="".concat(o," - ").concat(a)),q(l)}})})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Date"}),(0,T.jsx)(P._,{dateAdapter:B.y,children:(0,T.jsx)(D.C,{components:["DatePicker"],children:(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(N.M,{sx:{width:"100%"},value:_,onChange:e=>Q(e)})]})})})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Level"}),(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:H,onChange:(e,a)=>{z(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Level",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"}}))})]})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Fees/Price"}),(0,T.jsx)(g.Z.Control,{rows:1,defaultValue:le?le.price:"",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Maximum capacity"}),(0,T.jsx)(g.Z.Control,{rows:1,defaultValue:le&&void 0!==le.capacity?le.capacity:"",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Studio"}),(0,T.jsxs)(I.Z,{theme:ae,children:[(0,T.jsx)(C.ZP,{}),(0,T.jsx)(f.Z,{style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},id:"tags-standard",options:c,value:h,onChange:(e,a)=>{p(a)},renderInput:e=>(0,T.jsx)(S.Z,(0,t.Z)((0,t.Z)({},e),{},{variant:"standard",placeholder:"Select Studio",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"}}))})]})]}),(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Youtube video Link"}),(0,T.jsx)(g.Z.Control,{rows:1,defaultValue:le?le.youtubeViedoLink:"",style:{backgroundColor:M?"#333333":"",color:M?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})]}),(0,T.jsx)("br",{}),(0,T.jsx)(b.Z,{children:(0,T.jsxs)(v.Z,{md:6,children:[(0,T.jsx)(g.Z.Label,{children:"Brief Description"}),(0,T.jsx)(J(),{theme:"snow",placeholder:"Enter Description",value:Y,onChange:G})]})}),(0,T.jsx)("hr",{}),(0,T.jsxs)(b.Z,{children:[(0,T.jsx)(v.Z,{xs:6}),(0,T.jsx)(v.Z,{xs:6,className:"d-flex justify-content-end",children:(0,T.jsx)(j.Z,{variant:"contained",style:{color:"white",backgroundColor:M?"#892cdc":"black"},type:"submit",disabled:$,children:"Update Workshop"})})]})]})]}),$&&(0,T.jsx)(y.Z,{})]})]})};var K=o(76785);const H=function(){const[e,a]=(0,l.useState)([]),[o,g]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),j=(0,i.v9)(d.w),[y,k]=(0,l.useState)([]),[w,f]=(0,l.useState)(!1),[S,Z]=(0,l.useState)(-1),{currentUser:I}=(0,c.a)(),[C,N]=l.useState("1");return(0,l.useEffect)((()=>{(async e=>{try{const e=(0,n.JU)(r.db,"User",I.uid),a=await(0,n.QT)(e);a.exists()&&null!=a.data()&&(f(a.data().CreatorMode),Z(a.data().isPremium))}catch(a){console.log(" error")}})()}),[w]),(0,l.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const a=(0,n.hJ)(r.db,s.Ul.INSTRUCTORS),o=(0,n.IO)(a,(0,n.ar)("createdBy","==",e)),t=await(0,n.PL)(o),l=[];t.forEach((e=>{l.push({id:e.id,name:e.data().name})})),k(l)})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.Ul.STUDIO),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),o=(await(0,n.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const a=e.data();return(0,t.Z)({id:e.id},a)}));a(o.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,l.useEffect)((()=>{(async()=>{const e=(0,n.IO)((0,n.hJ)(r.db,s.Ul.WORKSHOPS),(0,n.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=(await(0,n.PL)(e)).docs.filter((e=>e.data().workshopName)).map((e=>{const a=e.data();return(0,t.Z)({id:e.id},a)})).map((async e=>{const a=(0,n.JU)(r.db,s.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),o=await(0,n.QT)(a);return(0,t.Z)((0,t.Z)({},e),{},{studioDetails:o.data()})})),o=await Promise.all(a);localStorage.setItem("WorkshopCreated",JSON.stringify(o)),g(o),v(o.map((e=>String(e.workshopName)+" :"+String(e.id))))})()}),[g]),(0,l.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("WorkshopCreated"))||[];g(e);const a=e.map((e=>"".concat(e.workshopName," : ").concat(e.id)));v(a)}),[v]),(0,T.jsxs)("div",{children:[(0,T.jsx)("br",{}),w?(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(x.Z,{sx:{width:"100%",typography:"body1"},children:(0,T.jsxs)(h.ZP,{value:C,children:[(0,T.jsx)(x.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,T.jsxs)(p.Z,{style:{color:j?"white":"black"},onChange:(e,a)=>{N(a)},"aria-label":"lab API tabs example",children:[(0,T.jsx)(u.Z,{style:{color:j?"white":"black"},label:"Add Workshop",value:"1"}),(0,T.jsx)(u.Z,{style:{color:j?"white":"black"},label:"Update Workshop",value:"2"})]})}),(0,T.jsx)(m.Z,{value:"1",children:(0,T.jsx)(M,{instructors:y,studioId:e,setWorkshop:g})}),(0,T.jsx)(m.Z,{value:"2",children:(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(F,{instructors:y,workshopId:b,studioId:e})})})]})})}):"",o.length>0&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("h3",{style:{color:j?"white":"black"},children:"Your Workshops"}),(0,T.jsx)(K.Z,{dataList:o,activateWorkshop:async e=>{try{const a=(0,n.JU)(r.db,s.Ul.WORKSHOPS,e);await(0,n.r7)(a,{active:!0}),g((a=>a.map((a=>a.id===e?(0,t.Z)((0,t.Z)({},a),{},{active:!0}):a))))}catch(a){console.error(a)}},deactivateWorkshop:async e=>{try{const a=(0,n.JU)(r.db,s.Ul.WORKSHOPS,e);await(0,n.r7)(a,{active:!1}),g((a=>a.map((a=>a.id===e?(0,t.Z)((0,t.Z)({},a),{},{active:!1}):a))))}catch(a){console.error(a)}},actionsAllowed:!0})]})]})}},18406:(e,a,o)=>{o.d(a,{C9:()=>n,P9:()=>s,fP:()=>r,ie:()=>i,qC:()=>l});var t=o(83708);async function l(e,a,o,l){const r=t.A3,n=localStorage.getItem("authToken");try{const t=await fetch(r+"crud/newEntity/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({data:e,collection_name:a,notify:o,metadata:l})});if(!t.ok)throw console.log("Error in postData:",t),new Error("HTTP error! status: ".concat(t.status));return t}catch(s){throw console.error("Error in postData:",s),s}}async function r(e,a,o){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=t.A3,s="crud/updateEntity/".concat(o),i=localStorage.getItem("authToken");try{const o=await fetch(n+s,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({data:e,collection_name:a,notify:l,metadata:r})});if(!o.ok)throw console.log("Error in postData:",o),new Error("HTTP error! status: ".concat(o.status));return o}catch(d){throw console.error("Error in postData:",d),d}}const n=async e=>{const a="".concat(t.uM.CLOUD,"bookings/bookEntity/");try{const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,entityType:e.entityType,entityId:e.entityId,associatedStudioId:e.associatedStudioId,emailLearner:e.emailLearner,personsAllowed:e.personsAllowed,pricePerPerson:e.pricePerPerson})}),t=await o.json();return o.ok?(console.log("Booking successful:",t),t):(console.error("Booking failed:",t),t)}catch(o){return console.error("Error occurred while booking:",o),null}},s=e=>{if(console.log("MediaDisplay",e),!e)return null;const a=e.trim().match(/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([\w\-]+)/);let o=null;return a&&(o=a[1]),console.log("MediaDisplay",o),o},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[a,o,t]=e.split("-");return"".concat((e=>{const a=e%10,o=1===a&&"11"!==e?"st":2===a&&"12"!==e?"nd":3===a&&"13"!==e?"rd":"th";return"".concat(e).concat(o)})(t)," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(o)-1],", ").concat(a)}},11518:()=>{},10884:(e,a,o)=>{e.exports=o.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,a,o)=>{e.exports=o.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},82873:e=>{e.exports=JSON.parse('{"c":["Agra","Ahmedabad","Ajmer","Alappuzha","Allahabad","Ambattur","Ambernath","Amritsar","Anantapur","Arrah","Aurangabad","Avadi","Bahadurgarh","Bahraich","Ballia","Bengaluru","Baranagar","Barasat","Bareilly","Barasat","Bathinda","Begusarai","Belgaum","Bellary","Berhampur","Bettiah","Bharatpur","Bharuch","Bhilai","Bhilwara","Bhimavaram","Bhiwani","Bhopal","Bhubaneswar","Bhuj","Bhusawal","Bidar","Bihar Sharif","Bilaspur","Bilimora","Bongaigaon","Bongaigaon","Bulandshahr","Buxar","Chandannagar","Chandigarh","Chandausi","Chapra","Chennai","Chikmagalur","Chittorgarh","Coimbatore","Cuttack","Darbhanga","Dehradun","Deoghar","Dewas","Dhanbad","Dhule","Dimapur","Dindigul","Durg","Eluru","Erode","Etawah","Faridabad","Farrukhabad","Gandhinagar","Gangapur","Gaya","Giridih","Godhra","Gopalpur","Gorakhpur","Guntakal","Guntur","Gurugram","Guwahati","Haldia","Hapur","Haridwar","Hazaribagh","Hindupur","Hisar","Hosur","Howrah","Hubballi","Hyderabad","Ichalkaranji","Imphal","Indore","Jabalpur","Jaipur","Jalandhar","Jalna","Jalgaon","Jammu","Jamnagar","Jamshedpur","Jaunpur","Jhansi","Jodhpur","Junagadh","Kadapa","Kakinada","Kalyan","Kamarhati","Kanpur","Karimnagar","Karnal","Katihar","Khammam","Khanna","Kharagpur","Kochi","Kolhapur","Kolkata","Kollam","Korba","Kota","Kottayam","Kozhikode","Krishnanagar","Kulti","Kumbakonam","Lakhimpur","Latur","Lucknow","Ludhiana","Madhyamgram","Madurai","Maheshtala","Malegaon","Malerkotla","Mango","Mathura","Meerut","Mirzapur","Moradabad","Morvi","Mumbai","Muzaffarnagar","Muzaffarpur","Mysore","Nabadwip","Nagaur","Nagpur","Naihati","Nalgonda","Nanded","Nashik","Navi Mumbai","Nellore","New Delhi","Nizamabad","North Dumdum","Orai","Ozhukarai","Pali","Pallavaram","Panihati","Panipat","Panvel","Parbhani","Patiala","Patna","Pimpri-Chinchwad","Puducherry","Pune","Purnia","Purulia","Raebareli","Raichur","Raiganj","Rajahmundry","Rajkot","Rajpur Sonarpur","Rampur","Ranchi","Ratlam","Raurkela","Rewa","Rohtak","Rourkela","Sagar","Saharanpur","Salem","Sangli","Sangli-Miraj & Kupwad","Satara","Satna","Secunderabad","Serampore","Shahjahanpur","Shimla","Shimoga","Shivpuri","Sikar","Siliguri","Singrauli","South Dumdum","Srikakulam","Srinagar","Sultanpur","Surendranagar","Surat","Thane","Thiruvananthapuram","Thrissur","Tiruchirappalli","Tirunelveli","Tirupati","Tiruvottiyur","Tumkur","Udaipur","Udupi","Unnao","Vadodara","Vapi","Varanasi","Vasai-Virar","Vellore","Vijayawada","Visakhapatnam","Warangal","Yamunanagar"]}')},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=7472.c57173e0.chunk.js.map