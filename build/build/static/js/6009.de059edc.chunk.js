"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[6009],{16009:(e,o,t)=>{t.r(o),t.d(o,{default:()=>w});var s=t(72791),n=t(697),r=t(13239),a=t(61889),i=t(57689),l=t(59434),c=t(83708),d=t(68449),p=t(60717),u=t(75424),h=t(18406),g=t(46022),S=t(52039),m=t(37404),y=t(39645),x=t(80184);const w=function(){var e,o;const{openClassId:t}=(0,i.UO)();console.log("From OpenClassFullPage,",t);const w=(0,i.s0)(),I=(0,u.D)(),f=(0,l.v9)(p.w),[C,k]=(0,s.useState)(null),[P,j]=(0,s.useState)(null),[b,v]=(0,s.useState)(1),O=null===(e=JSON.parse(localStorage.getItem("userInfo")))||void 0===e?void 0:e.UserId,Z=null===(o=JSON.parse(localStorage.getItem("userInfo")))||void 0===o?void 0:o.email,A=P&&b?0*b:0;if((0,s.useEffect)((()=>{t&&((async()=>{try{const e=await(0,d.Ld)(c.Ul.OPEN_CLASSES,t);if(j(e),e&&e.StudioId){const o=await(0,d.Ld)(c.Ul.STUDIO,e.StudioId);j((e=>({...e,studioDetails:o})))}}catch(e){console.error("Error fetching workshop data:",e),I("Failed to load workshop details.","error")}})(),(async()=>{try{const e=await(0,d.Us)(c.Rb.OPENCLASSICON,t);k(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e),k("https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}})())}),[t,I]),!P)return(0,x.jsx)(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,x.jsx)(r.Z,{color:"primary"})});const E=encodeURIComponent("Hey, I found your Open Class on nritya.co.in. I'm interested");return(0,x.jsx)(n.Z,{sx:{padding:"0rem",minHeight:"100vh",color:f?"white":"black"},children:(0,x.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,x.jsx)(a.ZP,{item:!0,xs:12,lg:8,children:(0,x.jsx)(g.Z,{youtubeViedoLink:P.youtubeViedoLink,imageUrl:C,altText:P.openClassName})}),(0,x.jsx)(a.ZP,{item:!0,xs:12,lg:4,children:(0,x.jsx)(m.Z,{dataItem:P,personsAllowed:b,setPersonsAllowed:v,totalPrice:A,handleBook:async()=>{if(!O)return I("Please login to book","warning"),void w("/login");try{const e={userId:O,entityType:c.Ul.OPEN_CLASSES,openClassId:t,associatedStudioId:P.StudioId,emailLearner:Z,personsAllowed:b,pricePerPerson:P.price,internetConvCharges:50,totalPrice:A},o=await(0,h.C9)(e);if(o&&200===o.nSuccessCode)I("Workshop booked","success");else if(o&&205===o.nSuccessCode){const e=o.bookedAt,t=new Date(1e3*e).toLocaleString();I(`Workshop already booked at ${t}`,"info")}else{const e=o?`Error: ${JSON.stringify(o)}`:"An unknown error occurred.";I(e,"error")}}catch(e){console.error(e),I((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}},entityType:c.Ul.OPEN_CLASSES})}),(0,x.jsx)(a.ZP,{item:!0,xs:12,lg:8,children:(0,x.jsx)(S.Z,{dataItem:P,whatsappMessage:E})}),(0,x.jsx)(a.ZP,{item:!0,xs:12,lg:4,children:(0,x.jsx)(y.Z,{dataItem:P})})]})})}}}]);
//# sourceMappingURL=6009.de059edc.chunk.js.map