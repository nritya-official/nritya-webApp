"use strict";(self.webpackChunknritya_webApp=self.webpackChunknritya_webApp||[]).push([[4802],{81018:(e,a,l)=>{l.d(a,{Z:()=>j});var o=l(72791),t=l(6429),r=l.n(t),s=l(30276),i=l(10159),n=l(59434),d=l(60717),c=l(68449),u=l(57621),h=l(13400),p=l(39504),m=l(27247),x=l(75424),g=l(83708),b=l(80184);const v=e=>{let{entityId:a,storageFolder:l,title:t,maxImageCount:v=10,updateMode:j,disable:y}=e;(0,x.D)();const[k,w]=(0,o.useState)([]),[S,f]=(0,o.useState)([]),[Z,C]=(0,o.useState)([]),[I,N]=(0,o.useState)([]),D=(0,n.v9)(d.w),[B,P]=(0,o.useState)(-1),[O,E]=(0,o.useState)(-1);console.log("Kyc enitity id ",a,y);const L=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const l=a<0?0:a,o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]};(0,o.useEffect)((()=>{a&&W(a)}),[a]),(0,o.useEffect)((()=>{if(v&&k.length>v){const e=k.slice(0,v);alert(`Exceeded maxImageCount, keeping first ${v} files.`),w(e)}}),[k,v]);const U=(e,a)=>{const l=e.map((e=>e.id)),o=a.map((e=>e.id));return{imagesToDelete:a.filter((e=>!l.includes(e.id))),newImages:e.filter((e=>!o.includes(e.id)))}},W=async e=>{w([]),C([]),N([]);try{const a=`${l}/${e}`;console.log(a);const o=(0,s.iH)(i.tO,a),t=await(0,s.aF)(o),r=await Promise.all(t.items.map((async e=>{const a=await(0,s.Jt)(e);return{id:e.name,filename:e.name,fileURL:a}})));f(r),w(r)}catch(a){console.error("Error fetching user images:",a)}};return(0,b.jsx)("div",{className:"fileupload-view",style:{display:"flex",width:"100%",justifyContent:"center"},children:(0,b.jsx)("div",{className:"row justify-content-center m-0",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"col-md-6",style:{flex:"1",justifyContent:"center"},children:(0,b.jsx)("div",{className:"card mt-5",children:(0,b.jsxs)("div",{className:"card-body",style:{backgroundColor:D?"#333333":"white"},children:[(0,b.jsxs)("div",{className:"kb-data-box",children:[(0,b.jsx)("div",{className:"kb-modal-data-title",children:(0,b.jsxs)("div",{className:"kb-data-title",style:{justifyContent:"center",flex:"1"},children:[(0,b.jsx)("h4",{children:t}),(0,b.jsxs)("p",{children:["Max no of image(s):",v," ",l===g.Rb.STUDIOIMAGES&&(0,b.jsx)("p",{children:"Add at least 5 images"})]})]})}),(0,b.jsxs)("form",{style:{backgroundColor:D?"#333333":"white"},children:[(0,b.jsx)("div",{className:"kb-file-upload",children:(0,b.jsx)("div",{className:"file-upload-box",children:(0,b.jsx)("input",{type:"file",id:"fileupload",className:"file-upload-input",onChange:e=>{const a=Array.from(e.target.files),l=[];a.forEach((e=>{const o=new FileReader;o.onloadend=()=>{l.push({id:r().generate(),filename:e.name,filetype:e.type,fileimage:o.result,datetime:e.lastModifiedDate.toLocaleString("en-IN"),filesize:L(e.size),file:e}),l.length===a.length&&(w((e=>[...e,...l])),C(l))},o.readAsDataURL(e)}))},multiple:!0})})}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"kb-attach-box mb-3",children:(0,b.jsx)("div",{className:"row",children:a&&k.length>0?k.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",style:{position:"relative"},children:(0,b.jsx)(u.Z,{sx:{maxWidth:345},children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)("img",{src:e.fileimage?e.fileimage:e.fileURL,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}),(0,b.jsx)(h.Z,{"aria-label":"delete",disabled:y,onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this image?")){const a=k.find((a=>a.id===e));N((e=>[...e,a])),w((a=>a.filter((a=>a.id!==e))))}})(e.id),style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:(0,b.jsx)(m.Z,{style:{color:"ff0000"}})})]}):(0,b.jsx)(p.Z,{children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id))):(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("p",{children:"No images selected"})})})}),(0,b.jsx)("div",{className:"kb-buttons-box",children:(0,b.jsx)("button",{type:"button",className:"btn form-submit",style:{backgroundColor:D?"#892CDC":"black",color:"white"},onClick:async()=>{if(a)try{if(1===v)await(0,c.ih)(l,a),await(0,c.eg)(l,Z,a);else{const{imagesToDelete:e,newImages:o}=U(k,S);e.length>0&&await(0,c.xR)(l,e,a,P),o.length>0&&await(0,c.eg)(l,o,a,E)}}catch(e){console.error("Error uploading/deleting images:",e)}else alert("No studio selected")},disabled:y,children:"Image Upload"})})]}),k.length>0&&(0,b.jsx)("div",{className:"kb-attach-box",hidden:!0,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("hr",{}),k.map((e=>(0,b.jsx)("div",{className:"col-6 col-md-3 mb-3",children:(0,b.jsx)("div",{className:"card",children:e.filename.match(/\.(jpg|jpeg|png|gif|svg)$/i)?(0,b.jsx)("img",{src:e.fileimage,alt:e.filename,className:"card-img-top",style:{maxHeight:"150px",objectFit:"cover"}}):(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("i",{className:"far fa-file-alt"})})})},e.id)))]})})]}),B>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Deleting images... ",B.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:B,max:"100",style:{color:D?"#fff":"#000"},children:[B.toFixed(2),"%"]})]}),O>=0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{style:{color:D?"#fff":"#000"},children:["Uploading images... ",O.toFixed(2),"%"]}),(0,b.jsxs)("progress",{value:O,max:"100",style:{color:D?"#fff":"#000"},children:[O.toFixed(2),"%"]})]})]})})})})})};v.defaultProps={maxImageCount:5,updateMode:!1,disable:!1};const j=v},26073:(e,a,l)=>{l.d(a,{Z:()=>d});l(72791);var o=l(89743),t=l(2677),r=l(95313),s=l(59434),i=l(60717),n=l(80184);const d=e=>{var a;let{defaultTime:l,handleSelect:d}=e;const c=l.split("-")[0].trim(),u=null===(a=l.split("-")[1])||void 0===a?void 0:a.trim(),h=(0,s.v9)(i.w),p=e=>{const a=(()=>{const e=[];let a=[],l=[];for(let o=0;o<24;o++)for(let e=0;e<60;e+=30){const t=o.toString().padStart(2,"0"),r=e.toString().padStart(2,"0"),s=`${t}:${r}`;if(o<12)a.push(`${s} AM`);else{const e=(o-12).toString().padStart(2,"0");l.push(`${e}:${r} PM`)}}for(let o=0;o<a.length||o<l.length;o++)o<a.length&&e.push(a[o]),o<l.length&&e.push(l[o]);return e})();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("option",{value:e,children:e}),a.map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]})};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(t.Z,{children:(0,n.jsxs)(r.Z.Group,{children:[(0,n.jsx)(r.Z.Label,{children:"Start Time"}),(0,n.jsx)(r.Z.Control,{as:"select",onChange:e=>d(e.target.value,null),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(c)})]})}),(0,n.jsx)(t.Z,{children:(0,n.jsxs)(r.Z.Group,{children:[(0,n.jsx)(r.Z.Label,{children:"End Time"}),(0,n.jsx)(r.Z.Control,{as:"select",onChange:e=>d(null,e.target.value),style:{background:"transparent",borderWidth:1,borderColor:h?"white":"black",height:"auto"},children:p(u)})]})})]})}},76785:(e,a,l)=>{l.d(a,{Z:()=>P});l(11518);var o=l(72791),t=l(92552),r=l(84654),s=l(28658),i=l(69597),n=l(83168),d=l(88447),c=l(697),u=l(61889),h=l(20890),p=l(94294),m=l(13400),x=l(36314),g=l(59434),b=l(83708),v=l(68449),j=l(60717),y=l(97892),k=l.n(y),w=l(12481),S=l(10159),f=l(75424),Z=l(49071),C=l(10884),I=l(93819),N=l(80184);function D(e){var a,l,t,r,s,i;let{open:n,handleClose:x,dataItem:v,activateWorkshop:y,deactivateWorkshop:D,actionsAllowed:B}=e;const P=(0,f.D)(),O=(0,g.v9)(j.w),[E,L]=(0,o.useState)(!1),[U,W]=(0,o.useState)(null),R=null===(a=JSON.parse(localStorage.getItem("userInfo")))||void 0===a?void 0:a.UserId;(0,o.useEffect)((()=>{(async()=>{try{const e=(0,w.JU)(S.db,"User",R),a=await(0,w.QT)(e);a.exists()&&W(a.data())}catch(e){console.log(" error")}})()}),[]);const J=v.UserId===R,A=encodeURIComponent("Hey, I found your Studio on nritya.co.in. I'm interested"),M=null===U||void 0===U||null===(l=U.BookedWorkshops)||void 0===l||null===(t=l.includes)||void 0===t?void 0:t.call(l,null===v||void 0===v?void 0:v.id),F=`${window.location.host}/nritya-webApp#/workshop/${v.id}`;return(0,N.jsx)(d.Z,{open:n,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",style:{zIndex:40},children:(0,N.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90%",overflow:"auto",width:{xs:"90%",md:"60%"},bgcolor:O?"black":"background.paper",borderWidth:"2px",borderStyle:"solid",borderColor:O?"white":"black",boxShadow:24,p:"1rem",borderRadius:"8px"},children:[(0,N.jsxs)(u.ZP,{container:!0,spacing:"8px",rowGap:2,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,lg:8,children:(0,N.jsx)("img",{src:v.imageUrl,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px"}})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,lg:4,children:[(0,N.jsxs)(c.Z,{sx:{height:"100%",bgcolor:O?"#333333":"#efefef",p:2,borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,N.jsxs)(c.Z,{sx:{flex:1},children:[(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:k()(v.date).format("DD/MM/YYYY")}),(0,N.jsx)(h.Z,{variant:"h6",component:"p",sx:{color:O?"white":"black"},children:v.time}),(0,N.jsx)(h.Z,{variant:"body1",component:"p",sx:{mt:"2rem",color:O?"white":"black"},children:v.venue})]}),(0,N.jsxs)(c.Z,{sx:{mt:"2rem",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,N.jsxs)(h.Z,{variant:"h5",sx:{alignSelf:"center",color:O?"white":"black"},children:["\u20b9",v.price]}),!B&&!J&&R&&(0,N.jsx)(p.Z,{variant:"outlined",onClick:async()=>{try{L(!0),(0,w.ET)((0,w.hJ)(S.db,b.Ul.BOOKINGS),{StudioId:v.StudioId,WorkshopId:v.id,UserId:R,bookingDate:Date.now()});const e=(0,w.JU)(S.db,"User",R),a=await(0,w.QT)(e);a.exists()&&null!=a.data()&&await(0,w.r7)(e,{BookedWorkshops:[...a.data().BookedWorkshops||[],v.id]}),W((e=>({...e,BookedWorkshops:[...(null===e||void 0===e?void 0:e.BookedWorkshops)||[],v.id]}))),P("Workshop booked","success")}catch(e){console.error(e),P((null===e||void 0===e?void 0:e.message)||"Something went wrong","error")}finally{L(!1)}},disabled:M||E,sx:{alignSelf:"center",boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:M?"Booked":"Book Now"})]})]}),!B&&!J&&R&&(0,N.jsx)(h.Z,{component:"p",variant:"caption",sx:{my:"2px",color:O?"white":"black",textAlign:"center"},children:"Book here and pay at the venue"})]}),(0,N.jsxs)(u.ZP,{item:!0,sx:{mt:1},children:[(0,N.jsxs)(c.Z,{sx:{display:"flex",columnGap:2},children:[(0,N.jsxs)(h.Z,{variant:"h5",component:"p",sx:{color:O?"white":"black"},children:[v.workshopName||"",v.danceStyles.map((e=>` | ${e}`))]}),(0,N.jsx)(I.Z,{shareUrl:F})]}),(0,N.jsxs)(h.Z,{variant:"body1",component:"p",sx:{mt:1,color:O?"white":"black"},children:[(0,N.jsxs)("span",{children:["By ",(null===(r=v.studioDetails)||void 0===r?void 0:r.studioName)||""]}),v.studioDetails&&(null===(s=v.studioDetails)||void 0===s?void 0:s.whatsappNumber)&&(0,N.jsx)(m.Z,{color:"success",size:"small",target:"_blank",href:`https://wa.me/91${v.studioDetails.whatsappNumber}?text=${A}`,children:(0,N.jsx)("img",{src:Z,alt:"Whatsapp call",style:{width:30,height:28}})}),v.studioDetails&&(null===(i=v.studioDetails)||void 0===i?void 0:i.mobileNumber)&&(0,N.jsx)(m.Z,{color:"primary",size:"small",target:"_blank",href:`tel:${v.studioDetails.mobileNumber}`,children:(0,N.jsx)("img",{src:C,alt:"Phone call",style:{width:30,height:28}})})]}),(0,N.jsx)("div",{style:{color:O?"white ":"black"},className:"description-box",dangerouslySetInnerHTML:{__html:v.description||"Workshop Description"}})]})]}),(0,N.jsxs)(c.Z,{sx:{mt:"1rem",textAlign:"right"},children:[B&&J&&(0,N.jsx)(p.Z,{onClick:()=>null!==v&&void 0!==v&&v.active?D(null===v||void 0===v?void 0:v.id):y(null===v||void 0===v?void 0:v.id),variant:"outlined",sx:{mr:"1rem",color:"white",boxShadow:"none",border:"1px solid",backgroundColor:null!==v&&void 0!==v&&v.active?"red":"green",borderColor:"white",color:"white","&:hover":{backgroundColor:null!==v&&void 0!==v&&v.active?"red":"green",borderColor:"white",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:null!==v&&void 0!==v&&v.active?"red":"green",borderColor:"white"},"&:focus":{boxShadow:"none"}},children:null!==v&&void 0!==v&&v.active?"Deactivate":"Activate"}),(0,N.jsx)(p.Z,{onClick:x,variant:"outlined",sx:{color:"white",boxShadow:"none",border:"1px solid",backgroundColor:"transparent",borderColor:O?"white":"black",color:O?"white":"black","&:hover":{backgroundColor:"transparent",borderColor:O?"white":"black",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"transparent",borderColor:O?"white":"black"},"&:focus":{boxShadow:"none"}},children:"Close"})]})]})})}function B(e){var a;let{actionsAllowed:l,dataItem:d,activateWorkshop:u,deactivateWorkshop:h}=e;const p=(0,g.v9)(j.w),[m,y]=(0,o.useState)(null),[k,w]=(0,o.useState)(!1),S=d.id;(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,v.Us)(b.Rb.WORKSHOPICON,S);y(e||"https://cdn.pixabay.com/photo/2016/12/30/10/03/dance-1940245_960_720.jpg")}catch(e){console.error("Error fetching image URL:",e)}})()}),[d.id]);const f={backgroundColor:p?"#444":"white",padding:"0px",color:p?"white":"black",marginRight:"10px",width:320,maxWidth:"100%",boxShadow:"lg",transition:"opacity 0.3s ease"};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(r.Z,{variant:"solid",sx:{...f,"&:hover":{transform:"scale(1.01)",cursor:"pointer"},flex:"none"},onClick:()=>w(!0),children:[(0,N.jsxs)(t.Z,{ratio:"1.78",style:{position:"relative"},children:[(0,N.jsx)("img",{src:m,loading:"lazy",alt:"Studio Image",style:{maxWidth:"100%",objectFit:"cover",overflow:"hidden"}}),(0,N.jsx)(x.Z,{direction:"row",spacing:2,style:{position:"absolute",bottom:0,left:0,padding:"1px"},children:d&&d.danceStyles?d.danceStyles.slice(0,3).map(((e,a)=>(0,N.jsx)(i.Z,{color:a%2===0?"danger":"success",style:{marginLeft:"10px",marginBottom:"10px",fontSize:"0.8rem"},children:e.trim()},a))):(0,N.jsx)(i.Z,{color:"danger",style:{marginBottom:"10px",fontSize:"0.8rem"},children:"No danceforms"},10)})]}),(0,N.jsxs)(s.Z,{style:{padding:"10px",paddingTop:"5px"},children:[(0,N.jsxs)(c.Z,{fontWeight:"md",color:"neutral",textColor:"text.primary",underline:"none",overlay:!0,style:{color:p?"white":"black",extDecoder:"one"},children:[(0,N.jsx)("span",{children:d&&d.workshopName?d.workshopName:""}),!(null!==d&&void 0!==d&&d.active)&&(0,N.jsx)("span",{style:{marginLeft:"2px",padding:"2px 4px",fontSize:"14px",borderRadius:"4px",background:"red"},children:"Inactive"})]}),(0,N.jsxs)(n.ZP,{style:{color:p?"white":"black"},level:"body-xs",noWrap:!0,children:["By ",null!==(a=d.studioDetails)&&void 0!==a&&a.studioName?d.studioDetails.studioName:""]}),(0,N.jsx)(n.ZP,{style:{marginTop:10,color:p?"white":"black"},level:"body-xs",noWrap:!0,children:d.venue?d.venue:""}),(0,N.jsxs)(n.ZP,{style:{color:p?"white":"black"},level:"body-xs",children:[d.date||""," | ",d.time||""]})]})]}),(0,N.jsx)(D,{dataItem:{...d,imageUrl:m},open:k,handleClose:()=>w(!1),activateWorkshop:u,deactivateWorkshop:h,actionsAllowed:l})]})}const P=e=>{let{actionsAllowed:a,dataList:l,activateWorkshop:o,deactivateWorkshop:t}=e;return(0,N.jsx)("div",{className:"horizontal-scroll-wrapper",children:l.map(((e,l)=>(0,N.jsx)(B,{dataItem:e,activateWorkshop:o,deactivateWorkshop:t,actionsAllowed:a},e.id)))})}},77472:(e,a,l)=>{l.r(a),l.d(a,{default:()=>H});var o=l(72791),t=l(10159),r=l(12481),s=l(83708),i=l(59434),n=l(60717),d=l(61224),c=l(43896),u=l(83449),h=l(47283),p=l(82851),m=l(697),x=l(95313),g=l(89743),b=l(2677),v=l(94294),j=l(57482),y=l(81018),k=l(51650),w=l(49644),S=l(76989),f=l(67107),Z=l(44507),C=l(4708),I=l(63237),N=l(4560),D=l(24750),B=l(71652),P=l(97892),O=l.n(P),E=l(26073),L=l(75424),U=l(82873),W=l(18406),R=l(66770),J=l.n(R),A=(l(86009),l(763)),M=l(80184);const F=function(e){let{instructors:a,studioId:l,setWorkshop:d}=e;const c=(0,L.D)(),[u,h]=(0,o.useState)(""),p=(0,i.v9)(n.w),[m,P]=(0,o.useState)([]),[R,F]=(0,o.useState)([]),K=a.map((e=>`${e.name} - ${e.id}`)),T=k.W,H=localStorage.getItem("filterLocation")||"",[$,z]=(0,o.useState)(!1),[Y,G]=(0,o.useState)(""),[V,q]=(0,o.useState)(null),[_,Q]=(0,o.useState)(""),[X,ee]=(0,o.useState)(H),[ae,le]=(0,o.useState)(""),[oe,te]=(0,o.useState)(O()(new Date)),[re,se]=(0,o.useState)(!1),[ie,ne]=(0,o.useState)(""),[de,ce]=(0,o.useState)(1),ue=(0,f.Z)({palette:{mode:p?"dark":"light"}}),he=e=>{e.reset(),F([]),P([]),q(null),G(""),Q(""),le(""),te(O()(new Date)),ee(""),ne("")};return(0,o.useEffect)((()=>{!async function(){const e=document.getElementById("addStudioForm");try{const x=(0,r.IO)((0,r.hJ)(t.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),g=await(0,r.PL)(x);if(g.empty){var o,i,n,d,c,u,h;await(0,r.ET)((0,r.hJ)(t.db,s.i0.DRAFT_WORKSHOPS),{workshopName:(null===(o=e.workshopName)||void 0===o?void 0:o.value)||"",price:(null===(i=e.workshopFees)||void 0===i?void 0:i.value)||0,description:ie,danceStyles:R,instructors:m?null===m||void 0===m||null===(n=m.map)||void 0===n?void 0:n.call(m,(e=>{var a,l,o,t;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:V&&(null===V||void 0===V||null===(d=V.split)||void 0===d||null===(c=d.call(V,":"))||void 0===c||null===(u=c[1])||void 0===u||null===(h=u.trim)||void 0===h?void 0:h.call(u))||null,duration:Y,level:_,time:ae,date:oe.format("YYYY-MM-DD"),city:X})}else{var p;let o=[];g.forEach((e=>{o.push({id:e.id,...e.data()})}));let t=o[0];e.workshopName.value=(null===t||void 0===t?void 0:t.workshopName)||"",e.workshopFees.value=(null===t||void 0===t?void 0:t.price)||0,e.capacity.value=(null===t||void 0===t?void 0:t.capacity)||0,ne((null===t||void 0===t?void 0:t.description)||""),F(null!==t&&void 0!==t&&null!==(p=t.danceStyles)&&void 0!==p&&p.length?t.danceStyles:[]),P(a.filter((e=>null===t||void 0===t?void 0:t.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`)));const r=l.map((e=>e.split(":")[1].trim())).findIndex((e=>e===(null===t||void 0===t?void 0:t.StudioId)));r>0&&q(l[r]),G((null===t||void 0===t?void 0:t.duration)||""),Q((null===t||void 0===t?void 0:t.level)||""),le((null===t||void 0===t?void 0:t.time)||""),te(O()((null===t||void 0===t?void 0:t.date)||Date.now())),ee((null===t||void 0===t?void 0:t.city)||"")}z(!0)}catch(x){console.error(x)}}()}),[]),(0,o.useEffect)((()=>{let e=null,a=null;return $&&async function(){const l=document.getElementById("addStudioForm");try{const o=(0,r.IO)((0,r.hJ)(t.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),i=await(0,r.PL)(o);if(!i.empty){let o=[];i.forEach((e=>{o.push({id:e.id,...e.data()})}));let n=o[0];const d=(0,r.JU)(t.db,s.i0.DRAFT_WORKSHOPS,n.id);e=setInterval((async()=>{try{var e,o,t,s,i,n,c;const h={workshopName:(null===(e=l.workshopName)||void 0===e?void 0:e.value)||"",price:(null===(o=l.workshopFees)||void 0===o?void 0:o.value)||0,description:ie,danceStyles:R,instructors:m?null===m||void 0===m||null===(t=m.map)||void 0===t?void 0:t.call(m,(e=>{var a,l,o,t;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||null})):null,StudioId:V&&(null===V||void 0===V||null===(s=V.split)||void 0===s||null===(i=s.call(V,":"))||void 0===i||null===(n=i[1])||void 0===n||null===(c=n.trim)||void 0===c?void 0:c.call(n))||null,duration:Y,level:_,time:ae,date:oe.format("YYYY-MM-DD"),city:X};if((0,A.isEqual)(a,h))console.log("Nothing for Autosave to save");else try{await(0,r.r7)(d,h),a=h,console.log("Next AutoSave in",1e4)}catch(u){console.error(u)}}catch(u){console.error(u)}}),1e4)}}catch(o){console.error(o)}}(),()=>clearInterval(e)}),[$,R,m,ie,V,Y,_,ae,oe,X]),(0,o.useEffect)((()=>{if(p){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[p]),(0,M.jsxs)("div",{children:[1===de&&(0,M.jsx)(x.Z,{id:"addStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if((e=>{let a=!0;return e.workshopName.value&&e.workshopFees.value&&null!==R&&void 0!==R&&R.length&&null!==m&&void 0!==m&&m.length&&ie&&V&&Y&&_&&ae&&oe&&X||(a=!1),a})(a))try{var l,o,i,n,u;const p=JSON.parse(localStorage.getItem("userInfo")).email,x={workshopName:e.target.workshopName.value,danceStyles:R,instructors:m?null===m||void 0===m||null===(l=m.map)||void 0===l?void 0:l.call(m,(e=>{var a,l,o,t;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:p,StudioId:V&&(null===V||void 0===V||null===(o=V.split)||void 0===o||null===(i=o.call(V,":"))||void 0===i||null===(n=i[1])||void 0===n||null===(u=n.trim)||void 0===u?void 0:u.call(n))||null,duration:Y,level:_,time:ae,description:ie,date:oe.format("YYYY-MM-DD"),price:e.target.workshopFees.value,capacity:e.target.capacity.value,city:X,active:!0,youtubeViedoLink:e.target.youtubeViedoLink.value};se(!0);const g=p,b={entity_name:x.workshopName,time:x.time,date:x.date,StudioId:x.StudioId},v=await(0,W.qC)(x,s.Ul.WORKSHOPS,g,b);if(v.ok){const e=await v.json();h(e.id),d((a=>[...a,{id:e.id,...x}])),he(a),(async()=>{const e=(0,r.IO)((0,r.hJ)(t.db,s.i0.DRAFT_WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=await(0,r.PL)(e);if(!a.empty){let e=[];a.forEach((a=>{e.push({id:a.id,...a.data()})}));let l=e[0];const o=(0,r.JU)(t.db,s.i0.DRAFT_WORKSHOPS,l.id);await(0,r.oe)(o)}})(),c("Workshop successfully added.","success"),ce((e=>e+1))}}catch(p){console.error("Error adding workshop: ",p),c((null===p||void 0===p?void 0:p.message)||"Something went wrong","error")}finally{se(!1)}else c("Please fill all the fields.","error")},style:{backgroundColor:p?"#202020":"",color:p?"white":"black"},children:(0,M.jsx)(x.Z.Group,{controlId:"formBasicAdd",children:(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Workshop Name"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:T,value:R,onChange:(e,a)=>{F(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},multiple:!0,id:"tags-standard",options:K,value:m,onChange:(e,a)=>{P(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:Y,onChange:(e,a)=>{G(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(b.Z,{md:6,children:(0,M.jsx)(E.Z,{defaultTime:ae||"00:00-00:00",handleSelect:(e,a)=>{const[l,o]=ae.split(" - ");let t=`${l} - ${o}`;null!==e&&(t=`${e} - ${o}`),null!==a&&(t=`${l} - ${a}`),le(t)}})}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Date"}),(0,M.jsx)(B._,{dateAdapter:D.y,children:(0,M.jsx)(N.C,{components:["DatePicker"],children:(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(I.M,{sx:{width:"100%"},value:oe,onChange:e=>te(e)})]})})})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Level"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:_,onChange:(e,a)=>{Q(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Fees/Price"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"City"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:U.c,value:X,onChange:(e,a)=>{ee(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Studio"}),(0,M.jsxs)(Z.Z,{theme:ue,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},id:"tags-standard",options:l,value:V,onChange:(e,a)=>{q(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:p?"#333333":"",color:p?"white":"black"}})})]})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Brief Description"}),(0,M.jsx)(J(),{theme:"snow",placeholder:"Enter Description",value:ie,onChange:ne})]})]}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Youtube video link"}),(0,M.jsx)(x.Z.Control,{rows:1,style:{backgroundColor:p?"#333333":"",color:p?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)("hr",{}),(0,M.jsx)(b.Z,{xs:6}),(0,M.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(v.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},type:"submit",disabled:re,children:"Next"})})]})]})})}),re&&(0,M.jsx)(j.Z,{}),2===de&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.Z,{children:(0,M.jsx)(b.Z,{children:(0,M.jsx)(y.Z,{entityId:u,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})})}),(0,M.jsx)(g.Z,{style:{margin:"1rem 0"},children:(0,M.jsx)(b.Z,{style:{textAlign:"right"},children:(0,M.jsx)(v.Z,{variant:"contained",style:{color:"white",backgroundColor:p?"#892cdc":"black"},onClick:()=>ce((e=>e-1)),children:"Done"})})})]})]})};const K=function(e){let{workshopId:a,instructors:l,studioId:d}=e;const c=localStorage.getItem("filterLocation")||"",u=(0,L.D)(),[h,p]=(0,o.useState)(null),[m,j]=(0,o.useState)([]),P=k.W,[W,R]=(0,o.useState)([]),A=(0,i.v9)(n.w),[F,K]=(0,o.useState)(""),[T,H]=(0,o.useState)(""),[$,z]=(0,o.useState)(c),[Y,G]=(0,o.useState)(""),[V,q]=(0,o.useState)(""),[_,Q]=(0,o.useState)(O()(new Date)),[X,ee]=(0,o.useState)(!1),ae=l.map((e=>`${e.name} - ${e.id}`)),le=(0,f.Z)({palette:{mode:A?"dark":"light"}}),[oe,te]=(0,o.useState)(""),[re,se]=(0,o.useState)(null),ie=e=>{e.reset(),R([]),j([]),p(null),K(""),H(""),q(""),Q(O()(new Date)),z(""),se(null),te(""),G("")};return(0,o.useEffect)((()=>{if(re){const e=l.filter((e=>re.instructors.includes(e.id))).map((e=>`${e.name} - ${e.id}`));if(j(e),re&&re.danceStyles&&R(re.danceStyles),re&&re.duration&&K(re.duration),re&&re.level&&H(re.level),re&&re.time&&q(re.time),re&&re.date&&Q(O()(re.date)),re&&re.StudioId){const e=d.map((e=>e.split(":")[1].trim())).findIndex((e=>e===re.StudioId));p(d[e]||null)}z((null===re||void 0===re?void 0:re.city)||""),G((null===re||void 0===re?void 0:re.description)||"")}}),[re]),(0,o.useEffect)((()=>{if(A){document.getElementsByClassName("ql-toolbar ql-snow")[0].style.backgroundColor="white";const e=document.getElementsByClassName("ql-container ql-snow")[0];e.style.backgroundColor="white";const a=document.getElementsByClassName("ql-editor ")[0];console.log(a),e.style.color="black"}}),[A]),(0,M.jsxs)("div",{style:{backgroundColor:A?"#202020":"",color:A?"white":"black"},children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.Z,{id:"updateStudioForm",onSubmit:async e=>{e.preventDefault();const a=e.target;if(oe)if((e=>{let a=!0;return e.workshopName.value&&e.workshopFees.value&&Y&&null!==W&&void 0!==W&&W.length&&null!==m&&void 0!==m&&m.length&&h&&F&&T&&V&&_&&$||(a=!1),a})(a)){try{var l,o,i,n,d;const e={workshopName:a.workshopName.value,price:a.workshopFees.value,capacity:a.capacity.value,description:Y,danceStyles:W,instructors:m?null===m||void 0===m||null===(l=m.map)||void 0===l?void 0:l.call(m,(e=>{var a,l,o,t;return(null===e||void 0===e||null===(a=e.split)||void 0===a||null===(l=a.call(e,"-"))||void 0===l||null===(o=l[1])||void 0===o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||null})):null,author:JSON.parse(localStorage.getItem("userInfo")).displayName,UserId:JSON.parse(localStorage.getItem("userInfo")).UserId,creatorEmail:JSON.parse(localStorage.getItem("userInfo")).email,StudioId:h&&(null===h||void 0===h||null===(o=h.split)||void 0===o||null===(i=o.call(h,":"))||void 0===i||null===(n=i[1])||void 0===n||null===(d=n.trim)||void 0===d?void 0:d.call(n))||null,duration:F,level:T,time:V,date:_.format("YYYY-MM-DD"),city:$,youtubeViedoLink:a.youtubeViedoLink.value};ee(!0);const c=(0,r.JU)(t.db,s.Ul.WORKSHOPS,oe);await(0,r.r7)(c,e),ie(a),u("Workshop successfully updated.","success")}catch(c){console.error("Error updating workshop: ",c),u((null===c||void 0===c?void 0:c.message)||"Something went wrong","error")}finally{ee(!1)}document.getElementById("updateStudioForm").reset()}else u("Please fill all the fields.","error")},children:(0,M.jsxs)(x.Z.Group,{controlId:"formBasicUpdate",children:[(0,M.jsx)(x.Z.Label,{children:"Id"}),(0,M.jsxs)(x.Z.Control,{as:"select",name:"nameId",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},onChange:async e=>{e.preventDefault();const a=e.target.value.split(":").pop().trim();te(a);try{const e=await(0,r.QT)((0,r.JU)(t.db,s.Ul.WORKSHOPS,a));e.exists?se(e.data()):se(null)}catch(l){console.error("Error fetching workshop data:",l,a)}},children:[(0,M.jsx)("option",{value:"",children:"Select a workshop..."}),a&&a.length>0?a.map((e=>(0,M.jsx)("option",{value:e,children:e},e))):(0,M.jsx)("option",{value:"",children:"No workshop yet!"})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(b.Z,{md:6,children:(0,M.jsx)(y.Z,{entityId:oe,title:"Workshop Images",storageFolder:s.Rb.WORKSHOPICON,maxImageCount:1})}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Workshop Name"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:re?re.workshopName:"",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},type:"textarea",placeholder:"Enter workshop name",name:"workshopName"}),(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Dance Styles"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},multiple:!0,id:"tags-standard",options:P,value:W,onChange:(e,a)=>{R(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Dance Styles",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]}),(0,M.jsx)("br",{}),(0,M.jsx)(x.Z.Label,{children:"Names of Instructors"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},multiple:!0,id:"tags-standard",options:ae,value:m,onChange:(e,a)=>{j(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Instructors",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Duration (in hours)"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},id:"tags-standard",options:[1,2,3,4,5,6,7,8,9,10,11,12],value:F,onChange:(e,a)=>{K(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Duration",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]})]}),(0,M.jsx)(b.Z,{md:6,children:(0,M.jsx)(E.Z,{defaultTime:V||"00:00-00:00",handleSelect:(e,a)=>{const[l,o]=V.split(" - ");let t=`${l} - ${o}`;null!==e&&(t=`${e} - ${o}`),null!==a&&(t=`${l} - ${a}`),q(t)}})})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Date"}),(0,M.jsx)(B._,{dateAdapter:D.y,children:(0,M.jsx)(N.C,{components:["DatePicker"],children:(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(I.M,{sx:{width:"100%"},value:_,onChange:e=>Q(e)})]})})})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Level"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},id:"tags-standard",options:[s.zq.ALL,s.zq.BEGINNERS,s.zq.INTERMEDIATE,s.zq.ADVANCED],value:T,onChange:(e,a)=>{H(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Level",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Fees/Price"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:re?re.price:"",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},type:"number",placeholder:"Enter fees/price",name:"workshopFees"})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Maximum capacity"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:re?re.capacity:0,style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},type:"number",placeholder:"Enter capacity",name:"capacity"})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"City"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},id:"tags-standard",options:U.c,value:$,onChange:(e,a)=>{z(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select City",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Studio"}),(0,M.jsxs)(Z.Z,{theme:le,children:[(0,M.jsx)(C.ZP,{}),(0,M.jsx)(w.Z,{style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},id:"tags-standard",options:d,value:h,onChange:(e,a)=>{p(a)},renderInput:e=>(0,M.jsx)(S.Z,{...e,variant:"standard",placeholder:"Select Studio",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"}})})]})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Brief Description"}),(0,M.jsx)(J(),{theme:"snow",placeholder:"Enter Description",value:Y,onChange:G})]}),(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Youtube video Id"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:re?re.youtubeId:"",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},type:"text",placeholder:"Enter youtube videoId",name:"youtubeId"})]})]}),(0,M.jsx)(g.Z,{children:(0,M.jsxs)(b.Z,{md:6,children:[(0,M.jsx)(x.Z.Label,{children:"Youtube video Link"}),(0,M.jsx)(x.Z.Control,{rows:1,defaultValue:re?re.youtubeViedoLink:"",style:{backgroundColor:A?"#333333":"",color:A?"white":"black"},type:"text",placeholder:"Enter youtube video link",name:"youtubeViedoLink"})]})}),(0,M.jsx)("hr",{}),(0,M.jsxs)(g.Z,{children:[(0,M.jsx)(b.Z,{xs:6}),(0,M.jsx)(b.Z,{xs:6,className:"d-flex justify-content-end",children:(0,M.jsx)(v.Z,{variant:"contained",style:{color:"white",backgroundColor:A?"#892cdc":"black"},type:"submit",disabled:X,children:"Update Workshop"})})]})]})]})})]})};var T=l(76785);const H=function(){const[e,a]=(0,o.useState)([]),[l,x]=(0,o.useState)([]),[g,b]=(0,o.useState)([]),v=(0,i.v9)(n.w),[j,y]=(0,o.useState)([]),[k,w]=(0,o.useState)(!1),[S,f]=(0,o.useState)(-1),{currentUser:Z}=(0,d.a)(),[C,I]=o.useState("1");return(0,o.useEffect)((()=>{(async e=>{try{const e=(0,r.JU)(t.db,"User",Z.uid),a=await(0,r.QT)(e);a.exists()&&null!=a.data()&&(w(a.data().CreatorMode),f(a.data().isPremium))}catch(a){console.log(" error")}})()}),[k]),(0,o.useEffect)((()=>{(async()=>{let e=null;if(JSON.parse(localStorage.getItem("userInfo"))&&JSON.parse(localStorage.getItem("userInfo")).UserId&&(e=JSON.parse(localStorage.getItem("userInfo")).UserId),!e)return void alert("User not found");const a=(0,r.hJ)(t.db,s.Ul.INSTRUCTORS),l=(0,r.IO)(a,(0,r.ar)("createdBy","==",e)),o=await(0,r.PL)(l),i=[];o.forEach((e=>{i.push({id:e.id,name:e.data().name})})),y(i)})()}),[]),(0,o.useEffect)((()=>{(async()=>{const e=(0,r.IO)((0,r.hJ)(t.db,s.Ul.STUDIO),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),l=(await(0,r.PL)(e)).docs.filter((e=>e.data().studioName)).map((e=>{const a=e.data();return{id:e.id,...a}}));a(l.map((e=>String(e.studioName)+" :"+String(e.id))))})()}),[]),(0,o.useEffect)((()=>{(async()=>{const e=(0,r.IO)((0,r.hJ)(t.db,s.Ul.WORKSHOPS),(0,r.ar)("UserId","==",JSON.parse(localStorage.getItem("userInfo")).UserId)),a=(await(0,r.PL)(e)).docs.filter((e=>e.data().workshopName)).map((e=>{const a=e.data();return{id:e.id,...a}})).map((async e=>{const a=(0,r.JU)(t.db,s.Ul.STUDIO,null===e||void 0===e?void 0:e.StudioId),l=await(0,r.QT)(a);return{...e,studioDetails:l.data()}})),l=await Promise.all(a);localStorage.setItem("WorkshopCreated",JSON.stringify(l)),x(l),b(l.map((e=>String(e.workshopName)+" :"+String(e.id))))})()}),[x]),(0,o.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("WorkshopCreated"))||[];x(e);const a=e.map((e=>`${e.workshopName} : ${e.id}`));b(a)}),[b]),(0,M.jsxs)("div",{children:[(0,M.jsx)("br",{}),k?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(m.Z,{sx:{width:"100%",typography:"body1"},children:(0,M.jsxs)(u.ZP,{value:C,children:[(0,M.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,M.jsxs)(h.Z,{style:{color:v?"white":"black"},onChange:(e,a)=>{I(a)},"aria-label":"lab API tabs example",children:[(0,M.jsx)(c.Z,{style:{color:v?"white":"black"},label:"Add Workshop",value:"1"}),(0,M.jsx)(c.Z,{style:{color:v?"white":"black"},label:"Update Workshop",value:"2"})]})}),(0,M.jsx)(p.Z,{value:"1",children:(0,M.jsx)(F,{instructors:j,studioId:e,setWorkshop:x})}),(0,M.jsx)(p.Z,{value:"2",children:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(K,{instructors:j,workshopId:g,studioId:e})})})]})})}):"",l.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("h3",{style:{color:v?"white":"black"},children:"Your Workshops"}),(0,M.jsx)(T.Z,{dataList:l,activateWorkshop:async e=>{try{const a=(0,r.JU)(t.db,s.Ul.WORKSHOPS,e);await(0,r.r7)(a,{active:!0}),x((a=>a.map((a=>a.id===e?{...a,active:!0}:a))))}catch(a){console.error(a)}},deactivateWorkshop:async e=>{try{const a=(0,r.JU)(t.db,s.Ul.WORKSHOPS,e);await(0,r.r7)(a,{active:!1}),x((a=>a.map((a=>a.id===e?{...a,active:!1}:a))))}catch(a){console.error(a)}},actionsAllowed:!0})]})]})}},11518:()=>{},10884:(e,a,l)=>{e.exports=l.p+"static/media/india_11009487.98ac2ba43166eaa84593.png"},49071:(e,a,l)=>{e.exports=l.p+"static/media/whatsapp.8d81ece5885274edfd73.png"},82873:e=>{e.exports=JSON.parse('{"c":["Agra","Ahmedabad","Ajmer","Alappuzha","Allahabad","Ambattur","Ambernath","Amritsar","Anantapur","Arrah","Aurangabad","Avadi","Bahadurgarh","Bahraich","Ballia","Bengaluru","Baranagar","Barasat","Bareilly","Barasat","Bathinda","Begusarai","Belgaum","Bellary","Berhampur","Bettiah","Bharatpur","Bharuch","Bhilai","Bhilwara","Bhimavaram","Bhiwani","Bhopal","Bhubaneswar","Bhuj","Bhusawal","Bidar","Bihar Sharif","Bilaspur","Bilimora","Bongaigaon","Bongaigaon","Bulandshahr","Buxar","Chandannagar","Chandigarh","Chandausi","Chapra","Chennai","Chikmagalur","Chittorgarh","Coimbatore","Cuttack","Darbhanga","Dehradun","Deoghar","Dewas","Dhanbad","Dhule","Dimapur","Dindigul","Durg","Eluru","Erode","Etawah","Faridabad","Farrukhabad","Gandhinagar","Gangapur","Gaya","Giridih","Godhra","Gopalpur","Gorakhpur","Guntakal","Guntur","Gurugram","Guwahati","Haldia","Hapur","Haridwar","Hazaribagh","Hindupur","Hisar","Hosur","Howrah","Hubballi","Hyderabad","Ichalkaranji","Imphal","Indore","Jabalpur","Jaipur","Jalandhar","Jalna","Jalgaon","Jammu","Jamnagar","Jamshedpur","Jaunpur","Jhansi","Jodhpur","Junagadh","Kadapa","Kakinada","Kalyan","Kamarhati","Kanpur","Karimnagar","Karnal","Katihar","Khammam","Khanna","Kharagpur","Kochi","Kolhapur","Kolkata","Kollam","Korba","Kota","Kottayam","Kozhikode","Krishnanagar","Kulti","Kumbakonam","Lakhimpur","Latur","Lucknow","Ludhiana","Madhyamgram","Madurai","Maheshtala","Malegaon","Malerkotla","Mango","Mathura","Meerut","Mirzapur","Moradabad","Morvi","Mumbai","Muzaffarnagar","Muzaffarpur","Mysore","Nabadwip","Nagaur","Nagpur","Naihati","Nalgonda","Nanded","Nashik","Navi Mumbai","Nellore","New Delhi","Nizamabad","North Dumdum","Orai","Ozhukarai","Pali","Pallavaram","Panihati","Panipat","Panvel","Parbhani","Patiala","Patna","Pimpri-Chinchwad","Puducherry","Pune","Purnia","Purulia","Raebareli","Raichur","Raiganj","Rajahmundry","Rajkot","Rajpur Sonarpur","Rampur","Ranchi","Ratlam","Raurkela","Rewa","Rohtak","Rourkela","Sagar","Saharanpur","Salem","Sangli","Sangli-Miraj & Kupwad","Satara","Satna","Secunderabad","Serampore","Shahjahanpur","Shimla","Shimoga","Shivpuri","Sikar","Siliguri","Singrauli","South Dumdum","Srikakulam","Srinagar","Sultanpur","Surendranagar","Surat","Thane","Thiruvananthapuram","Thrissur","Tiruchirappalli","Tirunelveli","Tirupati","Tiruvottiyur","Tumkur","Udaipur","Udupi","Unnao","Vadodara","Vapi","Varanasi","Vasai-Virar","Vellore","Vijayawada","Visakhapatnam","Warangal","Yamunanagar"]}')},51650:e=>{e.exports=JSON.parse('{"W":["Kuchipudi","Swing","Irish Dance","Folk Dance","Street Dance","Breaking","Voguing","House Dance","Bachata","Ballet","Ballroom","Belly Dance","Bhangra","Bharatanatyam","Bihu","Bollywood","Bollyhop","Butoh","Capoeira","Chhau","Clogging","Contemporary","Dandiya Raas","Flamenco","Garba","Giddha","Heels","Hip Hop","Irish Step Dance","Jazz","Jive","Kathak","Kathakali","Kizomba","Krumping","Lavani","Line Dance","Locking","Lyrical Hip-Hop","Manipuri","Modern Dance","Mohiniyattam","Odissi","Polynesian Dance","Popping","Rouf","Salsa","Sattriya","Tango","Tap Dance","Vogue","Waacking","Whacking","Zumba"]}')}}]);
//# sourceMappingURL=4802.368e1e50.chunk.js.map